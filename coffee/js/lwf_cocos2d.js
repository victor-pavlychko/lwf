// Copyright (c) 2012-2013 GREE, Inc - http://git.io/uvS3hQ
// Copyright (c) 2010-2012 Tween.js authors - http://git.io/tiDrNw
// Copyright (c) 2001 Robert Penner - http://goo.gl/Qjqc0
// Copyright (c) 2011 Gary Linscott
// Copyright (c) 2011-2012 Juan Mellado
// Copyright (c) 2013 C. Scott Ananian - http://git.io/vUHSG
// Copyright (c) 2012 imaya - http://git.io/cC8gDw
!function(){"undefined"==typeof global&&"undefined"!=typeof window?global=window:"undefined"==typeof window&&"undefined"!=typeof self?global=self:"undefined"!=typeof cc&&(global=cc),function(){var t,e,i,r,s,n,o,a,h,l,c,u,p,d,f,m,y,_,g,v,M,I,b,x,L,E,F,w,C,B,S,A,T,P,k,O,R,N,D,H,W,j,z,U,G,X,V,Y,K,Q,q={}.hasOwnProperty,Z=function(t,e){function i(){this.constructor=t}for(var r in e)q.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};G=function(){function t(){}return t.available="undefined"!=typeof Float32Array,t}(),D=function(){return function(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}}(),z=function(){function t(t,e){null==t&&(t=0),null==e&&(e=0),this._=G.available?new Float32Array(2):[],this._[0]=t,this._[1]=e}return t.prototype.getTranslateX=function(){return this._[0]},t.prototype.setTranslateX=function(t){this._[0]=t},t.prototype.getTranslateY=function(){return this._[1]},t.prototype.setTranslateY=function(t){this._[1]=t},t}(),"undefined"!=typeof z.prototype.__defineGetter__?(z.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),z.prototype.__defineSetter__("translateX",function(t){return this.setTranslateX(t)}),z.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),z.prototype.__defineSetter__("translateY",function(t){return this.setTranslateY(t)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(z.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(t){return this.setTranslateX(t)}}),Object.defineProperty(z.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(t){return this.setTranslateY(t)}})),P=function(){function t(t,e,i,r,s,n){this._=G.available?new Float32Array(6):[],null!=t?(this._[0]=t,this._[1]=r,this._[2]=i,this._[3]=e,this._[4]=s,this._[5]=n):this.clear()}return t.prototype.clear=function(){this._[0]=1,this._[1]=0,this._[2]=0,this._[3]=1,this._[4]=0,this._[5]=0},t.prototype.set=function(t){var e,i;for(e=i=0;6>i;e=++i)this._[e]=t._[e];return this},t.prototype.setWithComparing=function(t){var e,i,r;if(null===t)return!1;for(e=!1,i=r=0;6>r;i=++r)this._[i]!==t._[i]&&(this._[i]=t._[i],e=!0);return e},t.prototype.getScaleX=function(){return this._[0]},t.prototype.setScaleX=function(t){this._[0]=t},t.prototype.getSkew1=function(){return this._[1]},t.prototype.setSkew1=function(t){this._[1]=t},t.prototype.getSkew0=function(){return this._[2]},t.prototype.setSkew0=function(t){this._[2]=t},t.prototype.getScaleY=function(){return this._[3]},t.prototype.setScaleY=function(t){this._[3]=t},t.prototype.getTranslateX=function(){return this._[4]},t.prototype.setTranslateX=function(t){this._[4]=t},t.prototype.getTranslateY=function(){return this._[5]},t.prototype.setTranslateY=function(t){this._[5]=t},t}(),"undefined"!=typeof P.prototype.__defineGetter__?(P.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),P.prototype.__defineSetter__("scaleX",function(t){return this.setScaleX(t)}),P.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),P.prototype.__defineSetter__("scaleY",function(t){return this.setScaleY(t)}),P.prototype.__defineGetter__("skew0",function(){return this.getSkew0()}),P.prototype.__defineSetter__("skew0",function(t){return this.setSkew0(t)}),P.prototype.__defineGetter__("skew1",function(){return this.getSkew1()}),P.prototype.__defineSetter__("skew1",function(t){return this.setSkew1(t)}),P.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),P.prototype.__defineSetter__("translateX",function(t){return this.setTranslateX(t)}),P.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),P.prototype.__defineSetter__("translateY",function(t){return this.setTranslateY(t)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(P.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(t){return this.setScaleX(t)}}),Object.defineProperty(P.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(t){return this.setScaleY(t)}}),Object.defineProperty(P.prototype,"skew0",{get:function(){return this.getSkew0()},set:function(t){return this.setSkew0(t)}}),Object.defineProperty(P.prototype,"skew1",{get:function(){return this.getSkew1()},set:function(t){return this.setSkew1(t)}}),Object.defineProperty(P.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(t){return this.setTranslateX(t)}}),Object.defineProperty(P.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(t){return this.setTranslateY(t)}})),_=function(){function t(t,e,i,r){this._=G.available?new Float32Array(4):[],null!=t?(this._[0]=t,this._[1]=e,this._[2]=i,this._[3]=r):(this._[0]=0,this._[1]=0,this._[2]=0,this._[3]=0)}return t.prototype.set=function(t,e,i,r){if("object"==typeof t)for(e=i=0;4>i;e=++i)this._[e]=t._[e];else this._[0]=t,this._[1]=e,this._[2]=i,this._[3]=r},t.prototype.isZero=function(){return 0===this._[0]&&0===this._[1]&&0===this._[2]&&0===this._[3]},t.prototype.getRed=function(){return this._[0]},t.prototype.setRed=function(t){this._[0]=t},t.prototype.getGreen=function(){return this._[1]},t.prototype.setGreen=function(t){this._[1]=t},t.prototype.getBlue=function(){return this._[2]},t.prototype.setBlue=function(t){this._[2]=t},t.prototype.getAlpha=function(){return this._[3]},t.prototype.setAlpha=function(t){this._[3]=t},t}(),"undefined"!=typeof _.prototype.__defineGetter__?(_.prototype.__defineGetter__("red",function(){return this.getRed()}),_.prototype.__defineSetter__("red",function(t){return this.setRed(t)}),_.prototype.__defineGetter__("green",function(){return this.getGreen()}),_.prototype.__defineSetter__("green",function(t){return this.setGreen(t)}),_.prototype.__defineGetter__("blue",function(){return this.getBlue()}),_.prototype.__defineSetter__("blue",function(t){return this.setBlue(t)}),_.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),_.prototype.__defineSetter__("alpha",function(t){return this.setAlpha(t)})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(_.prototype,"red",{get:function(){return this.getRed()},set:function(t){return this.setRed(t)}}),Object.defineProperty(_.prototype,"green",{get:function(){return this.getGreen()},set:function(t){return this.setGreen(t)}}),Object.defineProperty(_.prototype,"blue",{get:function(){return this.getBlue()},set:function(t){return this.setBlue(t)}}),Object.defineProperty(_.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(t){return this.setAlpha(t)}})),e=function(){function t(t){this._=G.available?new Float32Array(1):[],this._[0]=t}return t.prototype.getAlpha=function(){return this._[0]},t.prototype.setAlpha=function(t){this._[0]=t},t}(),"undefined"!=typeof e.prototype.__defineGetter__?(e.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),e.prototype.__defineSetter__("alpha",function(t){return this.setAlpha(t)})):"undefined"!=typeof Object.defineProperty&&Object.defineProperty(e.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(t){return this.setAlpha(t)}}),g=function(){function t(t,e,i,r,s,n,o,a){this.multi=new _(t,e,i,r),this.add=new _(s,n,o,a),null==t&&this.clear()}return t.prototype.clear=function(){this.multi.set(1,1,1,1),this.add.set(0,0,0,0)},t.prototype.set=function(t){return this.multi.set(t.multi),this.add.set(t.add),this},t.prototype.hasAdd=function(){return!this.add.isZero()},t.prototype.setWithComparing=function(t){var e,i,r,s,n;if(null===t)return!1;for(i=!1,e=t.multi,s=this.multi,r=n=0;4>n;r=++n)s._[r]!==e._[r]&&(s._[r]=e._[r],i=!0);for(e=t.add,t=this.add,r=s=0;4>s;r=++s)t._[r]!==e._[r]&&(t._[r]=e._[r],i=!0);return i},t}(),L=function(){function t(){}return t.Constant=function(){function t(){}return t.HEADER_SIZE=332,t.FORMAT_VERSION_0=20,t.FORMAT_VERSION_1=18,t.FORMAT_VERSION_2=17,t.FORMAT_VERSION_141211=1315345,t.HEADER_SIZE_COMPAT0=324,t.FORMAT_VERSION_COMPAT0_0=19,t.FORMAT_VERSION_COMPAT0_1=18,t.FORMAT_VERSION_COMPAT0_2=17,t.HEADER_SIZE_COMPAT1=324,t.FORMAT_VERSION_COMPAT1_0=18,t.FORMAT_VERSION_COMPAT1_1=16,t.FORMAT_VERSION_COMPAT1_2=16,t.FORMAT_TYPE=0,t.OPTION_OFFSET=7,t.OPTION_USE_SCRIPT=1,t.OPTION_USE_TEXTUREATLAS=2,t.OPTION_COMPRESSED=4,t.OPTION_USE_LUASCRIPT=8,t.MATRIX_FLAG=-2147483648,t.COLORTRANSFORM_FLAG=-2147483648,t.TEXTUREFORMAT_NORMAL=0,t.TEXTUREFORMAT_PREMULTIPLIEDALPHA=1,t.BLEND_MODE_NORMAL=0,t.BLEND_MODE_ADD=1,t.BLEND_MODE_LAYER=2,t.BLEND_MODE_ERASE=3,t.BLEND_MODE_MASK=4,t.BLEND_MODE_MULTIPLY=5,t.BLEND_MODE_SCREEN=6,t.BLEND_MODE_SUBTRACT=7,t}(),t.StringBase=function(){return function(t){this.stringId=t}}(),t.Texture=function(){function t(t,e,i,r,s){this.stringId=t,this.format=e,this.width=i,this.height=r,this.scale=s}return t.prototype.setFilename=function(t){this.filename=t.strings[this.stringId]},t}(),t.TextureReplacement=function(){return function(t,e,i,r,s){this.filename=t,this.format=e,this.width=i,this.height=r,this.scale=s}}(),t.TextureFragment=function(){function t(t,e,i,r,s,n,o,a,h,l,c){this.stringId=t,this.textureId=e,this.rotated=i,this.x=r,this.y=s,this.u=n,this.v=o,this.w=a,this.h=h,this.ow=l,this.oh=c}return t.prototype.setFilename=function(t){this.filename=t.strings[this.stringId]},t}(),t.TextureFragmentReplacement=function(){return function(t,e,i,r,s,n,o,a,h,l,c){this.filename=t,this.textureId=e,this.rotated=i,this.x=r,this.y=s,this.u=n,this.v=o,this.w=a,this.h=h,this.ow=l,this.oh=c}}(),t.Bitmap=function(){return function(t,e){this.matrixId=t,this.textureFragmentId=e}}(),t.BitmapEx=function(){function t(t,e,i,r,s,n,o){this.matrixId=t,this.textureFragmentId=e,this.attribute=i,this.u=r,this.v=s,this.w=n,this.h=o}return t.Attribute=function(){function t(){}return t.REPEAT_S=1,t.REPEAT_T=2,t}(),t}(),t.Font=function(){return function(t,e){this.stringId=t,this.letterSpacing=e}}(),t.TextProperty=function(){function t(t,e,i,r,s,n,o,a,h,l,c,u,p,d){this.maxLength=t,this.fontId=e,this.fontHeight=i,this.align=r,this.leftMargin=s,this.rightMargin=n,this.letterSpacing=o,this.leading=a,this.strokeColorId=h,this.strokeWidth=l,this.shadowColorId=c,this.shadowOffsetX=u,this.shadowOffsetY=p,this.shadowBlur=d}return t.Align=function(){function t(){}return t.LEFT=0,t.RIGHT=1,t.CENTER=2,t.ALIGN_MASK=3,t.VERTICAL_BOTTOM=4,t.VERTICAL_MIDDLE=8,t.VERTICAL_MASK=12,t}(),t}(),t.Text=function(){return function(t,e,i,r,s,n,o){this.matrixId=t,this.nameStringId=e,this.textPropertyId=i,this.stringId=r,this.colorId=s,this.width=n,this.height=o}}(),t.ParticleData=function(){return function(t){this.stringId=t}}(),t.Particle=function(){return function(t,e,i){this.matrixId=t,this.colorTransformId=e,this.particleDataId=i}}(),t.ProgramObject=function(t){function e(t,i,r,s,n){this.width=i,this.height=r,this.matrixId=s,this.colorTransformId=n,e.__super__.constructor.call(this,t)}return Z(e,t),e}(t.StringBase),t.GraphicObject=function(){function t(t,e){this.graphicObjectType=t,this.graphicObjectId=e}return t.Type=function(){function t(){}return t.BITMAP=0,t.BITMAPEX=1,t.TEXT=2,t.GRAPHIC_OBJECT_MAX=3,t}(),t}(),t.Graphic=function(){return function(t,e){this.graphicObjectId=t,this.graphicObjects=e}}(),t.LObject=function(){function t(t,e){this.objectType=t,this.objectId=e}return t.Type=function(){function t(){}return t.BUTTON=0,t.GRAPHIC=1,t.MOVIE=2,t.BITMAP=3,t.BITMAPEX=4,t.TEXT=5,t.PARTICLE=6,t.PROGRAMOBJECT=7,t.ATTACHEDMOVIE=8,t.OBJECT_MAX=9,t}(),t}(),t.Animation=function(){return function(t,e){this.animationOffset=t,this.animationLength=e}}(),t.ButtonCondition=function(){function t(t,e,i){this.condition=t,this.keyCode=e,this.animationId=i}return t.Condition=function(){function t(){}return t.ROLLOVER=1,t.ROLLOUT=2,t.PRESS=4,t.RELEASE=8,t.DRAGOUT=16,t.DRAGOVER=32,t.RELEASEOUTSIDE=64,t.KEYPRESS=128,t}(),t}(),t.Button=function(){return function(t,e,i,r,s,n){this.width=t,this.height=e,this.matrixId=i,this.colorTransformId=r,this.conditionId=s,this.conditions=n}}(),t.Label=function(t){function e(t,i){this.frameNo=i,e.__super__.constructor.call(this,t)}return Z(e,t),e}(t.StringBase),t.InstanceName=function(t){function e(t){e.__super__.constructor.call(this,t)}return Z(e,t),e}(t.StringBase),t.Event=function(t){function e(t){e.__super__.constructor.call(this,t)}return Z(e,t),e}(t.StringBase),t.String=function(){return function(t,e){this.stringOffset=t,this.stringLength=e}}(),t.Place=function(){return function(t,e,i,r,s){this.depth=t,this.objectId=e,this.instanceId=i,this.matrixId=r,this.blendMode=s}}(),t.ControlMoveM=function(){return function(t,e){this.placeId=t,this.matrixId=e}}(),t.ControlMoveC=function(){return function(t,e){this.placeId=t,this.colorTransformId=e}}(),t.ControlMoveMC=function(){return function(t,e,i){this.placeId=t,this.matrixId=e,this.colorTransformId=i}}(),t.ControlMoveMCB=function(){return function(t,e,i,r){this.placeId=t,this.matrixId=e,this.colorTransformId=i,this.blendMode=r}}(),t.Control=function(){function t(t,e){this.controlType=t,this.controlId=e}return t.Type=function(){function t(){}return t.MOVE=0,t.MOVEM=1,t.MOVEC=2,t.MOVEMC=3,t.ANIMATION=4,t.MOVEMCB=5,t.CONTROL_MAX=6,t}(),t}(),t.Frame=function(){return function(t,e){this.controlOffset=t,this.controls=e}}(),t.MovieClipEvent=function(){function t(t,e){this.clipEvent=t,this.animationId=e}return t.ClipEvent=function(){function t(){}return t.LOAD=1,t.UNLOAD=2,t.ENTERFRAME=4,t}(),t}(),t.Movie=function(){return function(t,e,i,r,s,n,o){this.depths=t,this.labelOffset=e,this.labels=i,this.frameOffset=r,this.frames=s,this.clipEventId=n,this.clipEvents=o}}(),t.MovieLinkage=function(t){function e(t,i){this.movieId=i,e.__super__.constructor.call(this,t)}return Z(e,t),e}(t.StringBase),t.ItemArray=function(){return function(t,e){this.offset=t,this.length=e}}(),t.Header=function(){return function(t,e,i,r,s,n,o,a,h,l,c,u,p,d,f,m,y,_,g,v,M,I,b,x,L,E,F,w,C,B,S,A,T,P,k,O,R,N,D,H,W,j,z,U,G,X,V,Y,K,Q,q,Z,$){this.id0=t,this.id1=e,this.id2=i,this.id3=r,this.formatVersion0=s,this.formatVersion1=n,this.formatVersion2=o,this.formatVersion=a,this.option=h,this.width=l,this.height=c,this.frameRate=u,this.rootMovieId=p,this.nameStringId=d,this.backgroundColor=f,this.stringBytes=m,this.animationBytes=y,this.translate=_,this.matrix=g,this.color=v,this.alphaTransform=M,this.colorTransform=I,this.objectData=b,this.texture=x,this.textureFragment=L,this.bitmap=E,this.bitmapEx=F,this.font=w,this.textProperty=C,this.text=B,this.particleData=S,this.particle=A,this.programObject=T,this.graphicObject=P,this.graphic=k,this.animation=O,this.buttonCondition=R,this.button=N,this.label=D,this.instanceName=H,this.eventData=W,this.place=j,this.controlMoveM=z,this.controlMoveC=U,this.controlMoveMC=G,this.controlMoveMCB=X,this.control=V,this.frame=Y,this.movieClipEvent=K,this.movie=Q,this.movieLinkage=q,this.stringData=Z,this.lwfLength=$}}(),t}(),t=L.TextProperty.Align,h=L.MovieClipEvent.ClipEvent,v=L.ButtonCondition.Condition,M=L.Constant,U=L.LObject.Type,I=L.Control.Type,E=L.GraphicObject.Type,i=function(){function t(){}return t.END=0,t.PLAY=1,t.STOP=2,t.NEXTFRAME=3,t.PREVFRAME=4,t.GOTOFRAME=5,t.GOTOLABEL=6,t.SETTARGET=7,t.EVENT=8,t.CALL=9,t.INSTANCE_TARGET_ROOT=-1,t.INSTANCE_TARGET_PARENT=-2,t}(),b=function(){function t(t,i,r,s,n,o,a,h,l,c,u,p,d,f,m,y,v,M,I,b,x,E,F,w,C,B,S,A,T,k,O,R,N,D,H,W){var j,U,G,X,V;this.header=t,this.translates=i,this.matrices=r,this.colors=s,this.alphaTransforms=n,this.colorTransforms=o,this.objects=a,this.textures=h,this.textureFragments=l,this.bitmaps=c,this.bitmapExs=u,this.fonts=p,this.textProperties=d,this.texts=f,this.particleDatas=m,this.particles=y,this.programObjects=v,this.graphicObjects=M,this.graphics=I,this.animations=b,this.buttonConditions=x,this.buttons=E,this.labels=F,this.instanceNames=w,this.events=C,this.places=B,this.controlMoveMs=S,this.controlMoveCs=A,this.controlMoveMCs=T,this.controlMoveMCBs=k,this.controls=O,this.frames=R,this.movieClipEvents=N,this.movies=D,this.movieLinkages=H,this.strings=W,null!=this.header.header?(G=this.header,this.header=G.header,this.translates=function(){var t,e,i,r;for(i=G.translates,r=[],t=0,e=i.length;e>t;t++)V=i[t],r.push(new z(V._[0],V._[1]));return r}(),this.matrices=function(){var t,e,i,r;for(i=G.matrices,r=[],t=0,e=i.length;e>t;t++)X=i[t],r.push(new P(X._[0],X._[3],X._[2],X._[1],X._[4],X._[5]));return r}(),this.colors=function(){var t,e,i,r;for(i=G.colors,r=[],t=0,e=i.length;e>t;t++)U=i[t],r.push(new _(U._[0],U._[1],U._[2],U._[3]));return r}(),this.alphaTransforms=function(){var t,i,r,s;for(r=G.alphaTransforms,s=[],t=0,i=r.length;i>t;t++)j=r[t],s.push(new e(j._[0]));return s}(),this.colorTransforms=function(){var t,e,i,r;for(i=G.colorTransforms,r=[],t=0,e=i.length;e>t;t++)U=i[t],r.push(new g(U.multi._[0],U.multi._[1],U.multi._[2],U.multi._[3],U.add._[0],U.add._[1],U.add._[2],U.add._[3]));return r}(),this.objects=G.objects,this.textures=G.textures,this.textureFragments=G.textureFragments,this.bitmaps=G.bitmaps,this.bitmapExs=G.bitmapExs,this.fonts=G.fonts,this.textProperties=G.textProperties,this.texts=G.texts,this.particleDatas=G.particleDatas,this.particles=G.particles,this.programObjects=G.programObjects,this.graphicObjects=G.graphicObjects,this.graphics=G.graphics,this.animations=G.animations,this.buttonConditions=G.buttonConditions,this.buttons=G.buttons,this.labels=G.labels,this.instanceNames=G.instanceNames,this.events=G.events,this.places=G.places,this.controlMoveMs=G.controlMoveMs,this.controlMoveCs=G.controlMoveCs,this.controlMoveMCs=G.controlMoveMCs,this.controlMoveMCBs=G.controlMoveMCBs,this.controls=G.controls,this.frames=G.frames,this.movieClipEvents=G.movieClipEvents,this.movies=G.movies,this.movieLinkages=G.movieLinkages,this.strings=G.strings,this.stringMap=G.stringMap,this.eventMap=G.eventMap,this.instanceNameMap=G.instanceNameMap,this.movieLinkageMap=G.movieLinkageMap,this.movieLinkageNameMap=G.movieLinkageNameMap,this.programObjectMap=G.programObjectMap,this.labelMap=G.labelMap,this.bitmapMap=G.bitmapMap,this.useScript=G.useScript,this.useTextureAtlas=G.useTextureAtlas):(this.stringMap={},this.eventMap={},this.instanceNameMap={},this.movieLinkageMap={},this.movieLinkageNameMap={},this.programObjectMap={},this.labelMap=[],this.bitmapMap={},null!=this.header?(this.useScript=0!==(this.header.option&L.Constant.OPTION_USE_SCRIPT),this.useTextureAtlas=0!==(this.header.option&L.Constant.OPTION_USE_TEXTUREATLAS)):this.useTextureAtlas=this.useScript=!1)}return t.prototype.check=function(){var t,e,i;return t=this.header.formatVersion0,e=this.header.formatVersion1,i=this.header.formatVersion2,null!=this.header&&"L"===this.header.id0&&"W"===this.header.id1&&"F"===this.header.id2&&(t===L.Constant.FORMAT_VERSION_0&&e===L.Constant.FORMAT_VERSION_1&&i===L.Constant.FORMAT_VERSION_2||t===L.Constant.FORMAT_VERSION_COMPAT0_0&&e===L.Constant.FORMAT_VERSION_COMPAT0_1&&i===L.Constant.FORMAT_VERSION_COMPAT0_2||t===L.Constant.FORMAT_VERSION_COMPAT1_0&&e===L.Constant.FORMAT_VERSION_COMPAT1_1&&i===L.Constant.FORMAT_VERSION_COMPAT1_2)?!0:!1},t.prototype.name=function(){return this.strings[this.header.nameStringId]},t.prototype.replaceTexture=function(t,e){return 0>t||t>=textures.length?!1:(textures[t]=e,!0)},t.prototype.replaceTextureFragment=function(t,e){return 0>t||t>=textureFragments.length?!1:(textureFragments[t]=e,!0)},t}(),B=function(){function t(){}return t.prototype.readByte=function(){return 255&this.d.charCodeAt(this.index++)},t.prototype.readChar=function(){return String.fromCharCode(this.readByte())},t.prototype.readBytes=function(t){var e;return e=this.d.substr(this.index,t),this.index+=t,e},t.prototype.readInt32=function(){return(this.readByte()<<0)+(this.readByte()<<8)+(this.readByte()<<16)+(this.readByte()<<24)},t.prototype.readSingle=function(){var t,e,i,r,s;return r=this.readByte(),i=this.readByte(),e=this.readByte(),t=this.readByte(),s=(255&t<<1|e>>7)-127,e=(127&e)<<16|i<<8|r,0===e&&-127===s?0:(1-2*(t>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,s)},t.prototype.loadTranslate=function(){return new z(this.readSingle(),this.readSingle())},t.prototype.loadMatrix=function(){return new P(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},t.prototype.loadColor=function(){return new _(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},t.prototype.loadAlphaTransform=function(){return new e(this.readSingle())},t.prototype.loadColorTransform=function(){var t,e;return e=this.loadColor(),t=this.loadColor(),new g(e.red,e.green,e.blue,e.alpha,t.red,t.green,t.blue,t.alpha)},t.prototype.loadTexture=function(){return new L.Texture(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle())},t.prototype.loadTextureFragment=function(){return new L.TextureFragment(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadTextureFragmentCompat=function(){var t,e,i,r,s,n,o,a,h;return i=this.readInt32(),r=this.readInt32(),e=this.readInt32(),a=this.readInt32(),h=this.readInt32(),s=this.readInt32(),n=this.readInt32(),o=this.readInt32(),t=this.readInt32(),new L.TextureFragment(i,r,e,a,h,s,n,o,t,o,t)},t.prototype.loadBitmap=function(){return new L.Bitmap(this.readInt32(),this.readInt32())},t.prototype.loadBitmapEx=function(){return new L.BitmapEx(this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},t.prototype.loadFont=function(){return new L.Font(this.readInt32(),this.readSingle())},t.prototype.loadTextProperty=function(){return new L.TextProperty(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadText=function(){return new L.Text(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadParticleData=function(){return new L.ParticleData(this.readInt32())},t.prototype.loadParticle=function(){return new L.Particle(this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadProgramObject=function(){return new L.ProgramObject(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadGraphicObject=function(){return new L.GraphicObject(this.readInt32(),this.readInt32())},t.prototype.loadGraphic=function(){return new L.Graphic(this.readInt32(),this.readInt32())},t.prototype.loadObject=function(){return new L.LObject(this.readInt32(),this.readInt32())},t.prototype.loadAnimation=function(){return new L.Animation(this.readInt32(),this.readInt32())},t.prototype.loadButtonCondition=function(){return new L.ButtonCondition(this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadButton=function(){return new L.Button(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadLabel=function(){return new L.Label(this.readInt32(),this.readInt32())},t.prototype.loadInstanceName=function(){return new L.InstanceName(this.readInt32())},t.prototype.loadEvent=function(){return new L.Event(this.readInt32())},t.prototype.loadString=function(){return new L.String(this.readInt32(),this.readInt32())},t.prototype.loadPlace=function(){var t,e,i,r;return t=this.readInt32(),e=this.readInt32(),i=this.readInt32(),r=this.readInt32(),new L.Place(16777215&t,e,i,r,t>>24)},t.prototype.loadControlMoveM=function(){return new L.ControlMoveM(this.readInt32(),this.readInt32())},t.prototype.loadControlMoveC=function(){return new L.ControlMoveC(this.readInt32(),this.readInt32())},t.prototype.loadControlMoveMC=function(){return new L.ControlMoveMC(this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadControlMoveMCB=function(){return new L.ControlMoveMCB(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadControl=function(){return new L.Control(this.readInt32(),this.readInt32())},t.prototype.loadFrame=function(){return new L.Frame(this.readInt32(),this.readInt32())},t.prototype.loadMovieClipEvent=function(){return new L.MovieClipEvent(this.readInt32(),this.readInt32())},t.prototype.loadMovie=function(){return new L.Movie(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},t.prototype.loadMovieLinkage=function(){return new L.MovieLinkage(this.readInt32(),this.readInt32())},t.prototype.loadItemArray=function(){return new L.ItemArray(this.readInt32(),this.readInt32())},t.prototype.loadHeader=function(){var t,e,i,r,s,n,o,a,h,l,c,u,p,d,f,m,y,_,g,v,M,I,b,x,E,F,w,C,B,S,A,T,P,k,O,R,N,D,H,W,j,z,U,G,X,V,Y,K,Q,q,Z,$,J;return w=this.readChar(),C=this.readChar(),B=this.readChar(),S=this.readChar(),g=this.readByte(),v=this.readByte(),M=this.readByte(),_=g<<16|v<<8|M,W=this.readByte(),J=this.readInt32(),F=this.readInt32(),b=this.readInt32(),X=this.readInt32(),D=this.readInt32(),r=this.readInt32(),V=this.loadItemArray(),i=this.loadItemArray(),$=this.loadItemArray(),k=this.loadItemArray(),h=this.loadItemArray(),t=this.loadItemArray(),l=this.loadItemArray(),H=this.loadItemArray(),q=this.loadItemArray(),Z=this.loadItemArray(),s=this.loadItemArray(),n=this.loadItemArray(),y=this.loadItemArray(),Q=this.loadItemArray(),K=this.loadItemArray(),z=this.loadItemArray(),j=this.loadItemArray(),G=this.loadItemArray(),E=this.loadItemArray(),x=this.loadItemArray(),e=this.loadItemArray(),a=this.loadItemArray(),o=this.loadItemArray(),T=this.loadItemArray(),A=this.loadItemArray(),m=this.loadItemArray(),U=this.loadItemArray(),p=this.loadItemArray(),u=this.loadItemArray(),d=this.loadItemArray(),f=_>=L.Constant.FORMAT_VERSION_141211?this.loadItemArray():new L.ItemArray(0,0),c=this.loadItemArray(),I=this.loadItemArray(),R=this.loadItemArray(),O=this.loadItemArray(),N=this.loadItemArray(),Y=this.loadItemArray(),P=this.readInt32(),new L.Header(w,C,B,S,g,v,M,_,W,J,F,b,X,D,r,V,i,$,k,h,t,l,H,q,Z,s,n,y,Q,K,z,j,G,E,x,e,a,o,T,A,m,U,p,u,d,f,c,I,R,O,N,Y,P)},t.prototype.load=function(t){var e,i,r,s,n,o,a,h,l,c,u,p,d;if(this.d=t,this.index=0,c=this.loadHeader(),t=new b(c),!t.check())return null;for(l=this.readBytes(c.stringBytes.length),i=this.readBytes(c.animationBytes.length),t.translates=function(){var t,e,i;for(i=[],u=t=0,e=c.translate.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadTranslate());return i}.call(this),t.matrices=function(){var t,e,i;for(i=[],u=t=0,e=c.matrix.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadMatrix());return i}.call(this),t.colors=function(){var t,e,i;for(i=[],u=t=0,e=c.color.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadColor());return i}.call(this),t.alphaTransforms=function(){var t,e,i;for(i=[],u=t=0,e=c.alphaTransform.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadAlphaTransform());return i}.call(this),t.colorTransforms=function(){var t,e,i;for(i=[],u=t=0,e=c.colorTransform.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadColorTransform());return i}.call(this),t.objects=function(){var t,e,i;for(i=[],u=t=0,e=c.objectData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadObject());return i}.call(this),t.textures=function(){var t,e,i;for(i=[],u=t=0,e=c.texture.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadTexture());return i}.call(this),t.textureFragments=c.formatVersion>=L.Constant.FORMAT_VERSION_141211?function(){var t,e,i;for(i=[],u=t=0,e=c.textureFragment.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadTextureFragment());return i}.call(this):function(){var t,e,i;for(i=[],u=t=0,e=c.textureFragment.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadTextureFragmentCompat());return i}.call(this),t.bitmaps=function(){var t,e,i;for(i=[],u=t=0,e=c.bitmap.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadBitmap());return i}.call(this),t.bitmapExs=function(){var t,e,i;for(i=[],u=t=0,e=c.bitmapEx.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadBitmapEx());return i}.call(this),t.fonts=function(){var t,e,i;for(i=[],u=t=0,e=c.font.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadFont());return i}.call(this),t.textProperties=function(){var t,e,i;for(i=[],u=t=0,e=c.textProperty.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadTextProperty());return i}.call(this),t.texts=function(){var t,e,i;for(i=[],u=t=0,e=c.text.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadText());return i}.call(this),t.particleDatas=function(){var t,e,i;for(i=[],u=t=0,e=c.particleData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadParticleData());return i}.call(this),t.particles=function(){var t,e,i;for(i=[],u=t=0,e=c.particle.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadParticle());return i}.call(this),t.programObjects=function(){var t,e,i;for(i=[],u=t=0,e=c.programObject.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadProgramObject());return i}.call(this),t.graphicObjects=function(){var t,e,i;for(i=[],u=t=0,e=c.graphicObject.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadGraphicObject());return i}.call(this),t.graphics=function(){var t,e,i;for(i=[],u=t=0,e=c.graphic.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadGraphic());return i}.call(this),r=function(){var t,e,i;for(i=[],u=t=0,e=c.animation.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadAnimation());return i}.call(this),t.buttonConditions=function(){var t,e,i;for(i=[],u=t=0,e=c.buttonCondition.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadButtonCondition());return i}.call(this),t.buttons=function(){var t,e,i;for(i=[],u=t=0,e=c.button.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadButton());return i}.call(this),t.labels=function(){var t,e,i;for(i=[],u=t=0,e=c.label.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadLabel());return i}.call(this),t.instanceNames=function(){var t,e,i;for(i=[],u=t=0,e=c.instanceName.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadInstanceName());return i}.call(this),t.events=function(){var t,e,i;for(i=[],u=t=0,e=c.eventData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadEvent());return i}.call(this),t.places=function(){var t,e,i;for(i=[],u=t=0,e=c.place.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadPlace());return i}.call(this),t.controlMoveMs=function(){var t,e,i;for(i=[],u=t=0,e=c.controlMoveM.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadControlMoveM());return i}.call(this),t.controlMoveCs=function(){var t,e,i;for(i=[],u=t=0,e=c.controlMoveC.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadControlMoveC());return i}.call(this),t.controlMoveMCs=function(){var t,e,i;for(i=[],u=t=0,e=c.controlMoveMC.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadControlMoveMC());return i}.call(this),t.controlMoveMCBs=function(){var t,e,i;for(i=[],u=t=0,e=c.controlMoveMCB.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadControlMoveMCB());return i}.call(this),t.controls=function(){var t,e,i;for(i=[],u=t=0,e=c.control.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadControl());return i}.call(this),t.frames=function(){var t,e,i;for(i=[],u=t=0,e=c.frame.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadFrame());return i}.call(this),t.movieClipEvents=function(){var t,e,i;for(i=[],u=t=0,e=c.movieClipEvent.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadMovieClipEvent());return i}.call(this),t.movies=function(){var t,e,i;for(i=[],u=t=0,e=c.movie.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadMovie());return i}.call(this),t.movieLinkages=function(){var t,e,i;for(i=[],u=t=0,e=c.movieLinkage.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadMovieLinkage());return i}.call(this),p=function(){var t,e,i;for(i=[],u=t=0,e=c.stringData.length;e>=0?e>t:t>e;u=e>=0?++t:--t)i.push(this.loadString());return i}.call(this),t.animations=[],d=0,n=r.length;n>d;d++)e=r[d],s=e.animationOffset,t.animations.push(this.readAnimation(i.slice(s,s+e.animationLength)));for(t.strings=[],i=t.stringMap,r=0,d=p.length;d>r;r++){for(e=p[r],s=e.stringOffset,s=l.slice(s,s+e.stringLength),e="",u=0;u<s.length;)n=255&s.charCodeAt(u),128>n?(e+=String.fromCharCode(n),++u):6===n>>5?(o=s.charCodeAt(u+1),e+=String.fromCharCode((31&n)<<6|63&o),u+=2):14===n>>4?(o=s.charCodeAt(u+1),a=s.charCodeAt(u+2),n=(15&n)<<12|(63&o)<<6|63&a,e+=String.fromCharCode(n),u+=3):(o=s.charCodeAt(u+1),a=s.charCodeAt(u+2),h=s.charCodeAt(u+3),n=(7&n)<<18|(63&o)<<12|(63&a)<<6|h<<63,e+=String.fromCharCode(n),u+=4);
i[e]=t.strings.length,t.strings.push(e)}for(l=t.instanceNameMap,u=p=0,s=t.instanceNames.length;s>=0?s>p:p>s;u=s>=0?++p:--p)l[t.instanceNames[u].stringId]=u;for(l=t.eventMap,u=p=0,s=t.events.length;s>=0?s>p:p>s;u=s>=0?++p:--p)l[t.events[u].stringId]=u;for(l=t.movieLinkageMap,u=p=0,s=t.movieLinkages.length;s>=0?s>p:p>s;u=s>=0?++p:--p)l[t.movieLinkages[u].stringId]=u;for(l=t.movieLinkageNameMap,u=p=0,s=t.movieLinkages.length;s>=0?s>p:p>s;u=s>=0?++p:--p)l[t.movieLinkages[u].movieId]=t.movieLinkages[u].stringId;for(l=t.programObjectMap,u=p=0,s=t.programObjects.length;s>=0?s>p:p>s;u=s>=0?++p:--p)l[t.programObjects[u].stringId]=u;for(l=t.labelMap,e=t.movies,d=0,r=e.length;r>d;d++){for(p=e[d],s=p.labelOffset,i={},o=t.labels.slice(s,s+p.labels),n=0,s=o.length;s>n;n++)p=o[n],i[p.stringId]=p.frameNo;l.push(i)}for(i=t.textures,s=0,p=i.length;p>s;s++)l=i[s],l.setFilename(t);for(s=t.bitmapMap,u=r=0,i=t.textureFragments.length;i>=0?i>r:r>i;u=i>=0?++r:--r)l=t.textureFragments[u],l.setFilename(t),l=l.filename,p=l.match(/(.+)_atlas_.+_info_.+(_.+){6}/),null!=p&&(l=p[1]),s[l]=t.bitmaps.length,t.bitmaps.push(new L.Bitmap(0,u));return t},t.prototype.readByteFromBytes=function(t,e){var i;return i=255&t.charCodeAt(e++),[e,i]},t.prototype.readInt32FromBytes=function(t,e){var i,r,s,n;return i=this.readByteFromBytes(t,e),e=i[0],i=i[1],r=this.readByteFromBytes(t,e),e=r[0],r=r[1],s=this.readByteFromBytes(t,e),e=s[0],s=s[1],n=this.readByteFromBytes(t,e),e=n[0],[e,(i<<0)+(r<<8)+(s<<16)+(n[1]<<24)]},t.prototype.readAnimation=function(t){var e,r,s,n,o;for(e=[],s=0;;)switch(r=this.readByteFromBytes(t,s),s=r[0],r=r[1],e.push(r),r){case i.GOTOFRAME:case i.GOTOLABEL:case i.EVENT:case i.CALL:r=this.readInt32FromBytes(t,s),s=r[0],r=r[1],e.push(r);break;case i.SETTARGET:for(r=this.readInt32FromBytes(t,s),s=r[0],r=r[1],e.push(r),o=0;r>=0?r>o:o>r;r>=0?++o:--o)n=this.readInt32FromBytes(t,s),s=n[0],n=n[1],e.push(n);break;case i.END:return e}},t}(),S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Z(e,t),e.prototype.readByte=function(){return this.d[this.index++]},e.prototype.readBytes=function(t){var e,i;for(e="",i=0;t>=0?t>i:i>t;t>=0?++i:--i)e+=String.fromCharCode(this.d[this.index++]);return e},e}(B),A=function(t){function e(){this.int32Array=new Int32Array,this.float32Array=new Float32Array}return Z(e,t),e.prototype.readByte=function(){return this.d[this.index++]},e.prototype.readBytes=function(t){var e,i;for(e="",i=0;t>=0?t>i:i>t;t>=0?++i:--i)e+=String.fromCharCode(this.d[this.index++]);return e},e.prototype.readInt32=function(){var t;return t=this.dInt32[this.index/4],this.index+=4,t},e.prototype.readSingle=function(){var t;return t=this.dFloat32[this.index/4],this.index+=4,t},e.prototype.load=function(t){return this.d=new Uint8Array(t),this.dInt32=new Int32Array(t),this.dFloat32=new Float32Array(t),e.__super__.load.call(this,this.d)},e}(B),T=function(){function t(){}return t.load=function(t){var e;return null!=t&&"string"==typeof t?(e=new B,e.load(t)):void 0},t.loadArray=function(t){var e;return null!=t?(e=new S,e.load(t)):void 0},t.loadArrayBuffer=function(t){var e;return null!=t?(e=new A,e.load(t)):void 0},t}(),X=function(){function t(){}return t.calcMatrixToPoint=function(t,e,i){return i=i._,[i[0]*t+i[2]*e+i[4],i[1]*t+i[3]*e+i[5]]},t.getMatrixDeterminant=function(t){return t=t._,0>t[0]*t[3]-t[2]*t[1]},t.syncMatrix=function(t){var e,i,r,s,n;i=null!=(n=t.matrixId)?n:0,0===(i&M.MATRIX_FLAG)?(e=t.lwf.data.translates[i],n=i=1,r=0,e=e._,e=new P(i,n,0,0,e[0],e[1])):(i&=~M.MATRIX_FLAG,e=t.lwf.data.matrices[i],r=this.getMatrixDeterminant(e),s=e._,i=Math.sqrt(s[0]*s[0]+s[1]*s[1]),r&&(i=-i),n=Math.sqrt(s[3]*s[3]+s[2]*s[2]),r=r?Math.atan2(s[1],-s[0]):Math.atan2(s[1],s[0]),r=180*(r/Math.PI)),t.property.setMatrix(e,i,n,r)},t.getX=function(t){var e,i;return e=null!=(i=t.matrixId)?i:0,0===(e&M.MATRIX_FLAG)?(t=t.lwf.data.translates[e],t._[0]):(e&=~M.MATRIX_FLAG,t.lwf.data.matrices[e]._[4])},t.getY=function(t){var e,i;return e=null!=(i=t.matrixId)?i:0,0===(e&M.MATRIX_FLAG)?(t=t.lwf.data.translates[e],t._[1]):(e&=~M.MATRIX_FLAG,t.lwf.data.matrices[e]._[5])},t.getScaleX=function(t){var e,i;return e=null!=(i=t.matrixId)?i:0,0===(e&M.MATRIX_FLAG)?1:(e&=~M.MATRIX_FLAG,e=t.lwf.data.matrices[e],t=this.getMatrixDeterminant(e),e=e._,e=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t&&(e=-e),e)},t.getScaleY=function(t){var e,i;return e=null!=(i=t.matrixId)?i:0,0===(e&M.MATRIX_FLAG)?1:(e&=~M.MATRIX_FLAG,t=t.lwf.data.matrices[e]._,Math.sqrt(t[3]*t[3]+t[2]*t[2]))},t.getRotation=function(t){var e,i;return e=null!=(i=t.matrixId)?i:0,0===(e&M.MATRIX_FLAG)?0:(e&=~M.MATRIX_FLAG,e=t.lwf.data.matrices[e],t=this.getMatrixDeterminant(e),e=e._,t=t?Math.atan2(e[1],-e[0]):Math.atan2(e[1],e[0]),t=180*(t/Math.PI))},t.syncColorTransform=function(t){var e,i;e=null!=(i=t.colorTransformId)?i:0,0===(e&M.COLORTRANSFORM_FLAG)?(e=t.lwf.data.alphaTransforms[e],e=new g(1,1,1,e._[0],0,0,0,0)):(e&=~M.COLORTRANSFORM_FLAG,e=t.lwf.data.colorTransforms[e]),t.property.setColorTransform(e)},t.getAlpha=function(t){var e,i;return e=null!=(i=t.colorTransformId)?i:0,0===(e&M.COLORTRANSFORM_FLAG)?(t=t.lwf.data.alphaTransforms[e],t._[0]):(e&=~M.COLORTRANSFORM_FLAG,t.lwf.data.colorTransforms[e]._[3])},t.calcMatrixId=function(t,e,i,r){return 0===r?e.set(i):0===(r&M.MATRIX_FLAG)?(r=t.data.translates[r],t=e._,i=i._,r=r._,t[0]=i[0],t[2]=i[2],t[4]=i[0]*r[0]+i[2]*r[1]+i[4],t[1]=i[1],t[3]=i[3],t[5]=i[1]*r[0]+i[3]*r[1]+i[5]):(r&=~M.MATRIX_FLAG,t=t.data.matrices[r],this.calcMatrix(e,i,t)),e},t.calcMatrix=function(t,e,i){var r;return r=t._,e=e._,i=i._,r[0]=e[0]*i[0]+e[2]*i[1],r[2]=e[0]*i[2]+e[2]*i[3],r[4]=e[0]*i[4]+e[2]*i[5]+e[4],r[1]=e[1]*i[0]+e[3]*i[1],r[3]=e[1]*i[2]+e[3]*i[3],r[5]=e[1]*i[4]+e[3]*i[5]+e[5],t},t.rotateMatrix=function(t,e,i,r,s){var n;return r*=i,s*=i,n=t._,e=e._,n[0]=-e[2]*i,n[2]=e[0]*i,n[4]=e[0]*r+e[2]*s+e[4],n[1]=-e[3]*i,n[3]=e[1]*i,n[5]=e[1]*r+e[3]*s+e[5],t},t.scaleMatrix=function(t,e,i,r,s){var n;return r*=i,s*=i,n=t._,e=e._,n[0]=e[0]*i,n[2]=e[2]*i,n[4]=e[0]*r+e[2]*s+e[4],n[1]=e[1]*i,n[3]=e[3]*i,n[5]=e[1]*r+e[3]*s+e[5],t},t.fitForHeight=function(t,e,i){i/=t.height,t.setTextScale(i),t.property.scale(i,i),t.property.move((e-t.width*i)/2,0)},t.fitForWidth=function(t,e,i){e/=t.width,t.setTextScale(e),t.property.scale(e,e),t.property.move(0,(i-t.height*e)/2)},t.scaleForHeight=function(t,e,i){e=i/t.height,t.setTextScale(e),t.property.scale(e,e)},t.scaleForWidth=function(t,e){e/=t.width,t.setTextScale(e),t.property.scale(e,e)},t.copyMatrix=function(t,e){return null!==e?t.set(e):t.clear(),t},t.invertMatrix=function(t,e){var i,r,s;i=t._,s=e._,r=s[0]*s[3]-s[2]*s[1],0!==r?(i[0]=s[3]/r,i[2]=-s[2]/r,i[4]=(s[2]*s[5]-s[4]*s[3])/r,i[1]=-s[1]/r,i[3]=s[0]/r,i[5]=(s[4]*s[1]-s[0]*s[5])/r):t.clear()},t.calcColorTransformId=function(t,e,i,r){var s;if(0===r)t.useVertexColor?e.set(i):e.multi._[3]=i.multi._[3];else if(0===(r&M.COLORTRANSFORM_FLAG))if(r=t.data.alphaTransforms[r],t.useVertexColor){for(t=s=0;3>s;t=++s)e.multi._[t]=i.multi._[t];e.multi._[3]=i.multi._[3]*r._[0],e.add.set(i.add)}else e.multi._[3]=i.multi._[3]*r._[0];else r&=~M.COLORTRANSFORM_FLAG,r=t.data.colorTransforms[r],this.calcColorTransform(t,e,i,r);return e},t.calcColorTransform=function(t,e,i,r){var s,n,o,a;if(t.useVertexColor){for(s=e.multi._,n=i.multi._,o=r.multi._,t=a=0;4>a;t=++a)s[t]=n[t]*o[t];for(s=e.add._,i=i.add._,r=r.add._,t=n=0;4>n;t=++n)s[t]=i[t]*o[t]+r[t]}else e.multi._[3]=i.multi._[3]*r.multi._[3];return e},t.copyColorTransform=function(t,e,i){return t.useVertexColor?null!==i?e.set(i):e.clear():e.multi.alpha=null!==i?i.multi.alpha:1,e},t.calcColor=function(t,e,i,r){var s,n;if(t.useVertexColor)for(t=e._,i=i._,s=r.multi._,r=r.add._,e=n=0;4>n;e=++n)t[e]=i[e]*s[e]+r[e];else{for(t=e._,i=i._,e=s=0;3>s;e=++s)t[e]=i[e];t[3]=i[3]*r.multi._[3]}},t.newIntArray=function(){return[]},t.clearIntArray=function(t){t.length=0},t.insertIntArray=function(t,e){var i;0===t.length||e>t[t.length-1]?t.push(e):(i=this.locationOfIntArray(t,e,0,t.length-1),t[i]!==e&&t.splice(i,0,e))},t.deleteIntArray=function(t,e){var i;i=this.locationOfIntArray(t,e,0,t.length-1),t[i]===e&&t.splice(i,1)},t.locationOfIntArray=function(t,e,i,r){for(var s;r>=i;)if(s=(i+r)/2>>0,e>t[s])i=s+1;else{if(!(e<t[s]))return s;r=s-1}return i},t}(),R=function(){function t(){}return t.prototype.constructBitmap=function(){return null},t.prototype.constructBitmapEx=function(){return null},t.prototype.constructText=function(){return null},t.prototype.constructParticle=function(){return null},t.prototype.init=function(){},t.prototype.beginRender=function(){},t.prototype.endRender=function(){},t.prototype.destruct=function(){},t}(),x=function(){function t(t,e,i,r){this.lwf=t,this.parent=e,this.type=i,this.objectId=r,this.colorTransformId=this.matrixId=null,this.colorTransformIdChanged=this.matrixIdChanged=!0,this.matrix=new P(0,0,0,0,0,0),this.colorTransform=new g(0,0,0,0,0,0,0,0),this.execCount=0,this.updated=!1,this.isButton=this.type===U.BUTTON,this.isMovie=this.type===U.MOVIE||this.type===U.ATTACHEDMOVIE,this.isParticle=this.type===U.PARTICLE,this.isProgramObject=this.type===U.PROGRAMOBJECT,this.isText=this.type===U.TEXT,this.isBitmapClip=!1}return t.prototype.exec=function(t,e){null==t&&(t=0),null==e&&(e=0),this.matrixId!==t&&(this.matrixIdChanged=!0,this.matrixId=t),this.colorTransformId!==e&&(this.colorTransformIdChanged=!0,this.colorTransformId=e)},t.prototype.update=function(t,e){this.updated=!0,null!==t&&(X.calcMatrixId(this.lwf,this.matrix,t,this.dataMatrixId),this.matrixIdChanged=!1),null!==e&&(X.copyColorTransform(this.lwf,this.colorTransform,e),this.colorTransformIdChanged=!1),this.lwf.renderObject()},t.prototype.render=function(t,e){var i,r,s;null!=this.renderer&&(r=this.lwf.renderingIndex,s=this.lwf.renderingIndexOffsetted,i=this.lwf.renderingCount,e!==Number.MIN_VALUE&&(r=s-e+i),this.renderer.render(this.matrix,this.colorTransform,r,i,t)),this.lwf.renderObject()},t.prototype.inspect=function(t,e,i,r){var s,n,o;n=this.lwf.renderingIndex,o=this.lwf.renderingIndexOffsetted,s=this.lwf.renderingCount,r!==Number.MIN_VALUE&&(n=o+r+s),t(this,e,i,n),this.lwf.renderObject()},t.prototype.destroy=function(){this.renderer&&(this.renderer.destruct(),this.renderer=null),this.lwf=this.parent=null},t}(),F=function(t){function e(t,i,s){var o,a,h,l,c,u,p;for(e.__super__.constructor.call(this,t,i,U.GRAPHIC,s),s=t.data.graphics[s],c=s.graphicObjects,this.displayList=[],h=t.data.graphicObjects,l=p=0;c>=0?c>p:p>c;l=c>=0?++p:--p)if(o=h[s.graphicObjectId+l],a=o.graphicObjectId,-1!==a){switch(o.graphicObjectType){case E.BITMAP:u=new r(t,i,a);break;case E.BITMAPEX:u=new n(t,i,a);break;case E.TEXT:u=new j(t,i,a)}u.exec(),this.displayList[l]=u}}return Z(e,t),e.prototype.update=function(t,e){var i,r,s,n,o,a,h,l;for(r=this.matrix.setWithComparing(t),i=this.colorTransform.setWithComparing(e),l=this.displayList,a=0,h=l.length;h>a;a++)s=l[a],o=r||!s.updated||s.matrixIdChanged?t:null,n=i||!s.updated||s.colorTransformIdChanged?e:null,s.update(o,n)},e.prototype.render=function(t,e){var i,r,s,n;for(n=this.displayList,r=0,s=n.length;s>r;r++)i=n[r],i.render(t,e)},e.prototype.inspect=function(t,i,r,s){var n,o,a,h;for(e.__super__.inspect.call(this,t,i,r,s),++i,h=this.displayList,o=0,a=h.length;a>o;o++)n=h[o],n.inspect(t,i,r,s)},e.prototype.destroy=function(){var t,e,i,r;for(r=this.displayList,e=0,i=r.length;i>e;e++)t=r[e],t.destroy();this.displayList=null},e}(x),r=function(t){function e(t,i,r){e.__super__.constructor.call(this,t,i,U.BITMAP,r),this.dataMatrixId=t.data.bitmaps[r].matrixId,this.renderer=t.rendererFactory.constructBitmap(t,r,this)}return Z(e,t),e}(x),n=function(t){function e(t,i,r){e.__super__.constructor.call(this,t,i,U.BITMAPEX,r),this.dataMatrixId=t.data.bitmapExs[r].matrixId,this.renderer=t.rendererFactory.constructBitmapEx(t,r,this)}return Z(e,t),e}(x),j=function(t){function e(t,i,r,s){null==s&&(s=-1),e.__super__.constructor.call(this,t,i,U.TEXT,r),i=t.data.texts[r],this.dataMatrixId=i.matrixId,-1!==i.nameStringId?this.name=t.data.strings[i.nameStringId]:s>=0&&s<t.data.instanceNames.length&&(s=t.getInstanceNameStringId(s),-1!==s&&(this.name=t.data.strings[s])),this.renderer=t.rendererFactory.constructText(t,r,this)}return Z(e,t),e}(x),N=function(t){function e(t,i,r){e.__super__.constructor.call(this,t,i,U.PARTICLE,r),this.dataMatrixId=t.data.particles[r].matrixId,this.renderer=t.rendererFactory.constructParticle(t,r,this)}return Z(e,t),e.prototype.update=function(t,i){e.__super__.update.call(this,t,i),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},e}(x),H=function(t){function e(t,i,r){e.__super__.constructor.call(this,t,i,U.PROGRAMOBJECT,r),i=t.data.programObjects[r],this.dataMatrixId=i.matrixId,t=t.getProgramObjectConstructor(r),null!=t&&(this.renderer=t(this,r,i.width,i.height))}return Z(e,t),e.prototype.update=function(t,i){e.__super__.update.call(this,t,i),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},e}(x),f=function(t){function e(t,i,r,s,n){e.__super__.constructor.call(this,t,i,r,s),this.linkInstance=this.nextInstance=this.prevInstance=null,this.instanceId=n>=t.data.instanceNames.length?-1:n,0<=this.instanceId&&(r=t.getInstanceNameStringId(this.instanceId),-1!==r&&(this.name=t.data.strings[r],null!=i&&(i[this.name]=this)),t=this.lwf.getInstance(this.instanceId),null!=t&&(t.prevInstance=this),this.nextInstance=t,this.lwf.setInstance(this.instanceId,this))}return Z(e,t),e.prototype.destroy=function(){var t;this.type!==U.ATTACHEDMOVIE&&0<=this.instanceId&&(t=this.lwf.getInstance(this.instanceId),t===this&&this.lwf.setInstance(this.instanceId,this.nextInstance),null!=this.nextInstance&&(this.nextInstance.prevInstance=this.prevInstance),null!=this.prevInstance&&(this.prevInstance.nextInstance=this.nextInstance)),null!=this.name&&null!=this.parent&&delete this.parent[this.name],this.linkInstance=this.nextInstance=this.prevInstance=null,e.__super__.destroy.call(this)},e.prototype.linkButton=function(){},e.prototype.getFullName=function(){var t,e,i,r;for(r=t="",i=this;null!=i;){if(null==i.name)return null;e=null!=i.parent&&i.objectId===i.lwf.data.header.rootMovieId?i.lwf.attachName:i.name,t=e+r+t,r=".",i=i.parent}return t},e}(x),o=function(t){function e(t,i,r,s,n,o){null==n&&(n=null),null==o&&(o=null),e.__super__.constructor.call(this,t,i,U.BUTTON,r,s),this.matrixId=n,this.colorTransformId=o,this.invert=new P,this.hitY=this.hitX=Number.MIN_VALUE,r>=0?(this.data=t.data.buttons[r],this.dataMatrixId=this.data.matrixId,this.width=this.data.width,this.height=this.data.height):this.height=this.width=0,this.handler=t.getButtonEventHandlers(this),null!=this.handler&&this.handler.call("load",this)}return Z(e,t),e.prototype.setHandlers=function(t){null!=this.handler?this.handler.concat(t):this.handler=t},e.prototype.exec=function(t,i){null==t&&(t=0),null==i&&(i=0),e.__super__.exec.call(this,t,i),this.enterFrame()},e.prototype.update=function(t,i){e.__super__.update.call(this,t,i),null!=this.handler&&this.handler.call("update",this)},e.prototype.render=function(){null!=this.handler&&this.handler.call("render",this)},e.prototype.destroy=function(){this.lwf.clearFocus(this),this.lwf.clearPressed(this),null!=this.handler&&this.handler.call("unload",this),e.__super__.destroy.call(this)},e.prototype.linkButton=function(){this.lwf.focus===this&&(this.lwf.focusOnLink=!0),this.buttonLink=this.lwf.buttonHead,this.lwf.buttonHead=this},e.prototype.checkHit=function(t,e){var i,r;return X.invertMatrix(this.invert,this.matrix),r=X.calcMatrixToPoint(t,e,this.invert),i=r[0],r=r[1],i>=0&&i<this.data.width&&r>=0&&r<this.data.height?(this.hitX=i,this.hitY=r,!0):(this.hitY=this.hitX=Number.MIN_VALUE,!1)},e.prototype.enterFrame=function(){null!=this.handler&&this.handler.call("enterFrame",this)},e.prototype.rollOver=function(){null!=this.handler&&this.handler.call("rollOver",this),this.playAnimation(v.ROLLOVER)},e.prototype.rollOut=function(){null!=this.handler&&this.handler.call("rollOut",this),this.playAnimation(v.ROLLOUT)},e.prototype.press=function(){null!=this.handler&&this.handler.call("press",this),this.playAnimation(v.PRESS)},e.prototype.release=function(){null!=this.handler&&this.handler.call("release",this),this.playAnimation(v.RELEASE)},e.prototype.keyPress=function(t){null!=this.handler&&this.handler.call("keyPress",this),this.playAnimation(v.KEYPRESS,t)},e.prototype.playAnimation=function(t,e){var i,r,s,n;for(null==e&&(e=0),r=this.lwf.data.buttonConditions,i=s=0,n=this.data.conditions;n>=0?n>s:s>n;i=n>=0?++s:--s)i=r[this.data.conditionId+i],0===(i.condition&t)||t===v.KEYPRESS&&i.keyCode!==e||this.lwf.playAnimation(i.animationId,this.parent,this)},e.prototype.addEventHandler=function(t,e){switch(t){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":this.lwf.setInteractive(),this.lwf.enableExec(),null==this.handler&&this.setHandlers(new a),this.handler.addHandler(t,e)}},e.prototype.removeEventHandler=function(t,e){switch(t){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.removeHandler(t,e)}},e.prototype.clearEventHandler=function(t){switch(null==t&&(t=null),t){case null:null!=this.handler&&this.handler.clear();break;case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.clear(t)}},e.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},e}(f),C=function(t){function e(t,e){this.parent=t,this.child=e,this.lwf=this.parent.lwf}return Z(e,t),e.prototype.checkHit=function(t,e){return null!==this.child.inputPoint(t,e)?!0:!1},e.prototype.rollOver=function(){},e.prototype.rollOut=function(){null!=this.child.focus&&(this.child.focus.rollOut(),this.child.clearFocus(this.child.focus))},e.prototype.press=function(){this.child.inputPress()},e.prototype.release=function(){this.child.inputRelease()},e.prototype.keyPress=function(t){this.child.inputKeyPress(t)},e}(o),W=function(){function t(t){this.lwf=t,this.matrix=new P,this.colorTransform=new g,this.scaleY=this.scaleX=1,this.rotation=0,this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()}return t.prototype.clear=function(){this.scaleY=this.scaleX=1,this.rotation=0,this.matrix.clear(),this.colorTransform.clear(),(this.hasMatrix||this.hasColorTransform)&&this.lwf.setPropertyDirty(),this.hasColorTransform=this.hasMatrix=!1,this.clearRenderingOffset()},t.prototype.move=function(t,e){this.matrix._[4]+=t,this.matrix._[5]+=e,this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.moveTo=function(t,e){this.matrix._[4]=t,this.matrix._[5]=e,this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.rotate=function(t){this.rotateTo(this.rotation+t)},t.prototype.rotateTo=function(t){this.rotation=t,this.setScaleAndRotation()},t.prototype.scale=function(t,e){this.scaleX*=t,this.scaleY*=e,this.setScaleAndRotation()},t.prototype.scaleTo=function(t,e){this.scaleX=t,this.scaleY=e,this.setScaleAndRotation()},t.prototype.setScaleAndRotation=function(){var t,e;e=this.rotation*Math.PI/180,0===e?(t=1,e=0):(t=Math.cos(e),e=Math.sin(e)),this.matrix._[0]=this.scaleX*t,this.matrix._[2]=this.scaleY*-e,this.matrix._[1]=this.scaleX*e,this.matrix._[3]=this.scaleY*t,this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.setMatrix=function(t,e,i,r){this.scaleX=null!=e?e:1,this.scaleY=null!=i?i:1,this.rotation=null!=r?r:0,this.matrix.set(t),this.hasMatrix=!0,this.lwf.setPropertyDirty()},t.prototype.setAlpha=function(t){this.colorTransform.multi._[3]=t,this.hasColorTransform=!0,this.lwf.setPropertyDirty()},t.prototype.setColorTransform=function(t){this.colorTransform.set(t),this.hasColorTransform=!0,this.lwf.setPropertyDirty()},t.prototype.setRenderingOffset=function(t){this.renderingOffset=t,this.hasRenderingOffset=!0},t.prototype.clearRenderingOffset=function(){this.renderingOffset=Number.MIN_VALUE,this.hasRenderingOffset=!1},t}(),s=function(t){function e(t,i,r){var s,n;e.__super__.constructor.call(this,t,i,U.BITMAP,r),this.isBitmapClip=!0,i=t.data.bitmaps[r],s=t.data.textureFragments[i.textureFragmentId],n=t.data.textures[s.textureId],this.width=s.w/n.scale,this.height=s.h/n.scale,this.offsetX=s.x,this.offsetY=s.y,this.originalWidth=s.ow,this.originalHeight=s.oh,this.dataMatrixId=i.matrixId,this.renderer=t.rendererFactory.constructBitmap(t,r,this),this.depth=-1,this.visible=!0,this.y=this.x=this.regY=this.regX=0,this.scaleY=this.scaleX=1,this.rotation=0,this.alpha=1,this._scaleX=this.scaleX,this._scaleY=this.scaleY,this._rotation=this.rotation,this._cos=1,this._sin=0,this._=G.available?new Float32Array(8):[],this._[0]=1,this._[1]=0,this._[2]=0,this._[3]=1,this._[4]=0,this._[5]=0,this._[6]=0,this._[7]=0}return Z(e,t),e.prototype.update=function(t,e){var i,r,s,n;if(s=this.matrix._,i=t._,n=this._,this.rotation!==this._rotation?(this._rotation=this.rotation,r=this._rotation*Math.PI/180,0===r?(this._cos=1,this._sin=0):(this._cos=Math.cos(r),this._sin=Math.sin(r)),r=!0):r=!1,(r||this._scaleX!==this.scaleX||this._scaleY!==this.scaleY)&&(this._scaleX=this.scaleX,this._scaleY=this.scaleY,n[0]=this._scaleX*this._cos,n[1]=this._scaleX*this._sin,n[2]=this._scaleY*-this._sin,n[3]=this._scaleY*this._cos),n[4]=this.x,n[6]=this.regX,n[4]-=n[6],n[5]=this.y,n[7]=this.regY,n[5]-=n[7],s[0]=i[0]*n[0]+i[2]*n[1],s[2]=i[0]*n[2]+i[2]*n[3],s[4]=i[0]*n[4]+i[2]*n[5]+i[4]+i[0]*n[6]+i[2]*n[7]+s[0]*-n[6]+s[2]*-n[7],s[1]=i[1]*n[0]+i[3]*n[1],s[3]=i[1]*n[2]+i[3]*n[3],s[5]=i[1]*n[4]+i[3]*n[5]+i[5]+i[1]*n[6]+i[3]*n[7]+s[1]*-n[6]+s[3]*-n[7],s=this.colorTransform.multi._,i=e.multi._,this.lwf.useVertexColor)if(1===this.alpha)for(n=r=0;4>r;n=++r)s[n]=i[n];else{for(n=r=0;3>r;n=++r)s[n]=i[n];s[3]=this.alpha*i[3]}else s[3]=this.alpha*i[3];this.lwf.renderObject()},e.prototype.setMatrix=function(t){var e,i;for(e=i=0;6>i;e=++i)this._[e]=t._[e]},e.prototype.detachFromParent=function(){null!=this.parent&&(this.parent.detachBitmap(this.depth),this.parent=null)},e}(x),k=function(t){function e(t,i,r,s,n,o,a,l,c){var u;null==n&&(n=null),null==o&&(o=null),null==a&&(a=!1),null==l&&(l=null),null==c&&(c=null),e.__super__.constructor.call(this,t,i,a?U.ATTACHEDMOVIE:U.MOVIE,r,s),null!=c&&(this.name=c),this.matrixId=n,this.colorTransformId=o,this.data=t.data.movies[r],this.totalFrames=this.data.frames,this.instanceTail=this.instanceHead=null,this.lastControls=this.lastControlOffset=this.animationPlayedFrame=this.execedFrame=this.currentFrameInternal=-1,this.lastHasButton=!1,this.lastControlAnimationOffset=-1,this.postLoaded=this.skipped=!1,this.playing=this.visible=this.active=!0,this.attachMoviePostExeced=this.attachMovieExeced=this.overriding=this.jumped=!1,this.postExecCount=this.movieExecCount=-1,this.eventHandlers={},this.requestedCalculateBounds=!1,this.currentLabelsCache=this.calculateBoundsCallback=null,this.currentLabelCache={},this.property=new W(t),this.matrix0=new P,this.matrix1=new P,this.colorTransform0=new g,this.colorTransform1=new g,this.blendMode="normal",this.displayList=[],this.depth=this.attachName=null,this.hasButton=!1,this.getMovieFunctions(),r===this.lwf.data.header.rootMovieId&&(i=null!=(u=this.lwf.functions)?u.init:void 0,null!=i&&i.call(this)),null!=this.loadFunc&&this.loadFunc.call(this),this.playAnimation(h.LOAD),this.handler=new O,this.handler.concat(t.getMovieEventHandlers(this)),this.handler.concat(l),this.handler.empty||this.handler.call("load",this),t.execMovieCommand()}return Z(e,t),e.prototype.getMovieFunctions=function(){var t;t=this.lwf.getMovieFunctions(this.objectId),this.loadFunc=t[0],this.postLoadFunc=t[1],this.unloadFunc=t[2],this.enterFrameFunc=t[3]},e.prototype.setHandlers=function(t){this.handler.concat(t)},e.prototype.play=function(){return this.playing=!0,this},e.prototype.stop=function(){return this.playing=!1,this},e.prototype.nextFrame=function(){return this.jumped=!0,this.stop(),this.currentFrameInternal<this.totalFrames-1&&++this.currentFrameInternal,this},e.prototype.prevFrame=function(){return this.jumped=!0,this.stop(),0<this.currentFrameInternal&&--this.currentFrameInternal,this},e.prototype.gotoFrame=function(t){return this.gotoFrameInternal(t-1)},e.prototype.gotoFrameInternal=function(t){return this.jumped=!0,this.stop(),this.currentFrameInternal=t,this},e.prototype.setVisible=function(t){return this.visible=t,this},e.prototype.globalToLocal=function(t){var e,i;return this.property.hasMatrix?(i=new P,i=X.calcMatrix(i,this.matrix,this.property.matrix)):i=this.matrix,e=new P,X.invertMatrix(e,i),t=X.calcMatrixToPoint(t.x,t.y,e),new D(t[0],t[1])},e.prototype.localToGlobal=function(t){var e;return this.property.hasMatrix?(e=new P,e=X.calcMatrix(e,this.matrix,this.property.matrix)):e=this.matrix,t=X.calcMatrixToPoint(t.x,t.y,e),new D(t[0],t[1])},e.prototype.getDepth=function(t){return 0===t.length?0:t[t.length-1]+1},e.prototype.reorderList=function(t,e,i,r,s,n){var o;if(X.insertIntArray(e,r),i[r]=s,t){t=0,r={};for(o in i)s=i[o],n(s,t),e[t]=t,r[t]=s,++t;i=r}return i},e.prototype.deleteAttachedMovie=function(t,e,i,r){var s,n;return null==i&&(i=!0),null==r&&(r=!0),s=e.attachName,n=e.depth,delete t.attachedMovies[s],delete t.attachedMovieList[n],X.deleteIntArray(t.attachedMovieListKeys,n),r&&delete t.detachedMovies[s],delete t[s],i?e.destroy():void 0},e.prototype.attachMovie=function(t,i,r){var s,n,o,a,h;if(null==r&&(r=null),t instanceof w)return this.attachLWF(t,i,r);if(null==r&&(r={}),s=r.depth,a=null!=(h=r.reorder)?h:!1,t instanceof e&&t.lwf===this.lwf)n=t,this.deleteAttachedMovie(n.parent,n,!1);else{if("string"!=typeof t)return null;if(o=this.lwf.searchMovieLinkage(this.lwf.getStringId(t)),-1===o)return null}return null==this.attachedMovies&&(this.attachedMovies={},this.detachedMovies={},this.attachedMovieList={},this.attachedMovieListKeys=X.newIntArray()),t=this.attachedMovies[i],null!=t&&this.deleteAttachedMovie(this,t),a||null==s||(t=this.attachedMovieList[s],null!=t&&this.deleteAttachedMovie(this,t)),t=new O,t.add(r),null!=n?(n.parent=this,n.setHandlers(t)):(n=new e(this.lwf,this,o,-1,0,0,!0,t,i),this.attachMovieExeced&&n.exec(),this.attachMoviePostExeced&&n.postExec(!0)),n.attachName=i,null==s&&(s=this.getDepth(this.attachedMovieListKeys)),n.depth=s,this.attachedMovies[i]=n,this.attachedMovieList=this.reorderList(a,this.attachedMovieListKeys,this.attachedMovieList,n.depth,n,function(t,e){return t.depth=e}),this[i]=n},e.prototype.attachEmptyMovie=function(t,e){return null==e&&(e=null),this.attachMovie("_empty",t,e)},e.prototype.swapAttachedMovieDepth=function(t,e){var i,r;null!=this.attachedMovies&&t!==e&&(i=this.attachedMovieList[t],r=this.attachedMovieList[e],null!=i?(i.depth=e,this.attachedMovieList[e]=i,X.insertIntArray(this.attachedMovieListKeys,e)):(delete this.attachedMovieList[e],X.deleteIntArray(this.attachedMovieListKeys,e)),null!=r?(r.depth=t,this.attachedMovieList[t]=r,X.insertIntArray(this.attachedMovieListKeys,t)):(delete this.attachedMovieList[t],X.deleteIntArray(this.attachedMovieListKeys,t)))},e.prototype.getAttachedMovie=function(t){if(null==this.attachedMovies)return null;switch(typeof t){case"string":return this.attachedMovies[t];case"number":return this.attachedMovieList[t]}},e.prototype.searchAttachedMovie=function(t,e){var i,r;if(null==e&&(e=!0),i=this.getAttachedMovie(t),null!=i)return i;if(!e)return null;for(r=this.instanceHead;null!==r;){if(r.isMovie&&(i=r.searchAttachedMovie(t,e),null!==i))return i;r=r.linkInstance}return null},e.prototype.detachMovie=function(t){var i;if(null!=this.detachedMovies)if(t instanceof e)null!=(null!=t?t.attachName:void 0)&&(this.detachedMovies[t.attachName]=!0);else switch(typeof t){case"string":this.detachedMovies[t]=!0;break;case"number":t=null!=(i=this.attachedMovieList)?i[t]:void 0,null!=(null!=t?t.attachName:void 0)&&(this.detachedMovies[t.attachName]=!0)}},e.prototype.detachFromParent=function(){this.type===U.ATTACHEDMOVIE&&(this.active=!1,null!=this.parent&&this.parent.detachMovie(this))},e.prototype.removeMovieClip=function(){null!=this.attachName?null!=this.parent&&this.parent.detachMovie(this):null!=this.lwf.attachName&&null!=this.lwf.parent&&this.lwf.parent.detachLWF(this.lwf)},e.prototype.attachBitmap=function(t,e){var i;return i=this.lwf.data.bitmapMap[t],null==i?null:(i=new s(this.lwf,this,i),null!=this.bitmapClips?this.detachBitmap(e):this.bitmapClips=[],this.bitmapClips[e]=i,i.depth=e,i.name=t,i)},e.prototype.getAttachedBitmaps=function(){return this.bitmapClips},e.prototype.getAttachedBitmap=function(t){return null==this.bitmapClips?null:this.bitmapClips[t]},e.prototype.detachBitmap=function(t){var e;null!=this.bitmapClips&&(e=this.bitmapClips[t],null!=e&&(e.destroy(),this.bitmapClips[t]=null))},e.prototype.execDetachHandler=function(t){t=t.child,null!=t.detachHandler?t.detachHandler(t)?t.destroy():(t.setAttachVisible(!1),t.render()):t.destroy(),t.parent=null,null!=t.rootMovie&&(t.rootMovie.parent=null),t.detachHandler=null,t.attachName=null},e.prototype.deleteAttachedLWF=function(t,e,i,r){var s,n;return null==i&&(i=!0),null==r&&(r=!0),s=e.child.attachName,n=e.child.depth,delete t.attachedLWFs[s],delete t.attachedLWFList[n],X.deleteIntArray(t.attachedLWFListKeys,n),r&&delete t.detachedLWFs[s],delete t[s],i?this.execDetachHandler(e):void 0},e.prototype.attachLWF=function(t,e,i){var r,s,n;null==i&&(i=null),null==i&&(i={}),r=i.depth,n=null!=(s=i.reorder)?s:!1,i=i.detach,null==this.attachedLWFs&&(this.attachedLWFs={},this.detachedLWFs={},this.attachedLWFList={},this.attachedLWFListKeys=X.newIntArray(),this.needsUpdateAttachedLWFs=!1,this.matrixForAttachedLWFs=new P,this.colorTransformForAttachedLWFs=new g),null!=t.parent&&(s=t.parent.attachedLWFs[t.attachName],this.deleteAttachedLWF(t.parent,s,!1)),s=this.attachedLWFs[e],null!=s&&this.deleteAttachedLWF(this,s),n||null==r||(s=this.attachedLWFList[r],null!=s&&this.deleteAttachedLWF(this,s)),s=new C(this,t),t.interactive&&this.lwf.setInteractive(),t.setParent(this),t.detachHandler=i,t.attachName=e,null==r&&(r=this.getDepth(this.attachedLWFListKeys)),t.depth=r,this.attachedLWFs[e]=s,this.attachedLWFList=this.reorderList(n,this.attachedLWFListKeys,this.attachedLWFList,t.depth,s,function(t,e){return t.child.depth=e}),this[e]=t.rootMovie,null!=t.lwfInstanceId&&delete this.lwf.loadedLWFs[t.lwfInstanceId],this.lwf.setLWFAttached()},e.prototype.swapAttachedLWFDepth=function(t,e){var i,r;null!=this.attachedLWFs&&t!==e&&(i=this.attachedLWFList[t],r=this.attachedLWFList[e],null!=i?(i.child.depth=e,this.attachedLWFList[e]=i,X.insertIntArray(this.attachedLWFListKeys,e)):(delete this.attachedLWFList[e],X.deleteIntArray(this.attachedLWFListKeys,e)),null!=r?(r.child.depth=t,this.attachedLWFList[t]=r,X.insertIntArray(this.attachedLWFListKeys,t)):(delete this.attachedLWFList[t],X.deleteIntArray(this.attachedLWFListKeys,t)))},e.prototype.swapDepths=function(t){t instanceof e?null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,t.depth):this.lwf===t.lwf&&null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,t.lwf.depth):null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,t):null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,t)},e.prototype.getAttachedLWF=function(t){var e,i;if(null==this.attachedLWFs)return null;switch(typeof t){case"string":return null!=(e=this.attachedLWFs[t])?e.child:void 0;case"number":return null!=(i=this.attachedLWFList[t])?i.child:void 0}},e.prototype.searchAttachedLWF=function(t,e){var i,r;if(null==e&&(e=!0),i=this.getAttachedLWF(t),null!=i)return i;if(!e)return null;for(r=this.instanceHead;null!==r;){if(r.isMovie&&(i=r.searchAttachedLWF(t,e),null!==i))return i;r=r.linkInstance}return null},e.prototype.detachLWF=function(t){var e,i;if(null!=this.detachedLWFs)if(t instanceof w)null!=(null!=t?t.attachName:void 0)&&(this.detachedLWFs[t.attachName]=!0);else switch(typeof t){case"string":this.detachedLWFs[t]=!0;break;case"number":t=null!=(e=this.attachedLWFList)?e[t]:void 0,null!=(null!=t?null!=(i=t.child)?i.attachName:void 0:void 0)&&(this.detachedLWFs[t.child.attachName]=!0)
}},e.prototype.detachAllLWFs=function(){var t,e,i;if(null!=this.detachedLWFs)for(t in i=this.attachedLWFs)e=i[t],this.detachedLWFs[e.child.attachName]=!0},e.prototype.setBlendMode=function(t,e){switch(e){case L.Constant.BLEND_MODE_NORMAL:return t.blendMode="normal";case L.Constant.BLEND_MODE_ADD:return t.blendMode="add";case L.Constant.BLEND_MODE_ERASE:return t.blendMode="erase";case L.Constant.BLEND_MODE_LAYER:return t.blendMode="layer";case L.Constant.BLEND_MODE_MASK:return t.blendMode="mask";case L.Constant.BLEND_MODE_MULTIPLY:return t.blendMode="multiply";case L.Constant.BLEND_MODE_SCREEN:return t.blendMode="screen";case L.Constant.BLEND_MODE_SUBTRACT:return t.blendMode="subtract"}},e.prototype.execObject=function(t,i,s,a,h,l,c){var u,p;if(null==c&&(c=!1),-1!==i){if(u=this.lwf.data,i=u.objects[i],u=i.objectId,p=this.displayList[t],null!=p&&(p.type!==i.objectType||p.objectId!==u||p.isMovie&&p.instanceId!==h)&&(p.destroy(),p=null),null==p)switch(i.objectType){case U.BUTTON:p=new o(this.lwf,this,u,h,s,a);break;case U.GRAPHIC:p=new F(this.lwf,this,u);break;case U.MOVIE:p=new e(this.lwf,this,u,h,s,a),this.setBlendMode(p,l);break;case U.BITMAP:p=new r(this.lwf,this,u);break;case U.BITMAPEX:p=new n(this.lwf,this,u);break;case U.TEXT:p=new j(this.lwf,this,u,h);break;case U.PARTICLE:p=new N(this.lwf,this,u);break;case U.PROGRAMOBJECT:p=new H(this.lwf,this,u)}p.isMovie&&c&&this.setBlendMode(p,l),(p.isMovie||p.isButton)&&(p.linkInstance=null,null===this.instanceHead?this.instanceHead=p:this.instanceTail.linkInstance=p,this.instanceTail=p,p.isButton&&(this.hasButton=!0)),this.displayList[t]=p,p.execCount=this.movieExecCount,p.exec(s,a)}},e.prototype.override=function(t,e){this.overriding=!0,X.copyMatrix(this.matrix,t),X.copyColorTransform(this.lwf,this.colorTransform,e),this.lwf.isPropertyDirty=!0},e.prototype.exec=function(t,i){null==t&&(t=0),null==i&&(i=0),this.attachMoviePostExeced=this.attachMovieExeced=!1,e.__super__.exec.call(this,t,i)},e.prototype.postExec=function(t){var e,i,r,s,n,o,a,l,c;if(this.hasButton=!1,this.active){for(this.execedFrame=-1,a=this.postExecCount===this.lwf.execCount,t&&this.playing&&!this.jumped&&!a&&++this.currentFrameInternal;(0>this.currentFrameInternal||this.currentFrameInternal>=this.totalFrames)&&(this.currentFrameInternal=0),this.currentFrameInternal!==this.execedFrame;){if(this.execedFrame=this.currentFrameCurrent=this.currentFrameInternal,s=this.lwf.data,n=s.frames[this.data.frameOffset+this.currentFrameCurrent],this.lastControlOffset===n.controlOffset&&this.lastControls===n.controls)if(r=this.lastControlAnimationOffset,this.skipped){for(o=this.instanceHead;null!==o;)o.isMovie?(o.attachMovieExeced=!1,o.attachMoviePostExeced=!1):o.isButton&&o.enterFrame(),o=o.linkInstance;this.hasButton=this.lastHasButton}else{for(e=l=0,c=this.data.depths;c>=0?c>l:l>c;e=c>=0?++l:--l)o=this.displayList[e],null!=o&&(a||(o.matrixIdChanged=!1,o.colorTransformIdChanged=!1),o.isMovie?(o.attachMovieExeced=!1,o.attachMoviePostExeced=!1):o.isButton&&(o.enterFrame(),this.hasButton=!0));this.lastHasButton=this.hasButton,this.skipped=!0}else{for(++this.movieExecCount,this.instanceTail=this.instanceHead=null,this.lastControlOffset=n.controlOffset,this.lastControls=n.controls,r=-1,o=l=0,c=n.controls;c>=0?c>l:l>c;o=c>=0?++l:--l)switch(e=s.controls[n.controlOffset+o],e.controlType){case I.MOVE:o=s.places[e.controlId],this.execObject(o.depth,o.objectId,o.matrixId,0,o.instanceId,o.blendMode);break;case I.MOVEM:e=s.controlMoveMs[e.controlId],o=s.places[e.placeId],this.execObject(o.depth,o.objectId,e.matrixId,0,o.instanceId,o.blendMode);break;case I.MOVEC:e=s.controlMoveCs[e.controlId],o=s.places[e.placeId],this.execObject(o.depth,o.objectId,o.matrixId,e.colorTransformId,o.instanceId,o.blendMode);break;case I.MOVEMC:e=s.controlMoveMCs[e.controlId],o=s.places[e.placeId],this.execObject(o.depth,o.objectId,e.matrixId,e.colorTransformId,o.instanceId,o.blendMode);break;case I.MOVEMCB:e=s.controlMoveMCBs[e.controlId],o=s.places[e.placeId],this.execObject(o.depth,o.objectId,e.matrixId,e.colorTransformId,o.instanceId,e.blendMode,!0);break;case I.ANIMATION:-1===r&&(r=o)}for(this.lastControlAnimationOffset=r,this.lastHasButton=this.hasButton,e=l=0,c=this.data.depths;c>=0?c>l:l>c;e=c>=0?++l:--l)o=this.displayList[e],null!=o&&o.execCount!==this.movieExecCount&&(o.destroy(),this.displayList[e]=null)}if(this.attachMovieExeced=!0,null!=this.attachedMovies)for(c=this.attachedMovieListKeys,o=0,l=c.length;l>o;o++)e=c[o],e=this.attachedMovieList[e],e.exec();for(o=this.instanceHead;null!==o;)o.isMovie&&(e=o,e.postExec(t),!this.hasButton&&e.hasButton&&(this.hasButton=!0)),o=o.linkInstance;if(this.attachMoviePostExeced=!0,null!=this.attachedMovies){e=this.detachedMovies;for(i in e)e=this.attachedMovies[i],null!=e&&this.deleteAttachedMovie(this,e,!0,!1);for(this.detachedMovies={},c=this.attachedMovieListKeys,l=0,o=c.length;o>l;l++)e=c[l],e=this.attachedMovieList[e],e.postExec(t),!this.hasButton&&e.hasButton&&(this.hasButton=!0)}if(null!=this.attachedLWFs&&(this.hasButton=!0),this.postLoaded||(this.postLoaded=!0,null!=this.postLoadFunc&&this.postLoadFunc.call(this),this.handler.empty||this.handler.call("postLoad",this)),null!=this.nextEnterFrameFunctions)for(o=this.nextEnterFrameFunctions,this.nextEnterFrameFunctions=null,c=0,l=o.length;l>c;c++)e=o[c],e.call(this);if(-1!==r&&this.execedFrame===this.currentFrameInternal&&(e=this.animationPlayedFrame===this.currentFrameCurrent&&!this.jumped,!e))for(o=l=r,c=n.controls;c>=r?c>l:l>c;o=c>=r?++l:--l)e=s.controls[n.controlOffset+o],this.lwf.playAnimation(e.controlId,this);this.animationPlayedFrame=this.currentFrameCurrent,this.currentFrameCurrent===this.currentFrameInternal&&(this.jumped=!1)}this.postExecCount!==this.lwf.execCount&&(null!=this.enterFrameFunc&&this.enterFrameFunc.call(this),this.playAnimation(h.ENTERFRAME),this.handler.empty||this.handler.call("enterFrame",this)),this.postExecCount=this.lwf.execCount}},e.prototype.execAttachedLWF=function(t,e){var i,r,s,n,o,a;for(s=!1,r=this.instanceHead;null!==r;)r.isMovie&&(s|=r.execAttachedLWF(t,e)),r=r.linkInstance;if(null!=this.attachedMovies)for(a=this.attachedMovieListKeys,n=0,o=a.length;o>n;n++)r=a[n],r=this.attachedMovieList[r],s|=r.execAttachedLWF(t,e);if(null!=this.attachedLWFs){r=this.detachedLWFs;for(i in r)r=this.attachedLWFs[i],null!=r&&this.deleteAttachedLWF(this,r,!0,!1);for(this.detachedLWFs={},o=this.attachedLWFListKeys,i=0,n=o.length;n>i;i++)r=o[i],r=this.attachedLWFList[r],r=r.child,r.tick===this.lwf.tick&&(r.progress=e),this.lwf.renderObject(r.execInternal(t)),s|=r.rootMovie.hasButton}return s},e.prototype.updateObject=function(t,e,i,r,s){e=t.isMovie&&t.property.hasMatrix?e:r||!t.updated||t.matrixIdChanged?X.calcMatrixId(this.lwf,this.matrix1,e,t.matrixId):null,i=t.isMovie&&t.property.hasColorTransform?i:s||!t.updated||t.colorTransformIdChanged?X.calcColorTransformId(this.lwf,this.colorTransform1,i,t.colorTransformId):null,t.update(e,i)},e.prototype.update=function(t,e){var i,r,s,n,o,a;if(this.active){for(this.overriding?r=o=!0:(o=this.matrix.setWithComparing(t),r=this.colorTransform.setWithComparing(e)),this.property.hasMatrix?(o=!0,t=X.calcMatrix(this.matrix0,this.matrix,this.property.matrix)):t=this.matrix,this.property.hasColorTransform?(r=!0,e=X.calcColorTransform(this.lwf,this.colorTransform0,this.colorTransform,this.property.colorTransform)):e=this.colorTransform,null!=this.attachedLWFs&&(this.needsUpdateAttachedLWFs=!1,this.needsUpdateAttachedLWFs|=this.matrixForAttachedLWFs.setWithComparing(t),this.needsUpdateAttachedLWFs|=this.colorTransformForAttachedLWFs.setWithComparing(e)),s=i=0,a=this.data.depths;a>=0?a>i:i>a;s=a>=0?++i:--i)s=this.displayList[s],null!=s&&this.updateObject(s,t,e,o,r);if(null!=this.bitmapClips)for(n=this.bitmapClips,a=0,s=n.length;s>a;a++)i=n[a],null!=i&&i.update(t,e);if(null!=this.attachedMovies)for(s=this.attachedMovieListKeys,i=0,a=s.length;a>i;i++)n=s[i],n=this.attachedMovieList[n],this.updateObject(n,t,e,o,r)}},e.prototype.postUpdate=function(){var t,e,i,r;for(t=this.instanceHead;null!==t;)t.isMovie&&t.postUpdate(),t=t.linkInstance;if(null!=this.attachedMovies)for(r=this.attachedMovieListKeys,t=0,i=r.length;i>t;t++)e=r[t],e=this.attachedMovieList[e],e.postUpdate();this.requestedCalculateBounds&&(this.xMin=Number.MAX_VALUE,this.xMax=-Number.MAX_VALUE,this.yMin=Number.MAX_VALUE,this.yMax=-Number.MAX_VALUE,t=function(t){return function(e){return t.calculateBounds(e)}}(this),this.inspect(t,0,0),this.lwf.property.hasMatrix&&(t=new P,X.invertMatrix(t,this.lwf.property.matrix),i=X.calcMatrixToPoint(this.xMin,this.yMin,t),this.xMin=i[0],this.yMin=i[1],i=X.calcMatrixToPoint(this.xMax,this.yMax,t),this.xMax=i[0],this.yMax=i[1]),this.bounds={xMin:this.xMin,xMax:this.xMax,yMin:this.yMin,yMax:this.yMax},this.requestedCalculateBounds=!1,null!=this.calculateBoundsCallback&&(this.calculateBoundsCallback.call(this),this.calculateBoundsCallback=null)),this.handler.empty||this.handler.call("update",this)},e.prototype.updateAttachedLWF=function(){var t,e,i,r,s;for(t=this.instanceHead;null!==t;)t.isMovie&&t.updateAttachedLWF(),t=t.linkInstance;if(null!=this.attachedMovies)for(s=this.attachedMovieListKeys,i=0,r=s.length;r>i;i++)t=s[i],t=this.attachedMovieList[t],t.updateAttachedLWF();if(null!=this.attachedLWFs)for(s=this.attachedLWFListKeys,i=0,r=s.length;r>i;i++)t=s[i],t=this.attachedLWFList[t],t=t.child,(e=t.needsUpdate||this.needsUpdateAttachedLWFs)&&t.update(this.matrixForAttachedLWFs,this.colorTransformForAttachedLWFs),t.isLWFAttached&&t.rootMovie.updateAttachedLWF(),e&&t.rootMovie.postUpdate()},e.prototype.calculateBounds=function(t){var e,i,r;switch(t.type){case U.GRAPHIC:for(r=t.displayList,e=0,i=r.length;i>e;e++)t=r[e],this.calculateBounds(t);break;case U.BITMAP:case U.BITMAPEX:e=t.type===U.BITMAP?t.lwf.data.bitmaps[t.objectId].textureFragmentId:t.lwf.data.bitmapExs[t.objectId].textureFragmentId,null!=e&&e>=0&&(e=t.lwf.data.textureFragments[e],this.updateBounds(t.matrix,e.x,e.x+e.w,e.y,e.y+e.h));break;case U.BUTTON:this.updateBounds(t.matrix,0,t.width,0,t.height);break;case U.TEXT:e=t.lwf.data.texts[t.objectId],this.updateBounds(t.matrix,0,e.width,0,e.height);break;case U.PROGRAMOBJECT:e=t.lwf.data.programObjects[t.objectId],this.updateBounds(t.matrix,0,e.width,0,e.height)}},e.prototype.updateBounds=function(t,e,i,r,s){var n;for(r=[[e,r],[e,s],[i,r],[i,s]],e=0,i=r.length;i>e;e++)s=r[e],n=X.calcMatrixToPoint(s[0],s[1],t),s=n[0],n=n[1],s<this.xMin?this.xMin=s:s>this.xMax&&(this.xMax=s),n<this.yMin?this.yMin=n:n>this.yMax&&(this.yMax=n)},e.prototype.linkButton=function(){var t,e,i,r;if(this.visible&&this.active&&this.hasButton){for(t=e=0,i=this.data.depths;i>=0?i>e:e>i;t=i>=0?++e:--e)t=this.displayList[t],null!=t&&(t.isButton?t.linkButton():t.isMovie&&t.hasButton&&t.linkButton());if(null!=this.attachedMovies)for(r=this.attachedMovieListKeys,i=0,t=r.length;t>i;i++)e=r[i],e=this.attachedMovieList[e],e.hasButton&&e.linkButton();if(null!=this.attachedLWFs)for(r=this.attachedLWFListKeys,i=0,t=r.length;t>i;i++)e=r[i],e=this.attachedLWFList[e],e.linkButton()}},e.prototype.render=function(t,e){var i,r,s,n,o,a;if(this.active||null!=this.lwf.rendererFactory.needsRenderForInactive){if(this.visible&&this.active||(t=!1),n=s=!1,"normal"!==this.blendMode)switch(this.blendMode){case"add":case"multiply":case"screen":case"subtract":this.lwf.beginBlendMode(this.blendMode),s=!0;break;case"erase":case"layer":case"mask":case"alpha":this.lwf.beginMaskMode(this.blendMode),n=!0}for(this.handler.empty||this.handler.call("render",this),this.property.hasRenderingOffset&&(this.lwf.renderOffset(),e=this.property.renderingOffset),e===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),r=i=0,o=this.data.depths;o>=0?o>i:i>o;r=o>=0?++i:--i)r=this.displayList[r],null!=r&&r.render(t,e);if(null!=this.bitmapClips)for(a=this.bitmapClips,o=0,r=a.length;r>o;o++)i=a[o],null!=i&&i.render(t&&i.visible,e);if(null!=this.attachedMovies)for(a=this.attachedMovieListKeys,o=0,r=a.length;r>o;o++)i=a[o],i=this.attachedMovieList[i],i.render(t,e);if(null!=this.attachedLWFs)for(a=this.attachedLWFListKeys,o=0,r=a.length;r>o;o++)i=a[o],i=this.attachedLWFList[i],i=i.child,i.setAttachVisible(t),this.lwf.renderObject(i.render(this.lwf.renderingIndex,this.lwf.renderingCount,e));s&&this.lwf.endBlendMode(),n&&this.lwf.endMaskMode()}},e.prototype.inspect=function(t,e,i){var r,s,n,o,a;for(this.property.hasRenderingOffset&&(this.lwf.renderOffset(),s=this.property.renderingOffset),s===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),t(this,e,i,s),++e,i=n=0,o=this.data.depths;o>=0?o>n:n>o;i=o>=0?++n:--n)r=this.displayList[i],null!=r&&r.inspect(t,e,i,s);if(null!=this.bitmapClips)for(a=this.bitmapClips,n=0,o=a.length;o>n;n++)r=a[n],null!=r&&r.inspect(t,e,i++,s);if(null!=this.attachedMovies)for(a=this.attachedMovieListKeys,n=0,o=a.length;o>n;n++)r=a[n],r=this.attachedMovieList[r],r.inspect(t,e,i++,s);if(null!=this.attachedLWFs)for(a=this.attachedLWFListKeys,n=0,o=a.length;o>n;n++)r=a[n],r=this.attachedLWFList[r],r=r.child,this.lwf.renderObject(r.inspect(t,e,i++,s))},e.prototype.destroy=function(){var t,i,r,s,n;for(n=this.displayList,r=0,s=n.length;s>r;r++)t=n[r],null!=t&&t.destroy();if(null!=this.bitmapClips){for(n=this.bitmapClips,r=0,s=n.length;s>r;r++)t=n[r],null!=t&&t.destroy();this.bitmapClips=null}if(null!=this.attachedMovies){r=this.attachedMovies;for(i in r)t=r[i],t.destroy();this.attachedMovieListKeys=this.attachedMovieList=this.detachedMovies=this.attachedMovies=null}if(null!=this.attachedLWFs){r=this.attachedLWFs;for(i in r)t=r[i],this.execDetachHandler(t);this.attachedLWFListKeys=this.attachedLWFList=this.detachedLWFs=this.attachedLWFs=null}null!=this.unloadFunc&&this.unloadFunc.call(this),this.playAnimation(h.UNLOAD),this.handler.empty||this.handler.call("unload",this),this.property=this.displayList=this.instanceTail=this.instanceHead=null,e.__super__.destroy.call(this)},e.prototype.playAnimation=function(t){var e,i,r,s;for(i=this.lwf.data.movieClipEvents,e=r=0,s=this.data.clipEvents;s>=0?s>r:r>s;e=s>=0?++r:--r)e=i[this.data.clipEventId+e],0!==(e.clipEvent&t)&&this.lwf.playAnimation(e.animationId,this)},e.prototype.dispatchEvent=function(t){var e,i,r,s,n;switch("object"==typeof t?(r=t.param,t=t.type):r=null,t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.empty||this.handler.call(t,this);break;default:if(i=this.eventHandlers[t],null==i)return!1;var o;for(o=[],s=0,n=i.length;n>s;s++)e=i[s],o.push(e);for(i=o,s=0,n=i.length;n>s;s++)e=i[s],null!=e&&e.call(this,{type:t,param:r})}return!0},e.prototype.addEventHandler=function(t,e){var i;switch(t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.lwf.enableExec(),this.handler.addHandler(t,e);break;default:null==(i=this.eventHandlers)[t]&&(i[t]=[]),this.eventHandlers[t].push(e)}},e.prototype.removeEventHandler=function(t,e){var i,r;switch(t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.removeHandler(t,e);break;default:if(i=this.eventHandlers[t],null==i)break;for(r=0;r<i.length;)i[r]===e?i.splice(r,1):++r;0===i.length&&delete this.eventHandlers[t]}},e.prototype.clearEventHandler=function(t){switch(null==t&&(t=null),t){case null:this.handler.clear(),this.eventHandlers={};break;case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.clear(t);break;default:delete this.eventHandlers[t]}},e.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},e.prototype.nextEnterFrame=function(t){null==this.nextEnterFrameFunctions&&(this.nextEnterFrameFunctions=[]),this.nextEnterFrameFunctions.push(t)},e.prototype.searchFrame=function(t){return this.lwf.searchFrame(this,t)},e.prototype.gotoLabel=function(t){return"string"==typeof t&&(t=this.lwf.getStringId(t)),this.gotoFrame(this.lwf.searchFrame(this,t)),this},e.prototype.gotoAndStop=function(t){return"string"==typeof t?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(t))):this.gotoFrame(t),this.stop(),this},e.prototype.gotoAndPlay=function(t){return"string"==typeof t?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(t))):this.gotoFrame(t),this.play(),this},e.prototype.searchMovieInstance=function(t,e){var i,r;for(null==e&&(e=!0),"string"==typeof t&&(t=this.lwf.getStringId(t)),r=this.instanceHead;null!==r;){if(r.isMovie&&this.lwf.getInstanceNameStringId(r.instanceId)===t)return r;if(e&&r.isMovie&&(i=r.searchMovieInstance(t,e),null!==i))return i;r=r.linkInstance}return null},e.prototype.searchMovieInstanceByInstanceId=function(t,e){var i,r;for(r=this.instanceHead;null!==r;){if(r.isMovie&&r.instanceId===t)return r;if(e&&r.isMovie&&(i=r.searchMovieInstanceByInstanceId(t,e),null!==i))return i;r=r.linkInstance}return null},e.prototype.searchButtonInstance=function(t,e){var i,r;for(null==e&&(e=!0),"string"==typeof t&&(t=this.lwf.getStringId(t)),r=this.instanceHead;null!==r;){if(r.isButton&&this.lwf.getInstanceNameStringId(r.instanceId)===t)return r;if(e&&r.isMovie&&(i=r.searchButtonInstance(t,e),null!==i))return i;r=r.linkInstance}return null},e.prototype.searchButtonInstanceByInstanceId=function(t,e){var i,r;for(r=this.instanceHead;null!==r;){if(r.isButton&&r.instanceId===t)return r;if(e&&r.isMovie&&(i=r.searchMovieInstanceByInstanceId(t,e),null!==i))return i;r=r.linkInstance}return null},e.prototype.move=function(t,e){return this.property.hasMatrix||X.syncMatrix(this),this.property.move(t,e),this},e.prototype.moveTo=function(t,e){return this.property.hasMatrix||X.syncMatrix(this),this.property.moveTo(t,e),this},e.prototype.rotate=function(t){return this.property.hasMatrix||X.syncMatrix(this),this.property.rotate(t),this},e.prototype.rotateTo=function(t){return this.property.hasMatrix||X.syncMatrix(this),this.property.rotateTo(t),this},e.prototype.scale=function(t,e){return this.property.hasMatrix||X.syncMatrix(this),this.property.scale(t,e),this},e.prototype.scaleTo=function(t,e){return this.property.hasMatrix||X.syncMatrix(this),this.property.scaleTo(t,e),this},e.prototype.setMatrix=function(t,e,i,r){return null==e&&(e=1),null==i&&(i=1),null==r&&(r=0),this.property.setMatrix(t,e,i,r),this},e.prototype.setAlpha=function(t){return this.property.hasColorTransform||X.syncColorTransform(this),this.property.setAlpha(t),this},e.prototype.setColorTransform=function(t){return this.property.setColorTransform(t),this},e.prototype.setRenderingOffset=function(t){return this.property.setRenderingOffset(t),this},e.prototype.getX=function(){return this.property.hasMatrix?this.property.matrix.translateX:X.getX(this)},e.prototype.setX=function(t){this.property.hasMatrix||X.syncMatrix(this),this.property.moveTo(t,this.property.matrix.translateY)},e.prototype.getY=function(){return this.property.hasMatrix?this.property.matrix.translateY:X.getY(this)},e.prototype.setY=function(t){this.property.hasMatrix||X.syncMatrix(this),this.property.moveTo(this.property.matrix.translateX,t)},e.prototype.getScaleX=function(){return this.property.hasMatrix?this.property.scaleX:X.getScaleX(this)},e.prototype.setScaleX=function(t){this.property.hasMatrix||X.syncMatrix(this),this.property.scaleTo(t,this.property.scaleY)},e.prototype.getScaleY=function(){return this.property.hasMatrix?this.property.scaleY:X.getScaleY(this)},e.prototype.setScaleY=function(t){this.property.hasMatrix||X.syncMatrix(this),this.property.scaleTo(this.property.scaleX,t)},e.prototype.getRotation=function(){return this.property.hasMatrix?this.property.rotation:X.getRotation(this)},e.prototype.setRotation=function(t){this.property.hasMatrix||X.syncMatrix(this),this.property.rotateTo(t)},e.prototype.getAlphaProperty=function(){return this.property.hasColorTransform?this.property.colorTransform.multi.alpha:X.getAlpha(this)},e.prototype.setAlphaProperty=function(t){this.property.hasColorTransform||X.syncColorTransform(this),this.property.setAlpha(t)},e.prototype.requestCalculateBounds=function(t){null==t&&(t=null),this.requestedCalculateBounds=!0,this.calculateBoundsCallback=t,this.bounds=void 0},e.prototype.getBounds=function(){return this.bounds},e.prototype.setFrameRate=function(t){var e,i,r,s;if(null!=this.attachedMovies)for(s=this.attachedMovieListKeys,i=0,r=s.length;r>i;i++)e=s[i],e=this.attachedMovieList[e],e.setFrameRate(t);if(null!=this.attachedLWFs)for(s=this.attachedLWFListKeys,i=0,r=s.length;r>i;i++)e=s[i],e=this.attachedLWFList[e],e.child.setFrameRate(t);for(e=this.instanceHead;null!==e;)e.isMovie&&e.setFrameRate(t),e=e.linkInstance},e.prototype.cacheCurrentLabels=function(){var t,e,i,r;if(null==this.currentLabelsCache&&(this.currentLabelsCache=[],e=this.lwf.getMovieLabels(this),null!=e)){for(r in e)t=e[r],i={},i.frame=t+1,i.name=this.lwf.data.strings[r],this.currentLabelsCache.push(i);this.currentLabelsCache.sort(function(t,e){return t.frame-e.frame})}},e.prototype.getCurrentLabel=function(){var t,e,i,r,s,n,o,a;if(this.cacheCurrentLabels(),0===this.currentLabelsCache.length)return null;if(t=this.currentFrameInternal+1,1>t&&(t=1),i=this.currentLabelCache[t],null==i){if(e=this.currentLabelsCache[0],r=this.currentLabelsCache[this.currentLabelsCache.length-1],t<e.frame)i="";else if(t===e.frame)i=e.name;else if(t>=r.frame)i=r.name;else for(e=0,r=this.currentLabelsCache[e].frame,o=this.currentLabelsCache.length-1,a=this.currentLabelsCache[o].frame;;){if(e===o||1===o-e){i=r>t?"":t===a?this.currentLabelsCache[o].name:this.currentLabelsCache[e].name;break}if(s=Math.floor((o-e)/2)+e,n=this.currentLabelsCache[s].frame,n>t)o=s,a=n;else{if(!(t>n)){i=this.currentLabelsCache[s].name;break}e=s,r=n}}this.currentLabelCache[t]=i}return""===i?null:i},e.prototype.getCurrentLabels=function(){return this.cacheCurrentLabels(),this.currentLabelsCache},e}(f),"undefined"!=typeof k.prototype.__defineGetter__?(k.prototype.__defineGetter__("x",function(){return this.getX()}),k.prototype.__defineSetter__("x",function(t){return this.setX(t)}),k.prototype.__defineGetter__("y",function(){return this.getY()}),k.prototype.__defineSetter__("y",function(t){return this.setY(t)}),k.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),k.prototype.__defineSetter__("scaleX",function(t){return this.setScaleX(t)}),k.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),k.prototype.__defineSetter__("scaleY",function(t){return this.setScaleY(t)}),k.prototype.__defineGetter__("rotation",function(){return this.getRotation()}),k.prototype.__defineSetter__("rotation",function(t){return this.setRotation(t)}),k.prototype.__defineGetter__("alpha",function(){return this.getAlphaProperty()}),k.prototype.__defineSetter__("alpha",function(t){return this.setAlphaProperty(t)}),k.prototype.__defineGetter__("currentFrame",function(){return this.currentFrameInternal+1}),k.prototype.__defineGetter__("currentLabel",function(){return this.getCurrentLabel()}),k.prototype.__defineGetter__("currentLabels",function(){return this.getCurrentLabels()})):"undefined"!=typeof Object.defineProperty&&(Object.defineProperty(k.prototype,"x",{get:function(){return this.getX()},set:function(t){return this.setX(t)}}),Object.defineProperty(k.prototype,"y",{get:function(){return this.getY()},set:function(t){return this.setY(t)}}),Object.defineProperty(k.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(t){return this.setScaleX(t)}}),Object.defineProperty(k.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(t){return this.setScaleY(t)}}),Object.defineProperty(k.prototype,"rotation",{get:function(){return this.getRotation()},set:function(t){return this.setRotation(t)}}),Object.defineProperty(k.prototype,"alpha",{get:function(){return this.getAlphaProperty()},set:function(t){return this.setAlphaProperty(t)}}),Object.defineProperty(k.prototype,"currentFrame",{get:function(){return this.currentFrameInternal+1}}),Object.defineProperty(k.prototype,"currentLabel",{get:function(){return this.getCurrentLabel()}}),Object.defineProperty(k.prototype,"currentLabels",{get:function(){return this.getCurrentLabels()}})),x=function(){function t(){this.clear()}return t.prototype.clear=function(t){var e,i,r;if(null==t&&(t=null),null!=t)null!=this[t]&&(this[t]=[]);else for(r=this.types,e=0,i=r.length;i>e;e++)t=r[e],this[t]=[];this.empty=!0},t.prototype.add=function(t){var e,i,r,s,n;if(null!=t){for(n=this.types,r=0,s=n.length;s>r;r++)i=n[r],e=t[i],null!=e&&this[i].push(e);this.updateEmpty()}},t.prototype.concat=function(t){var e,i,r,s,n,o,a,h;if(null!=t&&!t.empty){for(h=this.types,s=0,o=h.length;o>s;s++)for(r=h[s],i=t[r],n=0,a=i.length;a>n;n++)e=i[n],this[r].push(e);this.updateEmpty()}},t.prototype.addHandler=function(t,e){null!=e&&(this[t].push(e),this.empty=!1)},t.prototype.removeInternal=function(t,e){var i;for(i=0;i<t.length;)t[i]===e?t.splice(i,1):++i},t.prototype.remove=function(t){var e,i,r,s,n;for(n=this.types,r=0,s=n.length;s>r;r++)i=n[r],e=t[i],null!=e&&this.removeInternal(this[i],e);this.updateEmpty()},t.prototype.removeHandler=function(t,e){null!=e&&this.removeInternal(this[t],e),this.updateEmpty()},t.prototype.call=function(t,e){var i,r,s,n;if(r=this[t],null!=r&&0<r.length){var o;for(o=[],s=0,n=r.length;n>s;s++)i=r[s],o.push(i);for(r=o,s=0,n=r.length;n>s;s++)i=r[s],i.call(e,e)}},t.prototype.updateEmpty=function(){var t,e,i,r,s;for(r=this.types,e=0,i=r.length;i>e;e++)if(t=r[e],0<(null!=(s=this[t])?s.length:void 0))return this.empty=!1,void 0;this.empty=!0},t}(),O=function(t){function e(){this.types=i,e.__super__.constructor.apply(this,arguments)}var i;return Z(e,t),i="load postLoad unload enterFrame update render".split(" "),e}(x),a=function(t){function e(){this.types=i,e.__super__.constructor.apply(this,arguments)}var i;return Z(e,t),i="load unload enterFrame update render press release rollOver rollOut keyPress".split(" "),e}(x),w=function(){function t(t,i,r,s){null==i&&(i=null),null==r&&(r=null),this.privateData=null!=s?s:null,this.data=t,null!=r&&(this.functions=r()),this.width=this.data.header.width,this.height=this.data.header.height,this.backgroundColor=this.data.header.backgroundColor,this.name=this.data.strings[this.data.header.nameStringId],this.interactive=0<this.data.buttonConditions.length,this.lwfInstanceId=this.url=null,this.frameRate=this.data.header.frameRate,this.active=!0,this.fastForwardTimeout=15,this.fastForward=!1,this.frameSkip=!0,this.execLimit=3,this.tick=1/this.frameRate,this.roundOffTick=e,this.time=0,this.attachVisible=!0,this.renderCount=this.execCount=0,this.isLWFAttached=this.isPropertyDirty=this.isExecDisabled=!1,this.interceptByNotAllowOrDenyButtons=!0,this.needsUpdateForAttachLWF=this.needsUpdate=this.intercepted=!1,this.textScale=1,this.pointY=this.pointX=Number.MIN_VALUE,this.pressing=!1,this.buttonHead=null,this.blendModes=[],this.maskModes=[],this._tweens=null,this.useVertexColor=!1,this.interactive||1!==this.data.frames.length||this.functions&&(this.functions._root_load||this.functions._root_postLoad||this.functions._root_unload||this.functions._root_enterFrame||this.functions._root_update||this.functions._root_render)||this.disableExec(),this.property=new W(this),this.instances=[],this.execHandlers=null,this.eventHandlers=[],this.genericEventHandlers=[],this.movieEventHandlers=[],this.buttonEventHandlers=[],this.movieCommands={},this.programObjectConstructors=[],this.loadedLWFs={},this.depth=this.attachName=this.parent=null,this.matrix=new P,this.matrixIdentity=new P,this.execMatrix=new P,this.colorTransform=new g,this.colorTransformIdentity=new g,this.execColorTransform=new g,this.setRendererFactory(i),this.init()}var e;return e=.05*(1/60),t.globalRenderCount=0,t.prototype.setRendererFactory=function(t){null==t&&(t=null),null==t&&(t=new R),this.rendererFactory=t,this.rendererFactory.init(this)},t.prototype.getRendererFactory=function(){var t;if(null!=this.parent){for(t=this.parent;null!=t.parent;)t=t.parent;return t.lwf.rendererFactory}return this.rendererFactory},t.prototype.setFrameRate=function(t){0!==t&&(this.frameRate=t,this.tick=1/this.frameRate,this.isLWFAttached&&this.rootMovie.setFrameRate(t))},t.prototype.setPreferredFrameRate=function(t,e){null==e&&(e=2),0!==t&&(this.execLimit=Math.ceil(this.frameRate/t)+e)},t.prototype.fitForHeight=function(t,e){X.fitForHeight(this,t,e)},t.prototype.fitForWidth=function(t,e){X.fitForWidth(this,t,e)},t.prototype.scaleForHeight=function(t,e){X.scaleForHeight(this,t,e)},t.prototype.scaleForWidth=function(t,e){X.scaleForWidth(this,t,e)},t.prototype.setTextScale=function(t){this.textScale=t},t.prototype.setFont=function(t,e){this.rendererFactory.setFont(t,e)},t.prototype.getStageSize=function(){var t;return t=this.rendererFactory.getStageSize(),{width:t[0],height:t[1]}},t.prototype.renderOffset=function(){this.renderingIndexOffsetted=0},t.prototype.clearRenderOffset=function(){this.renderingIndexOffsetted=this.renderingIndex},t.prototype.renderObject=function(t){return null==t&&(t=1),this.renderingIndex+=t,this.renderingIndexOffsetted+=t,this.renderingIndex},t.prototype.beginBlendMode=function(t){null!=this.parent?this.parent.lwf.beginBlendMode(t):(this.blendModes.unshift(t),this.rendererFactory.setBlendMode(t))},t.prototype.endBlendMode=function(){null!=this.parent?this.parent.lwf.endBlendMode():(this.blendModes.shift(),this.rendererFactory.setBlendMode(0<this.blendModes.length?this.blendModes[0]:"normal"))},t.prototype.beginMaskMode=function(t){null!=this.parent?this.parent.lwf.beginMaskMode(t):(this.maskModes.unshift(t),this.rendererFactory.setMaskMode(t))},t.prototype.endMaskMode=function(){null!=this.parent?this.parent.lwf.endMaskMode():(this.maskModes.shift(),this.rendererFactory.setMaskMode(0<this.maskModes.length?this.maskModes[0]:"normal"))},t.prototype.setAttachVisible=function(t){this.attachVisible=t},t.prototype.clearFocus=function(t){this.focus===t&&(this.focus=null)},t.prototype.clearPressed=function(t){this.pressed===t&&(this.pressed=null)},t.prototype.clearIntercepted=function(){this.intercepted=!1},t.prototype.init=function(){this.progress=this.time=0,this.instances=[],this.pressed=this.focus=null,this.movieCommands={},this.rootMovieStringId=this.getStringId("_root"),null!=this.rootMovie&&this.rootMovie.destroy(),this.rootMovie=new k(this,null,this.data.header.rootMovieId,this.searchInstanceId(this.rootMovieStringId))},t.prototype.calcMatrix=function(t){var e;return e=this.property,e.hasMatrix?null!=t?X.calcMatrix(this.matrix,t,e.matrix):e.matrix:null!=t?t:this.matrixIdentity},t.prototype.calcColorTransform=function(t){var e;return e=this.property,e.hasColorTransform?null!=t?X.calcColorTransform(this,this.colorTransform,t,e.colorTransform):e.colorTransform:null!=t?t:this.colorTransformIdentity},t.prototype.linkButton=function(){this.buttonHead=null,this.interactive&&this.rootMovie.hasButton&&(this.focusOnLink=!1,this.rootMovie.linkButton(),null===this.focus||this.focusOnLink||(this.focus.rollOut(),this.focus=null))},t.prototype.execInternal=function(t){var e,i,r,s,n,o,a;if(null==this.rootMovie||!this.active)return 0;if(r=!1,e=this.progress,this.isExecDisabled&&null===this._tweens)this.executedForExecDisabled||(++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(!0),r=this.executedForExecDisabled=!0);else{if(n=!0,0===t?this.progress=this.tick:0>t?(this.progress=this.tick,n=!1):0===this.time?(this.time+=this.tick,this.progress+=this.tick):(this.time+=t,this.progress+=t),s=this.execHandlers,null!=s)for(o=0,a=s.length;a>o;o++)i=s[o],i.call(this);for(i=this.execLimit;this.progress>=this.tick-this.roundOffTick;){if(0>--i){this.progress=0;break}if(this.progress-=this.tick,++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(n),r=!0,!this.frameSkip)break}this.progress<this.roundOffTick&&(this.progress=0),this.linkButton()}return this.isLWFAttached&&(n=this.rootMovie.execAttachedLWF(t,e))&&this.linkButton(),this.needsUpdate=!1,!this.fastForward&&(r||this.isPropertyDirty||this.needsUpdateForAttachLWF)&&(this.needsUpdate=!0),!this.execDisabled&&0>t&&(this.progress=e),this.renderingCount},t.prototype.exec=function(t,e,i){var r,s,n;
for(null==t&&(t=0),null==e&&(e=null),null==i&&(i=null),r=!1,null!=e&&(r|=this.execMatrix.setWithComparing(e)),null!=i&&(r|=this.execColorTransform.setWithComparing(i)),null==this.parent&&(this.fastForwardCurrent=this.fastForward)&&(t=this.tick,n=Date.now());(s=this.execInternal(t),(r|=this.needsUpdate)&&this.update(e,i),this.isLWFAttached&&this.rootMovie.updateAttachedLWF(),r&&this.rootMovie.postUpdate(),this.fastForwardCurrent&&this.fastForward&&null==this.parent)&&!(Date.now()-n>=this.fastForwardTimeout););return s},t.prototype.forceExec=function(t,e){return null==t&&(t=null),null==e&&(e=null),this.exec(0,t,e)},t.prototype.forceExecWithoutProgress=function(t,e){return null==t&&(t=null),null==e&&(e=null),this.exec(-1,t,e)},t.prototype.update=function(t,e){var i,r;null==t&&(t=null),null==e&&(e=null),r=this.calcMatrix(t),i=this.calcColorTransform(e),this.renderingIndexOffsetted=this.renderingIndex=0,this.rootMovie.update(r,i),this.renderingCount=this.renderingIndex,this.needsUpdateForAttachLWF=this.isPropertyDirty=!1},t.prototype.render=function(e,i,r){return null==e&&(e=0),null==i&&(i=0),null==r&&(r=Number.MIN_VALUE),null==this.rootMovie||!this.active||this.fastForwardCurrent?0:(this.renderCount=++t.globalRenderCount,i>0&&(this.renderingCount=i),this.renderingIndexOffsetted=this.renderingIndex=e,this.property.hasRenderingOffset&&(this.renderOffset(),r=this.property.renderingOffset),this.rendererFactory.beginRender(this),this.rootMovie.render(this.attachVisible,r),this.rendererFactory.endRender(this),this.renderingIndex-e)},t.prototype.inspect=function(t,e,i,r,s,n){return null==e&&(e=0),null==i&&(i=0),null==r&&(r=0),null==s&&(s=0),null==n&&(n=Number.MIN_VALUE),s>0&&(this.renderingCount=s),this.renderingIndexOffsetted=this.renderingIndex=r,this.property.hasRenderingOffset&&(this.renderOffset(),n=this.property.renderingOffset),this.rootMovie.inspect(t,e,i,n),this.renderingIndex-r},t.prototype.destroy=function(){var t,e,i,r;if(null!=this.rootMovie){null!=this.stopTweens&&this.stopTweens(),r=this.loadedLWFs;for(t in r)e=r[t],e.destroy();this.loadedLWFs=null,this.rootMovie.destroy(),this.rootMovie=null,t=null!=(i=this.functions)?i.destroy:void 0,null!=t&&t.call(this),this.functions=null,null!=this.rendererFactory&&(i=this.rendererFactory.resourceCache,null!=i&&i.unloadLWF(this),this.rendererFactory.destruct(),this.rendererFactory=null),this.programObjectConstructors=this.movieCommands=this.buttonEventHandlers=this.movieEventHandlers=this.genericEventHandlers=this.eventHandlers=this.execHandlers=this.instances=this.buttonHead=this.property=null}},t.prototype.getInstanceNameStringId=function(t){return 0>t||t>=this.data.instanceNames.length?-1:this.data.instanceNames[t].stringId},t.prototype.getStringId=function(t){return t=this.data.stringMap[t],null!=t?t:-1},t.prototype.searchInstanceId=function(t){return 0>t||t>=this.data.strings.length?-1:(t=this.data.instanceNameMap[t],null!=t?t:-1)},t.prototype.searchFrame=function(t,e){var i;return"string"==typeof e&&(e=this.getStringId(e)),0>e||e>=this.data.strings.length?-1:(i=this.data.labelMap[t.objectId][e],null!=i?i+1:-1)},t.prototype.getMovieLabels=function(t){return null==t?null:this.data.labelMap[t.objectId]},t.prototype.searchMovieLinkage=function(t){return 0>t||t>=this.data.strings.length?-1:(t=this.data.movieLinkageMap[t],null!=t?this.data.movieLinkages[t].movieId:-1)},t.prototype.getMovieLinkageName=function(t){return t=this.data.movieLinkageNameMap[t],null!=t?this.data.strings[t]:null},t.prototype.searchMovieInstance=function(t){var e,i,r,s;if("string"==typeof t){if(e=t,-1!==e.indexOf(".")){if(i=e.split("."),i[0]!==this.data.strings[this.rootMovieStringId])return null;for(t=this.rootMovie,r=0,s=i.length;s>r;r++)if(e=i[r],t=t.searchMovieInstance(e,!1),null==t)return null;return t}t=this.getStringId(t)}return this.searchMovieInstanceByInstanceId(this.searchInstanceId(t))},t.prototype.searchMovieInstanceByInstanceId=function(t){if("string"==typeof t&&(t=this.searchInstanceId(this.getStringId(t))),0>t||t>=this.data.instanceNames.length)return null;for(t=this.instances[t];null!=t;){if(t.isMovie)return t;t=t.nextInstance}return null},t.prototype.searchButtonInstance=function(t){var e,i,r,s;if("string"==typeof t){if(e=t,-1!==e.indexOf(".")){if(i=e.split("."),i[0]!==this.data.strings[this.rootMovieStringId])return null;for(e=this.rootMovie,t=r=1,s=i.length;s>=1?s>r:r>s;t=s>=1?++r:--r){if(t===i.length-1)return e.searchButtonInstance(i[t],!1);if(e=e.searchButtonInstance(i[t],!1),null==e)break}return null}t=this.getStringId(t)}return this.searchButtonInstanceByInstanceId(this.searchInstanceId(t))},t.prototype.searchButtonInstanceByInstanceId=function(t){if("string"==typeof t&&(t=this.searchInstanceId(this.getStringId(t))),0>t||t>=this.data.instanceNames.length)return null;for(t=this.instances[t];null!=t;){if(t.isButton)return t;t=t.nextInstance}return null},t.prototype.searchEventId=function(t){return"string"==typeof t&&(t=this.getStringId(t)),0>t||t>=this.data.strings.length?-1:(t=this.data.eventMap[t],null!=t?t:-1)},t.prototype.searchProgramObjectId=function(t){return"string"==typeof t&&(t=this.getStringId(t)),0>t||t>=this.data.strings.length?-1:(t=this.data.programObjectMap[t],null!=t?t:-1)},t.prototype.getInstance=function(t){return this.instances[t]},t.prototype.setInstance=function(t,e){this.instances[t]=e},t.prototype.addExecHandler=function(t){null==this.execHandlers&&(this.execHandlers=[]),this.execHandlers.push(t)},t.prototype.removeExecHandler=function(t){var e,i;if(e=this.execHandlers,null!=e)for(i=0;i<e.length;)e[i]===t?e.splice(i,1):++i},t.prototype.clearExecHandler=function(){this.execHandlers=null},t.prototype.setExecHandler=function(t){this.clearExecHandler(),this.addExecHandler(t)},t.prototype.addEventHandler=function(t,e){var i,r,s;i="string"==typeof t?this.searchEventId(t):t,0>i||i>=this.data.events.length?(null==(r=this.genericEventHandlers)[t]&&(r[t]=[]),this.genericEventHandlers[t].push(e)):(null==(s=this.eventHandlers)[i]&&(s[i]=[]),this.eventHandlers[i].push(e))},t.prototype.removeEventHandler=function(t,e){var i,r,s,n,o;if(i="string"==typeof t?this.searchEventId(t):t,0>i||i>=this.data.events.length){if(r=this.genericEventHandlers[t],null!=r){i=[];for(s in r)n=r[s],n===e&&i.push(s);for(n=0,o=i.length;o>n;n++)s=i[n],delete r[s]}}else if(r=this.eventHandlers[i],null!=r){for(s=0;s<r.length;)r[s]===e?r.splice(s,1):++s;0===r.length&&delete this.eventHandlers[i]}},t.prototype.clearEventHandler=function(t){var e;e="string"==typeof t?this.searchEventId(t):t,0>e||e>=this.data.events.length?this.genericEventHandlers[t]=null:this.eventHandlers[e]=null},t.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},t.prototype.getProgramObjectConstructor=function(t){return"string"==typeof t&&(t=this.searchProgramObjectId(this.getStringId(t))),0>t||t>=this.data.programObjects.length?null:this.programObjectConstructors[t]},t.prototype.setProgramObjectConstructor=function(t,e){"string"==typeof t&&(t=this.searchProgramObjectId(this.getStringId(t))),0>t||t>=this.data.programObjects.length||(this.programObjectConstructors[t]=e)},t.prototype.getMovieEventHandlers=function(t){var e;return"string"==typeof t?(e=this.searchInstanceId(this.getStringId(t)),e>=0&&e<this.data.instanceNames.length?this.movieEventHandlers[e]:null==this.movieEventHandlersByFullName?null:this.movieEventHandlersByFullName[t]):null!=this.movieEventHandlersByFullName&&(e=t.getFullName(),null!=e&&(e=this.movieEventHandlersByFullName[e],null!=e))?e:this.movieEventHandlers[t.instanceId]},t.prototype.addMovieEventHandler=function(t,e){var i,r;if(r=this.searchInstanceId(this.getStringId(t)),r>=0&&r<this.data.instanceNames.length)i=this.movieEventHandlers[r],null==i&&(i=new O,this.movieEventHandlers[r]=i),r=this.searchMovieInstanceByInstanceId(r);else{if(-1===t.indexOf("."))return;null==this.movieEventHandlersByFullName&&(this.movieEventHandlersByFullName=[]),i=this.movieEventHandlersByFullName[t],null==i&&(i=new O,this.movieEventHandlersByFullName[t]=i),r=this.searchMovieInstance(t)}i.add(e),null!=r&&r.setHandlers(i)},t.prototype.removeMovieEventHandler=function(t,e){var i;i=this.getMovieEventHandlers(t),null!=i&&i.remove(e),i=this.searchMovieInstance(t),null!=i&&i.handler.remove(e)},t.prototype.clearMovieEventHandler=function(t,e){var i;null==e&&(e=null),i=this.getMovieEventHandlers(t),null!=i&&i.clear(e),i=this.searchMovieInstance(t),null!=i&&i.handler.clear(e)},t.prototype.setMovieEventHandler=function(t,e){this.clearMovieEventHandler(t),this.addMovieEventHandler(t,e)},t.prototype.getButtonEventHandlers=function(t){var e;return"string"==typeof t?(e=this.searchInstanceId(this.getStringId(t)),e>=0&&e<this.data.instanceNames.length?this.buttonEventHandlers[e]:null==this.buttonEventHandlersByFullName?null:this.buttonEventHandlersByFullName[t]):null!=this.buttonEventHandlersByFullName&&(e=t.getFullName(),null!=e&&(e=this.buttonEventHandlersByFullName[e],null!=e))?e:this.buttonEventHandlers[t.instanceId]},t.prototype.addButtonEventHandler=function(t,e){var i,r;if(this.setInteractive(),i=this.searchInstanceId(this.getStringId(t)),i>=0&&i<this.data.instanceNames.length)r=this.buttonEventHandlers[i],null==r&&(r=new a,this.buttonEventHandlers[i]=r),i=this.searchButtonInstanceByInstanceId(i);else{if(-1===t.indexOf("."))return;null==this.buttonEventHandlersByFullName&&(this.buttonEventHandlersByFullName=[]),r=this.buttonEventHandlersByFullName[t],null==r&&(r=new a,this.buttonEventHandlersByFullName[t]=r),i=this.searchButtonInstance(t)}r.add(e),null!=i&&i.setHandlers(r)},t.prototype.removeButtonEventHandler=function(t,e){var i;i=this.getButtonEventHandlers(t),null!=i&&i.remove(e),i=this.searchButtonInstance(t),null!=(null!=i?i.handler:void 0)&&i.handler.remove(e)},t.prototype.clearButtonEventHandler=function(t,e){var i;null==e&&(e=null),i=this.getButtonEventHandlers(t),null!=i&&i.clear(e),i=this.searchButtonInstance(t),null!=("undefined"!=typeof buffon&&null!==buffon?buffon.handler:void 0)&&i.handler.clear(e)},t.prototype.setButtonEventHandler=function(t,e){this.clearButtonEventHandler(t),this.addButtonEventHandler(t,e)},t.prototype.setMovieLoadCommand=function(t,e){var i,r;r=this.searchMovieInstance(t),null!=r?e.call(r):(i={load:function(){return this.lwf.removeMovieEventHandler(t,i),e.call(this)}},this.addMovieEventHandler(t,i))},t.prototype.setMoviePostLoadCommand=function(t,e){var i,r;r=this.searchMovieInstance(t),null!=r?e.call(r):(i={postLoad:function(){return this.lwf.removeMovieEventHandler(t,i),e.call(this)}},this.addMovieEventHandler(t,i))},t.prototype.playMovie=function(t){this.setMovieLoadCommand(t,function(){return this.play()})},t.prototype.stopMovie=function(t){this.setMovieLoadCommand(t,function(){return this.stop()})},t.prototype.nextFrameMovie=function(t){this.setMovieLoadCommand(t,function(){return this.nextFrame()})},t.prototype.prevFrameMovie=function(t){this.setMovieLoadCommand(t,function(){return this.prevFrame()})},t.prototype.setVisibleMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.setVisible(e)})},t.prototype.gotoAndStopMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndStop(e)})},t.prototype.gotoAndStopMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndStop(e)})},t.prototype.gotoAndPlayMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndPlay(e)})},t.prototype.gotoAndPlayMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndPlay(e)})},t.prototype.moveMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.move(e,i)})},t.prototype.moveToMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.moveTo(e,i)})},t.prototype.rotateMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.rotate(e)})},t.prototype.rotateToMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.rotateTo(e)})},t.prototype.scaleMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.scale(e,i)})},t.prototype.scaleToMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.scaleTo(e,i)})},t.prototype.setMatrixMovie=function(t,e,i,r,s){null==i&&(i=1),null==r&&(r=1),null==s&&(s=0),this.setMovieLoadCommand(t,function(){return this.setMatrix(e,i,r,s)})},t.prototype.setAlphaMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.setAlpha(e)})},t.prototype.setColorTransformMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.setColorTransform(e)})},t.prototype.execMovieCommand=function(){var t,e,i,r,s,n,o,a,h;e=[],h=this.movieCommands;for(i in h){for(n=h[i],t=!0,r=this.rootMovie,o=0,a=i.length;a>o;o++)if(s=i[o],r=r.searchMovieInstance(s),null==r){t=!1;break}t&&(n(r),e.push(i))}for(t=0,r=e.length;r>t;t++)i=e[t],delete this.movieCommands[i]},t.prototype.setMovieCommand=function(t,e){var i;i=t.slice(0),this.movieCommands[i]=e,this.execMovieCommand()},t.prototype.searchAttachedMovie=function(t){return this.rootMovie.searchAttachedMovie(t)},t.prototype.searchAttachedLWF=function(t){return this.rootMovie.searchAttachedLWF(t)},t.prototype.addAllowButton=function(t){return t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(null==this.allowButtonList&&(this.allowButtonList={}),this.allowButtonList[t]=!0)},t.prototype.removeAllowButton=function(t){return null==this.allowButtonList?!1:(t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(delete this.allowButtonList[t],!0))},t.prototype.clearAllowButton=function(){this.allowButtonList=null},t.prototype.addDenyButton=function(t){return t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(null==this.denyButtonList&&(this.denyButtonList={}),this.denyButtonList[t]=!0)},t.prototype.denyAllButtons=function(){var t,e,i;for(null==this.denyButtonList&&(this.denyButtonList={}),t=e=0,i=this.data.instanceNames.length;i>=0?i>e:e>i;t=i>=0?++e:--e)this.denyButtonList[t]=!0},t.prototype.removeDenyButton=function(t){return null==this.denyButtonList?!1:(t=this.searchInstanceId(this.getStringId(t)),0>t?!1:(delete this.denyButtonList[t],!0))},t.prototype.clearDenyButton=function(){this.denyButtonList=null},t.prototype.disableExec=function(){this.isExecDisabled=!0,this.executedForExecDisabled=!1},t.prototype.enableExec=function(){this.isExecDisabled=!1},t.prototype.setPropertyDirty=function(){this.isPropertyDirty=!0,null!=this.parent&&this.parent.lwf.setPropertyDirty()},t.prototype.setParent=function(t){var e;this.active=!0,this.parent=t,this.rootMovie.parent=t,this.setTextScale(t.lwf.textScale),t=null!=(e=this.functions)?e.init:void 0,null!=t&&t.call(this.rootMovie)},t.prototype.setInteractive=function(){this.interactive=!0,null!=this.parent&&this.parent.lwf.setInteractive()},t.prototype.setFrameSkip=function(t){this.frameSkip=t,this.progress=0,null!=this.parent&&this.parent.lwf.setFrameSkip(t)},t.prototype.setLWFAttached=function(){this.needsUpdateForAttachLWF=this.isLWFAttached=!0,null!=this.parent&&this.parent.lwf.setLWFAttached()},t.prototype.setFastForwardTimeout=function(t){this.fastForwardTimeout=t},t.prototype.setFastForward=function(t){this.fastForward=t,null!=this.parent&&this.parent.lwf.setFastForward(t)},t.prototype.getMovieFunctions=function(t){var e,i,r,s,n;return i=this.getMovieLinkageName(t),t=null!=(r=this.functions)?r[i+"_load"]:void 0,r=null!=(s=this.functions)?s[i+"_postLoad"]:void 0,s=null!=(e=this.functions)?e[i+"_unload"]:void 0,e=null!=(n=this.functions)?n[i+"_enterFrame"]:void 0,[t,r,s,e]},t.prototype.playAnimation=function(t,e,r){var s,n,o,a,h,l,c,u;for(o=0,t=this.data.animations[t],a=e;;)switch(s=t[o++]){case i.END:return;case i.PLAY:a.play();break;case i.STOP:a.stop();break;case i.NEXTFRAME:a.nextFrame();break;case i.PREVFRAME:a.prevFrame();break;case i.GOTOFRAME:a.gotoFrameInternal(t[o++]);break;case i.GOTOLABEL:a.gotoFrame(this.searchFrame(a,t[o++]));break;case i.SETTARGET:if(a=e,s=t[o++],0!==s)for(h=0;s>=0?s>h:h>s;s>=0?++h:--h)switch(n=t[o++]){case i.INSTANCE_TARGET_ROOT:a=this.rootMovie;break;case i.INSTANCE_TARGET_PARENT:a=a.parent,null==a&&(a=this.rootMovie);break;default:a=a.searchMovieInstanceByInstanceId(n,!1),null==a&&(a=e)}break;case i.EVENT:if(s=t[o++],n=null!=(c=this.eventHandlers[s])?c.slice(0):void 0,null!=n)for(h=0,l=n.length;l>h;h++)s=n[h],s(e,r);break;case i.CALL:s=t[o++],s=null!=(u=this.functions)?u[this.data.strings[s]]:void 0,null!=s&&s.call(e)}},t.prototype.dispatchEvent=function(t,e,i){var r,s,n;if(null==e&&(e=this.rootMovie),null==i&&(i=null),r="string"==typeof t?this.searchEventId(t):t,r=0>r||r>=this.data.events.length?this.genericEventHandlers[t]:this.eventHandlers[r],null==r)return!1;var o;for(o=[],s=0,n=r.length;n>s;s++)t=r[s],o.push(t);for(r=o,s=0,n=r.length;n>s;s++)t=r[s],null!=t&&t(e,i);return!0},t.prototype.inputPoint=function(t,e){var i,r;if(null==this.rootMovie)return null;if(this.intercepted=!1,!this.interactive)return null;for(this.pointX=t,this.pointY=e,r=!1,i=this.buttonHead;null!=i;){if(i.checkHit(t,e)){if(null!=this.allowButtonList){if(null==this.allowButtonList[i.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}i=i.buttonLink;continue}}else if(null!=this.denyButtonList&&null!=this.denyButtonList[i.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}i=i.buttonLink;continue}r=!0,this.focus!==i&&(null!=this.focus&&this.focus.rollOut(),this.focus=i,this.focus.rollOver());break}i=i.buttonLink}return r||null==this.focus||(this.focus.rollOut(),this.focus=null),this.focus},t.prototype.inputPress=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!0,null!=this.focus&&(this.pressed=this.focus,this.focus.press()))},t.prototype.inputRelease=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!1,null!=this.focus&&this.pressed===this.focus&&(this.focus.release(),this.pressed=null))},t.prototype.inputKeyPress=function(t){var e;if(null!=this.rootMovie&&this.interactive)for(e=this.buttonHead;null!=e;)e.keyPress(t),e=e.buttonLink},t}(),"undefined"!=typeof global&&(null==global.LWF&&(global.LWF={}),global.LWF.BitmapClip=s,global.LWF.Color=_,global.LWF.ColorTransform=g,global.LWF.Format=L,global.LWF.LWF=w,global.LWF.Loader=T,global.LWF.Matrix=P,global.LWF.Movie=k,global.LWF.Point=D,global.LWF.Property=W),w.prototype.addAllowButton=w.prototype.addAllowButton,w.prototype.addButtonEventHandler=w.prototype.addButtonEventHandler,w.prototype.addButtonEventListener=w.prototype.addButtonEventHandler,w.prototype.addDenyButton=w.prototype.addDenyButton,w.prototype.addEventHandler=w.prototype.addEventHandler,w.prototype.addEventListener=w.prototype.addEventHandler,w.prototype.addExecHandler=w.prototype.addExecHandler,w.prototype.addExecListener=w.prototype.addExecHandler,w.prototype.addMovieEventHandler=w.prototype.addMovieEventHandler,w.prototype.addMovieEventListener=w.prototype.addMovieEventHandler,w.prototype.clearAllowButton=w.prototype.clearAllowButton,w.prototype.clearButtonEventHandler=w.prototype.clearButtonEventHandler,w.prototype.clearButtonEventListener=w.prototype.clearButtonEventHandler,w.prototype.clearDenyButton=w.prototype.clearDenyButton,w.prototype.clearEventHandler=w.prototype.clearEventHandler,w.prototype.clearEventListener=w.prototype.clearEventHandler,w.prototype.clearExecHandler=w.prototype.clearExecHandler,w.prototype.clearExecListener=w.prototype.clearExecHandler,w.prototype.clearMovieEventHandler=w.prototype.clearMovieEventHandler,w.prototype.clearMovieEventListener=w.prototype.clearMovieEventHandler,w.prototype.denyAllButtons=w.prototype.denyAllButtons,w.prototype.destroy=w.prototype.destroy,w.prototype.dispatchEvent=w.prototype.dispatchEvent,w.prototype.exec=w.prototype.exec,w.prototype.fitForHeight=w.prototype.fitForHeight,w.prototype.fitForWidth=w.prototype.fitForWidth,w.prototype.forceExec=w.prototype.forceExec,w.prototype.forceExecWithoutProgress=w.prototype.forceExecWithoutProgress,w.prototype.getStageSize=w.prototype.getStageSize,w.prototype.getStringId=w.prototype.getStringId,w.prototype.gotoAndPlayMovie=w.prototype.gotoAndPlayMovie,w.prototype.gotoAndPlayMovie=w.prototype.gotoAndPlayMovie,w.prototype.gotoAndStopMovie=w.prototype.gotoAndStopMovie,w.prototype.gotoAndStopMovie=w.prototype.gotoAndStopMovie,w.prototype.init=w.prototype.init,w.prototype.inputKeyPress=w.prototype.inputKeyPress,w.prototype.inputPoint=w.prototype.inputPoint,w.prototype.inputPress=w.prototype.inputPress,w.prototype.inputRelease=w.prototype.inputRelease,w.prototype.inspect=w.prototype.inspect,w.prototype.moveMovie=w.prototype.moveMovie,w.prototype.moveToMovie=w.prototype.moveToMovie,w.prototype.nextFrameMovie=w.prototype.nextFrameMovie,w.prototype.playMovie=w.prototype.playMovie,w.prototype.prevFrameMovie=w.prototype.prevFrameMovie,w.prototype.removeAllowButton=w.prototype.removeAllowButton,w.prototype.removeButtonEventHandler=w.prototype.removeButtonEventHandler,w.prototype.removeButtonEventListener=w.prototype.removeButtonEventHandler,w.prototype.removeDenyButton=w.prototype.removeDenyButton,w.prototype.removeEventHandler=w.prototype.removeEventHandler,w.prototype.removeEventListener=w.prototype.removeEventHandler,w.prototype.removeExecHandler=w.prototype.removeExecHandler,w.prototype.removeExecListener=w.prototype.removeExecHandler,w.prototype.removeMovieEventHandler=w.prototype.removeMovieEventHandler,w.prototype.removeMovieEventListener=w.prototype.removeMovieEventHandler,w.prototype.render=w.prototype.render,w.prototype.rotateMovie=w.prototype.rotateMovie,w.prototype.rotateToMovie=w.prototype.rotateToMovie,w.prototype.scaleForHeight=w.prototype.scaleForHeight,w.prototype.scaleForWidth=w.prototype.scaleForWidth,w.prototype.scaleMovie=w.prototype.scaleMovie,w.prototype.scaleToMovie=w.prototype.scaleToMovie,w.prototype.searchAttachedLWF=w.prototype.searchAttachedLWF,w.prototype.searchAttachedMovie=w.prototype.searchAttachedMovie,w.prototype.searchEventId=w.prototype.searchEventId,w.prototype.searchFrame=w.prototype.searchFrame,w.prototype.searchProgramObjectId=w.prototype.searchProgramObjectId,w.prototype.setAlphaMovie=w.prototype.setAlphaMovie,w.prototype.setButtonEventHandler=w.prototype.setButtonEventHandler,w.prototype.setButtonEventListener=w.prototype.setButtonEventHandler,w.prototype.setColorTransformMovie=w.prototype.setColorTransformMovie,w.prototype.setEventHandler=w.prototype.setEventHandler,w.prototype.setEventListener=w.prototype.setEventHandler,w.prototype.setExecHandler=w.prototype.setExecHandler,w.prototype.setExecListener=w.prototype.setExecHandler,w.prototype.setFastForward=w.prototype.setFastForward,w.prototype.setFastForwardTimeout=w.prototype.setFastForwardTimeout,w.prototype.setFont=w.prototype.setFont,w.prototype.setFrameRate=w.prototype.setFrameRate,w.prototype.setFrameSkip=w.prototype.setFrameSkip,w.prototype.setMatrixMovie=w.prototype.setMatrixMovie,w.prototype.setMovieCommand=w.prototype.setMovieCommand,w.prototype.setMovieEventHandler=w.prototype.setMovieEventHandler,w.prototype.setMovieEventListener=w.prototype.setMovieEventHandler,w.prototype.setMovieLoadCommand=w.prototype.setMovieLoadCommand,w.prototype.setMoviePostLoadCommand=w.prototype.setMoviePostLoadCommand,w.prototype.setPreferredFrameRate=w.prototype.setPreferredFrameRate,w.prototype.setProgramObjectConstructor=w.prototype.setProgramObjectConstructor,w.prototype.setRendererFactory=w.prototype.setRendererFactory,w.prototype.setTextScale=w.prototype.setTextScale,w.prototype.setVisibleMovie=w.prototype.setVisibleMovie,w.prototype.stopMovie=w.prototype.stopMovie,T.load=T.load,b.prototype.check=b.prototype.check,b.prototype.name=b.prototype.name,f.prototype.getFullName=f.prototype.getFullName,o.prototype.addEventHandler=o.prototype.addEventHandler,o.prototype.addEventListener=o.prototype.addEventHandler,o.prototype.clearEventHandler=o.prototype.clearEventHandler,o.prototype.clearEventListener=o.prototype.clearEventHandler,o.prototype.removeEventHandler=o.prototype.removeEventHandler,o.prototype.removeEventListener=o.prototype.removeEventHandler,o.prototype.setEventHandler=o.prototype.setEventHandler,o.prototype.setEventListener=o.prototype.setEventHandler,k.prototype.addEventHandler=k.prototype.addEventHandler,k.prototype.addEventListener=k.prototype.addEventHandler,k.prototype.attachBitmap=k.prototype.attachBitmap,k.prototype.attachEmptyMovie=k.prototype.attachEmptyMovie,k.prototype.attachLWF=k.prototype.attachLWF,k.prototype.attachMovie=k.prototype.attachMovie,k.prototype.clearEventHandler=k.prototype.clearEventHandler,k.prototype.clearEventListener=k.prototype.clearEventHandler,k.prototype.detachBitmap=k.prototype.detachBitmap,k.prototype.detachFromParent=k.prototype.detachFromParent,k.prototype.detachLWF=k.prototype.detachLWF,k.prototype.detachMovie=k.prototype.detachMovie,k.prototype.dispatchEvent=k.prototype.dispatchEvent,k.prototype.getAttachedBitmap=k.prototype.getAttachedBitmap,k.prototype.getAttachedLWF=k.prototype.getAttachedLWF,k.prototype.getAttachedMovie=k.prototype.getAttachedMovie,k.prototype.getAttachedBitmaps=k.prototype.getAttachedBitmaps,k.prototype.getBounds=k.prototype.getBounds,k.prototype.globalToLocal=k.prototype.globalToLocal,k.prototype.gotoAndPlay=k.prototype.gotoAndPlay,k.prototype.gotoAndStop=k.prototype.gotoAndStop,k.prototype.gotoFrame=k.prototype.gotoFrame,k.prototype.gotoLabel=k.prototype.gotoLabel,k.prototype.inspect=k.prototype.inspect,k.prototype.localToGlobal=k.prototype.localToGlobal,k.prototype.move=k.prototype.move,k.prototype.moveTo=k.prototype.moveTo,k.prototype.nextEnterFrame=k.prototype.nextEnterFrame,k.prototype.nextFrame=k.prototype.nextFrame,k.prototype.override=k.prototype.override,k.prototype.play=k.prototype.play,k.prototype.prevFrame=k.prototype.prevFrame,k.prototype.removeEventHandler=k.prototype.removeEventHandler,k.prototype.removeEventListener=k.prototype.removeEventHandler,k.prototype.removeMovieClip=k.prototype.removeMovieClip,k.prototype.requestCalculateBounds=k.prototype.requestCalculateBounds,k.prototype.rotate=k.prototype.rotate,k.prototype.rotateTo=k.prototype.rotateTo,k.prototype.scale=k.prototype.scale,k.prototype.scaleTo=k.prototype.scaleTo,k.prototype.searchAttachedLWF=k.prototype.searchAttachedLWF,k.prototype.searchAttachedMovie=k.prototype.searchAttachedMovie,k.prototype.searchMovieInstance=k.prototype.searchMovieInstance,k.prototype.searchMovieInstanceByInstanceId=k.prototype.searchMovieInstanceByInstanceId,k.prototype.setAlpha=k.prototype.setAlpha,k.prototype.setColorTransform=k.prototype.setColorTransform,k.prototype.setEventHandler=k.prototype.setEventHandler,k.prototype.setEventListener=k.prototype.setEventHandler,k.prototype.setMatrix=k.prototype.setMatrix,k.prototype.setRenderingOffset=k.prototype.setRenderingOffset,k.prototype.setVisible=k.prototype.setVisible,k.prototype.stop=k.prototype.stop,k.prototype.swapAttachedLWFDepth=k.prototype.swapAttachedLWFDepth,k.prototype.swapAttachedMovieDepth=k.prototype.swapAttachedMovieDepth,k.prototype.swapDepths=k.prototype.swapDepths,W.prototype.clear=W.prototype.clear,W.prototype.move=W.prototype.move,W.prototype.moveTo=W.prototype.moveTo,W.prototype.rotate=W.prototype.rotate,W.prototype.rotateTo=W.prototype.rotateTo,W.prototype.scale=W.prototype.scale,W.prototype.scaleTo=W.prototype.scaleTo,W.prototype.setAlpha=W.prototype.setAlpha,W.prototype.setColorTransform=W.prototype.setColorTransform,W.prototype.setMatrix=W.prototype.setMatrix,P.prototype.clear=P.prototype.clear,P.prototype.set=P.prototype.set,_.prototype.set=_.prototype.set,g.prototype.clear=g.prototype.clear,g.prototype.set=g.prototype.set,s.prototype.detachFromParent=s.prototype.detachFromParent,s.prototype.setMatrix=s.prototype.setMatrix,V=function(){function t(t,e){this.factory=t,this.node=e,this.appended=!1,this.node.style.visibility="hidden",this.matrix=new P(0,0,0,0,0,0),this.matrixForDom=new P(0,0,0,0,0,0),this.matrixForRender=new P(0,0,0,0,0,0),this.zIndex=this.alpha=-1,this.visible=!1}return t.prototype.destructor=function(){this.appended&&this.factory.stage.parentNode.removeChild(this.node)},t.prototype.destruct=function(){this.factory.resourceCache.constructor===K?this.factory.destructRenderer(this):this.destructor()},t.prototype.update=function(){},t.prototype.render=function(t,e,i,r,s){if(this.visible===s){if(!1===s)return}else{if(this.visible=s,!1===s)return this.node.style.visibility="hidden",void 0;this.node.style.visibility="visible"}(this.matrix.setWithComparing(t)||!this.appended||this.alpha!==e.multi.alpha||this.zIndex!==i+r)&&(this.appended||(this.appended=!0,this.node.style.position="absolute",this.node.style.webkitTransformOrigin="0px 0px",this.node.style.display="block",this.factory.stage.parentNode.appendChild(this.node)),this.alpha=e.multi.alpha,this.zIndex=i+r,s=this.node.style,s.zIndex=this.zIndex,s.opacity=this.alpha,s.webkitTransform="none",r=this.factory.stage.getBoundingClientRect(),i=this.node.getBoundingClientRect(),e=this.factory.resourceCache.constructor===K?1:window.devicePixelRatio,t=this.matrixForDom,t.scaleX=1/e,t.scaleY=1/e,t.translateX=r.left-i.left,t.translateY=r.top-i.top,t=X.calcMatrix(this.matrixForRender,this.matrixForDom,this.matrix),s.webkitTransform=this.use3D?"matrix3d("+(""+t.scaleX+","+t.skew1+",0,0,")+(""+t.skew0+","+t.scaleY+",0,0,")+"0,0,1,0,"+(""+t.translateX+","+t.translateY+",0,1)"):"matrix("+(""+t.scaleX+","+t.skew1+","+t.skew0+","+t.scaleY+",")+(""+t.translateX+","+t.translateY+")"))},t}(),Y=function(){function t(){}return t.load=function(t){var e,i,r,s,n;if(null==t||"string"!=typeof t)return null;if(0===(255&t.charCodeAt(L.Constant.OPTION_OFFSET)&L.Constant.OPTION_COMPRESSED))return T.load(t);if("undefined"!=typeof Uint8Array){for(e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=s=0,n=t.length;n>=0?n>s:s>n;r=n>=0?++s:--s)i[r]=255&t.charCodeAt(r);return this.loadArrayBuffer(e)}for(e=Array(t.length),r=i=0,s=t.length;s>=0?s>i:i>s;r=s>=0?++i:--i)e[r]=255&t.charCodeAt(r);return this.loadArray(e)},t.loadArray=function(t){var e,i;if(null==t)return null;if(0===(t[L.Constant.OPTION_OFFSET]&L.Constant.OPTION_COMPRESSED))return T.loadArray(t);i=t.slice(0,L.Constant.HEADER_SIZE),t=t.slice(L.Constant.HEADER_SIZE);try{e=global.LWF.LZMA.decompressFile(t)}catch(r){return null}return t=i.concat(e),T.loadArray(t)},t.loadArrayBuffer=function(t){var e,i;if(null==t)return null;if(0===(new Uint8Array(t,L.Constant.OPTION_OFFSET,1)[0]&L.Constant.OPTION_COMPRESSED))return T.loadArrayBuffer(t);i=new Uint8Array(t.slice(0,L.Constant.HEADER_SIZE)),t=new Uint8Array(t.slice(L.Constant.HEADER_SIZE));try{e=global.LWF.LZMA.decompressFile(t),e=new Uint8Array(e)}catch(r){return null}return t=new Uint8Array(i.length+e.length),t.set(i,0),t.set(e,L.Constant.HEADER_SIZE),T.loadArrayBuffer(t.buffer)},t}(),K=function(){function t(){this.cache={},this.canvasIndex=this.lwfInstanceIndex=0}var e;return e=null,t.get=function(){return null!=e?e:e=new this},t.prototype.getRendererName=function(){return"WebkitCSS"},t.prototype.clear=function(){var t,e,i,r,s;r=this.cache;for(e in r)for(i in t=r[e],s=t.instances)t=s[i],t.destroy();return this.cache={}},t.prototype.getTextureURL=function(t,e,i){var r,s,n,o;return e=null!=(n=null!=(o=t.imagePrefix)?o:t.prefix)?n:"",n=null!=(s=t.imageSuffix)?s:"",s=null!=(r=t.imageQueryString)?r:"",0<s.length&&(s="?"+s),r=t.imageMap,i=i.filename,"function"==typeof r?(t=r.call(t,i),null!=t&&(i=t)):"object"==typeof r&&(t=r[i],null!=t&&(i=t)),i.match(/^\//)||i.match(/^https?:\/\//)||(i=e+i),i=i.replace(/(\.gif|\.png|\.jpg)/i,n+"$1"+s)},t.prototype.checkTextures=function(t,e){var i,r,s,n,o,a,h,l,c,u,p,d,f,m,y,_,g,v,M,I,b,x;for(t._alphaMap={},t._colorMap={},t._textures=[],l=/_atlas_(.*)_info_([0-9])_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)/i,p=/(.*)_rgb_([0-9a-f]{6})(.*)$/i,d=/(.*)_rgb_([0-9]*),([0-9]*),([0-9]*)(.*)$/i,f=/(.*)_rgba_([0-9a-f]{8})(.*)$/i,m=/(.*)_rgba_([0-9]*),([0-9]*),([0-9]*),([0-9]*)(.*)$/i,c=/(.*)_add_([0-9a-f]{6})(.*)$/i,u=/(.*)_add_([0-9]*),([0-9]*),([0-9]*)(.*)$/i,x=e.textures,I=0,b=x.length;b>I;I++)y=x[I],a=null,null!=(i=y.filename.match(p))?(a=i[1]+i[3],s="rgb",r=i[2]):null!=(i=y.filename.match(d))?(a=i[1]+i[5],s="rgb",h=parseInt(i[2],10).toString(16),n=parseInt(i[3],10).toString(16),r=parseInt(i[4],10).toString(16),r=(1===h.length?"0":"")+h+(1===n.length?"0":"")+n+(1===r.length?"0":"")+r):null!=(i=y.filename.match(f))?(a=i[1]+i[3],s="rgba",r=i[2]):null!=(i=y.filename.match(m))?(a=i[1]+i[6],s="rgba",h=parseInt(i[2],10).toString(16),n=parseInt(i[3],10).toString(16),r=parseInt(i[4],10).toString(16),i=parseInt(i[5],10).toString(16),r=(1===h.length?"0":"")+h+(1===n.length?"0":"")+n+(1===r.length?"0":"")+r+(1===i.length?"0":"")+i):null!=(i=y.filename.match(c))?(a=i[1]+i[3],s="add",r=i[2]):null!=(i=y.filename.match(u))&&(a=i[1]+i[5],s="add",h=parseInt(i[2],10).toString(16),n=parseInt(i[3],10).toString(16),r=parseInt(i[4],10).toString(16),r=(1===h.length?"0":"")+h+(1===n.length?"0":"")+n+(1===r.length?"0":"")+r),null!=a?(o=y.filename.match(l),null!=o?(a=o[1],i="1"===o[2]?!0:!1,h=parseInt(o[3],10),_=parseInt(o[4],10),g=parseInt(o[5],10),n=parseInt(o[6],10),v=parseInt(o[7],10),o=parseInt(o[8],10)):(i=!1,_=h=0,n=g=null,o=v=0),null==(M=t._colorMap)[a]&&(M[a]=[]),t._colorMap[a].push({filename:y.filename,colorOp:s,colorValue:r,rotated:i,u:h,v:_,w:g,h:n,x:v,y:o})):(t._textures.push(y),i=y.filename.match(/^(.*)_withalpha(.*\.)jpg(.*)$/i),null!=i&&(a=""+i[1]+"_alpha"+i[2]+"png"+i[3],a=new L.TextureReplacement(a),t._textures.push(a),t._alphaMap[y.filename]=[y,a],t._alphaMap[a.filename]=[y,a]))
},t.prototype.onloaddata=function(t,e,i){var r,s;null!=e&&e.check()?(t.name=e.name(),this.checkTextures(t,e),i=e.useScript&&null==(null!=(r=global.LWF)?null!=(s=r.Script)?s[e.name()]:void 0:void 0),this.cache[t.lwfUrl].data=e,t.total=t._textures.length+1,i&&t.total++,t.loadedCount=1,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),i?this.loadJS(t,e):this.loadImages(t,e)):(t.error.push({url:i,reason:"dataError"}),t.onload.call(t,null))},t.prototype.loadLWF=function(t){var e,i;return i=t.lwf,i.match(/^\//)||(i=(null!=(e=t.prefix)?e:"")+i),t.lwfUrl=i,t.error=[],null!=this.cache[i]&&(e=this.cache[i].data,null!=e)?(t.name=e.name(),this.checkTextures(t,e),t.total=t._textures.length+1,t.loadedCount=1,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),this.loadImages(t,e),void 0):(this.cache[i]={},this.loadLWFData(t,i),void 0)},t.prototype.dispatchOnloaddata=function(t,e,i,r,s,n){var o,a,h,l,c;if(i){for(h=null,a=document.getElementsByTagName("script"),i=/(^|.*\/lwf_cocos2d.js)$/i,o=l=0,c=a.length;c>=0?c>l:l>c;o=c>=0?++l:--l)if(""!==a[o].src&&(o=a[o].src.split("?")[0],o=o.match(i),null!=o)){h=o[1];break}null!=h&&function(i){return function(r){var o;return o=new Worker(r),o.onmessage=function(r){return n=new b(r.data),o=o.onmessage=o.onerror=null,i.onloaddata(t,n,e)},o.onerror=function(){return t.error.push({url:r,reason:"error"}),o=o.onmessage=o.onerror=null,t.onload.call(t,null)},s&&"base64"!==n.type?o.webkitPostMessage(n.data):o.postMessage(n.data)}}(this)(h)}if(null==h){if("base64"===n.type){try{n=global.LWF.Base64.atobArray(n.data),n=global.LWF.LZMA.decompressFile(n)}catch(u){n=null}n=Y.loadArray(n)}else n=r?Y.loadArrayBuffer(n.data):Y.load(n.data);this.onloaddata(t,n,e)}},t.prototype.loadLWFData=function(t,e){var i,r,s,n,o,a,h,l,c,u,p,d,f;o=t.onload,u=c=!1,"undefined"==typeof Worker||null!=t.worker&&!t.worker||(c=!0,"undefined"!=typeof Worker.prototype.webkitPostMessage&&(u=!0)),s=e.match(/([^\/]+)\.lwf\.js/i),null!=s?(n=s[1].toLowerCase(),h=null!=(d=global.LWF)?null!=(f=d.DataScript)?f[n]:void 0:void 0,null!=h?(i={type:"base64",data:h},this.dispatchOnloaddata(t,e,c,l,u,i)):(r=document.getElementsByTagName("head")[0],a=document.createElement("script"),a.type="text/javascript",a.charset="UTF-8",a.onabort=function(){return function(){return t.error.push({url:e,reason:"abort"}),r.removeChild(a),a=a.onload=a.onabort=a.onerror=null,o.call(t,null)}}(this),a.onerror=function(){return function(){return t.error.push({url:e,reason:"error"}),r.removeChild(a),a=a.onload=a.onabort=a.onerror=null,o.call(t,null)}}(this),a.onload=function(s){return function(){var p,d;return h=null!=(p=global.LWF)?null!=(d=p.DataScript)?d[n]:void 0:void 0,r.removeChild(a),a=a.onload=a.onabort=a.onerror=null,null!=h?(i={type:"base64",data:h},s.dispatchOnloaddata(t,e,c,l,u,i)):(t.error.push({url:e,reason:"error"}),o.call(t,null))}}(this),a.src=e,r.appendChild(a),s=t.lwfUrl,null==(d=this.cache[s]).scripts&&(d.scripts=[]),this.cache[s].scripts.push(a))):(p=new XMLHttpRequest,p.open("GET",e,!0),"string"!=typeof p.responseType||"undefined"==typeof Uint8Array||"undefined"==typeof Int32Array||"undefined"==typeof Float32Array||c&&!u?(l=!1,p.overrideMimeType("text/plain; charset=x-user-defined")):(l=!0,p.responseType="arraybuffer"),p.onabort=function(){return function(){return t.error.push({url:e,reason:"abort"}),p=p.onabort=p.onerror=p.onreadystatechange=null,o.call(t,null)}}(this),p.onerror=function(){return function(){return t.error.push({url:e,reason:"error"}),p=p.onabort=p.onerror=p.onreadystatechange=null,o.call(t,null)}}(this),p.onreadystatechange=function(r){return function(){var s,n;if(4===p.readyState){if(0===p.status)s=e.match(/^([a-zA-Z][a-zA-Z0-9\+\-\.]*\:)./i),s=null!=s?s[1]:"undefined"!=typeof global&&null!==global?null!=(n=global.location)?n.protocol:void 0:void 0,("http:"===s||"https:"===s)&&(t.error.push({url:e,reason:"networkError"}),p=p.onabort=p.onerror=p.onreadystatechange=null,o.call(t,null));else if(!(200<=p.status&&300>p.status))return t.error.push({url:e,reason:"error"}),p=p.onabort=p.onerror=p.onreadystatechange=null,o.call(t,null),void 0;return i=l?{type:"arraybuffer",data:p.response}:{type:"text",data:p.responseText},r.dispatchOnloaddata(t,e,c,l,u,i),p=p.onabort=p.onerror=p.onreadystatechange=null}}}(this),p.send(null))},t.prototype.loadJS=function(t,e){var i,r,s,n,o,a,h;i=t.lwfUrl,o=null!=(a=t.js)?a:t.lwf.replace(/\.lwf(\.js)?/i,".js"),o.match(/^\//)||(o=(null!=(h=t.prefix)?h:"")+o),r=t.onload,s=t.onprogress,n=document.createElement("script"),n.type="text/javascript",n.charset="UTF-8",n.onabort=function(e){return function(){return delete e.cache[i],t.error.push({url:o,reason:"abort"}),n=n.onload=n.onabort=n.onerror=null,r.call(t,null)}}(this),n.onerror=function(e){return function(){return delete e.cache[i],t.error.push({url:o,reason:"error"}),n=n.onload=n.onabort=n.onerror=null,r.call(t,null)}}(this),n.onload=function(i){return function(){return t.loadedCount++,null!=s&&s.call(t,t.loadedCount,t.total),n=n.onload=n.onabort=n.onerror=null,i.loadImages(t,e)}}(this),n.src=o,document.getElementsByTagName("head")[0].appendChild(n),null==(a=this.cache[i]).scripts&&(a.scripts=[]),this.cache[i].scripts.push(n)},t.prototype.loadImagesCallback=function(t,e,i){t.loadedCount++,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),t.loadedCount===t.total&&(delete t._alphaMap,delete t._colorMap,delete t._textures,0<t.error.length?(delete this.cache[t.lwf],t.onload.call(t,null)):this.newLWF(t,e,i))},t.prototype.drawImage=function(t,e,i,r,s,n,o){i.rotated?(i=new P,X.rotateMatrix(i,new P,1,0,n),t.setTransform(i.scaleX,i.skew1,i.skew0,i.scaleY,i.translateX,i.translateY)):t.setTransform(1,0,0,1,0,0),t.drawImage(e,r,s,n,o,0,0,n,o),t.setTransform(1,0,0,1,0,0)},t.prototype.getCanvasName=function(){return"__canvas__"+ ++this.canvasIndex},t.prototype.createCanvas=function(e,i){var r,s,n;return n=this.getCanvasName(),this.constructor===t?(s=document.getCSSCanvasContext("2d",n,e,i),r=s.canvas):(r=document.createElement("canvas"),r.width=e,r.height=i,s=r.getContext("2d")),r.name=n,[r,s]},t.prototype.generateImages=function(t,e,i,r){var s,n,o,a,h,l,c,u,p,d,f,m,y,_,g,v,M;if(l=t._colorMap[i.filename],null!=l)for(f=r.width/i.width,m=r.height/i.height,_=0,g=l.length;g>_;_++){switch(p=l[_],d=Math.round(p.u*f),s=Math.round(p.v*m),y=Math.round((null!=(v=p.w)?v:i.width)*f),u=Math.round((null!=(M=p.h)?M:i.height)*m),p.rotated?(c=u,n=y):(c=y,n=u),a=this.createCanvas(y,u),t=a[0],a=a[1],p.colorOp){case"rgb":a.fillStyle="#"+p.colorValue,a.fillRect(0,0,y,u),a.globalCompositeOperation="destination-in",this.drawImage(a,r,p,d,s,c,n);break;case"rgba":this.drawImage(a,r,p,d,s,c,n),a.globalCompositeOperation="source-atop",s=p.colorValue,d=parseInt(s.substr(0,2),16),c=parseInt(s.substr(2,2),16),n=parseInt(s.substr(4,2),16),s=parseInt(s.substr(6,2),16)/255,a.fillStyle="rgba("+d+", "+c+", "+n+", "+s+")",a.fillRect(0,0,y,u);break;case"add":o=document.createElement("canvas"),o.width=y,o.height=u,h=o.getContext("2d"),h.fillStyle="#"+p.colorValue,h.fillRect(0,0,y,u),h.globalCompositeOperation="destination-in",this.drawImage(h,r,p,d,s,c,n),this.drawImage(a,r,p,d,s,c,n),a.globalCompositeOperation="lighter",a.drawImage(o,0,0,o.width,o.height,0,0,o.width,o.height)}a.globalCompositeOperation="source-over",e[p.filename]=t}},t.prototype.loadImages=function(t,e){var i,r,s,n,o,a,h;if(i={},0===e.textures.length)this.newLWF(t,i,e);else for(h=t._textures,n=function(r){return function(s,n){var o;return o=new Image,o.onabort=function(){return t.error.push({url:n,reason:"abort"}),o=o.onload=o.onabort=o.onerror=null,r.loadImagesCallback(t,i,e)},o.onerror=function(){return t.error.push({url:n,reason:"error"}),o=o.onload=o.onabort=o.onerror=null,r.loadImagesCallback(t,i,e)},o.onload=function(){var n,a,h,l,c,u;return i[s.filename]=o,n=t._alphaMap[s.filename],null!=n?(c=n[0],n=n[1],u=i[c.filename],a=i[n.filename],null!=u&&null!=a&&(l=r.createCanvas(u.width,u.height),h=l[0],l=l[1],l.drawImage(u,0,0,u.width,u.height,0,0,u.width,u.height),l.globalCompositeOperation="destination-in",l.drawImage(a,0,0,a.width,a.height,0,0,u.width,u.height),l.globalCompositeOperation="source-over",delete i[c.filename],delete i[n.filename],i[c.filename]=h,r.generateImages(t,i,c,h))):r.generateImages(t,i,s,o),o=o.onload=o.onabort=o.onerror=null,r.loadImagesCallback(t,i,e)},o.src=n}}(this),o=0,a=h.length;a>o;o++)r=h[o],s=this.getTextureURL(t,e,r),n(r,s)},t.prototype.newFactory=function(t,e,i){var r,s,n,o;return new WebkitCSSRendererFactory(i,this,e,t.stage,null!=(r=t.textInSubpixel)?r:!1,null!=(s=t.use3D)?s:!0,null!=(n=t.recycleTextCanvas)?n:!0,null!=(o=t.quirkyClearRect)?o:!1)},t.prototype.onloadLWF=function(t,e){var i;i=e.rendererFactory,null!=t.setBackgroundColor?i.setBackgroundColor(t.setBackgroundColor):t.useBackgroundColor&&i.setBackgroundColor(e),t.fitForHeight?i.fitForHeight(e):t.fitForWidth&&i.fitForWidth(e),t.onload.call(t,e)},t.prototype.newLWF=function(t,e,i){var r,s,n,o;r=this.cache[t.lwfUrl],e=this.newFactory(t,e,i),i.useScript&&(s=null!=(n=global.LWF)?null!=(o=n.Script)?o[i.name()]:void 0:void 0),i=new w(i,e,s,t.privateData),null!=t.active&&(i.active=t.active),i.url=t.lwfUrl,i.lwfInstanceId=++this.lwfInstanceIndex,null==r.instances&&(r.instances={}),r.instances[i.lwfInstanceId]=i,r=t.parentLWF,null!=r&&(r.loadedLWFs[i.lwfInstanceId]=i),null!=t.preferredFrameRate&&(null!=t.execLimit?i.setPreferredFrameRate(t.preferredFrameRate,t.execLimit):i.setPreferredFrameRate(t.preferredFrameRate)),this.onloadLWF(t,i)},t.prototype.unloadLWF=function(t){var e,i,r,s,n,o,a,h,l;if(e=this.cache[t.url],null!=e){t.lwfInstanceId&&delete e.instances[t.lwfInstanceId],i=!0,h=e.instances;for(s in h){i=!1;break}if(i){try{if(null!=e.scripts)for(r=document.getElementsByTagName("head")[0],l=e.scripts,o=0,a=l.length;a>o;o++)n=l[o],r.removeChild(n)}catch(c){}delete this.cache[t.url]}}},t.prototype.loadLWFs=function(t,e){var i,r,s,n,o,a,h,l,c;for(r=t.length,s=0,i=null,a=function(){return function(t){return o.onload=function(n){return null!=t&&t(n),0<o.error.length&&(null==i&&(i=[]),i=i.concat(o.error)),++s,r===s?e(i):void 0}}}(this),c=[],h=0,l=t.length;l>h;h++)o=t[h],n=o.onload,a(n),c.push(this.loadLWF(o));return c},t.prototype.getCache=function(){return this.cache},t.prototype.setParticleConstructor=function(t){this.particleConstructor=t},t.prototype.setDOMElementConstructor=function(t){this.domElementConstructor=t},t}(),"undefined"!=typeof window&&null!==window||"undefined"==typeof self||null===self||(self.onmessage=function(t){if("undefined"!=typeof self.webkitPostMessage&&"object"==typeof t.data)t=Y.loadArrayBuffer(t.data),self.webkitPostMessage(t);else{if(t=t.data,"L"===t[0]&&"W"===t[1]&&"F"===t[2])t=Y.load(t);else{try{t=global.LWF.Base64.atobArray(t),t=global.LWF.LZMA.decompressFile(t)}catch(e){t=null}t=Y.loadArray(t)}"undefined"!=typeof self.webkitPostMessage?self.webkitPostMessage(t):self.postMessage(t)}return self.close()}),d=function(){function t(t,e,i,r){var s,n;for(this.resourceCache=e,this.cache=i,this.textInSubpixel=r,this.bitmapContexts=[],n=t.bitmaps,r=0,s=n.length;s>r;r++)i=n[r],-1!==i.textureFragmentId&&(e=new L.BitmapEx,e.matrixId=i.matrixId,e.textureFragmentId=i.textureFragmentId,e.u=0,e.v=0,e.w=1,e.h=1,this.bitmapContexts.push(new l(this,t,e)));for(this.bitmapExContexts=[],s=t.bitmapExs,i=0,r=s.length;r>i;i++)e=s[i],-1!==e.textureFragmentId&&this.bitmapExContexts.push(new l(this,t,e));for(this.textContexts=[],s=t.texts,i=0,r=s.length;r>i;i++)e=s[i],this.textContexts.push(new m(this,t,e));for(this.particleContexts=[],s=t.particles,i=0,r=s.length;r>i;i++)e=s[i],this.particleContexts.push(new u(this,t,e));this.lwfNode=null}return t.prototype.destruct=function(){var t,e,i,r;for(r=this.bitmapContexts,e=0,i=r.length;i>e;e++)t=r[e],t.destruct();for(r=this.bitmapExContexts,e=0,i=r.length;i>e;e++)t=r[e],t.destruct();for(r=this.textContexts,e=0,i=r.length;i>e;e++)t=r[e],t.destruct()},t.prototype.init=function(t){var e,i,r,s,n,o;if(!this.setupedDomElementConstructor){for(this.setupedDomElementConstructor=!0,n=t.data.programObjects,o=[],r=0,s=n.length;s>r;r++)e=n[r],i=t.data.strings[e.stringId],e=i.match(/^DOM_(.*)/),null!=e?(e=e[1],o.push(function(e){return function(r){return t.setProgramObjectConstructor(i,function(t,i,s,n){return i=e.resourceCache.domElementConstructor,null==i?null:(t=i(t,r,s,n),null==t?null:new V(e,t))})}}(this)(e))):o.push(void 0);return o}},t.prototype.beginRender=function(){},t.prototype.endRender=function(){},t.prototype.setBlendMode=function(){},t.prototype.setMaskMode=function(){},t.prototype.constructBitmap=function(t,e){return(t=this.bitmapContexts[e])?new c(t):void 0},t.prototype.constructBitmapEx=function(t,e){return(t=this.bitmapExContexts[e])?new c(t):void 0},t.prototype.constructText=function(t,e,i){return(e=this.textContexts[e])?new y(t,e,i):void 0},t.prototype.constructParticle=function(t,e){return(t=this.particleContexts[e])?new p(t):void 0},t.prototype.convertColor=function(t,e,i,r){X.calcColor(t,e,i,r),e.red=Math.round(255*e.red),e.green=Math.round(255*e.green),e.blue=Math.round(255*e.blue),e.alpha=Math.round(255*e.alpha)},t.prototype.getSize=function(){var t,e;return null!=this.lwfNode&&(t=this.lwfNode.getContentSize(),e=t.width,t=t.height),0===e&&0===t&&(t=cc.Director.getInstance().getWinSizeInPixels(),e=t.width,t=t.height),[e,t]},t.prototype.fitForHeight=function(t){var e,i;e=this.getSize(),i=e[0],e=e[1],0!==e&&e!==t.data.header.height&&t.fitForHeight(i,e)},t.prototype.fitForWidth=function(t){var e,i;e=this.getSize(),i=e[0],e=e[1],0!==i&&i!==t.data.header.width&&t.fitForWidth(i,e)},t.prototype.scaleForHeight=function(t){var e,i;e=this.getSize(),i=e[0],e=e[1],0!==e&&e!==t.data.header.height&&t.scaleForHeight(i,e)},t.prototype.scaleForWidth=function(t){var e,i;e=this.getSize(),i=e[0],e=e[1],0!==i&&i!==t.data.header.width&&t.scaleForWidth(i,e)},t.prototype.setBackgroundColor=function(t){"number"!=typeof t&&"string"==typeof t&&parseInt(t,16)},t}(),l=function(){function t(t,e,i){this.factory=t,this.data=e,this.fragment=e.textureFragments[i.textureFragmentId],e=e.textures[this.fragment.textureId],t=this.factory.cache[e.filename],this.texture2d=cc.TextureCache.getInstance().textureForKey(t),t=this.texture2d.getPixelsWide()/e.width,this.scale=1/(e.scale*t),this.fragment.rotated?(i=this.fragment.h,e=this.fragment.w):(i=this.fragment.w,e=this.fragment.h),this.imageHeight=this.fragment.h*t,this.rect=cc.rect(this.fragment.u,this.fragment.v,i,e)}return t.prototype.destruct=function(){},t}(),c=function(){function t(t){this.context=t,t=this.context.fragment,this.matrix=new P(0,0,0,0,0,0),(t.rotated||0!==t.x||0!==t.y||1!==this.context.scale)&&(this.matrixForAtlas=new P),this.bitmap=cc.LWFBitmap.lwfBitmapWithTexture(this.context.texture2d,this.context.rect),this.visible=!0,this.alpha=1,this.z=-1}return t.prototype.destruct=function(){this.bitmap.removeFromParent(!0)},t.prototype.render=function(t,e,i,r,s){var n,o;this.z!==i&&(-1===this.z?this.context.factory.lwfNode.addChild(this.bitmap,i):this.bitmap.getParent().reorderChild(this.bitmap,i),this.z=i),this.matrix.setWithComparing(t)&&(t=this.matrix,i=this.context.fragment,n=i.x,o=i.y,r=this.context.scale,i.rotated?t=X.rotateMatrix(this.matrixForAtlas,t,r,n,o+i.h):(1!==r||0!==n||0!==o)&&(t=X.scaleMatrix(this.matrixForAtlas,t,r,n,o)),this.bitmap.setMatrix(t)),(this.alpha!==e.multi.alpha||this.visible!==s)&&(this.alpha=e.multi.alpha,this.visible=s,this.bitmap.setOpacity(this.visible?255*this.alpha:0))},t}(),m=function(){function t(t,e,i){this.factory=t,this.data=e,this.text=i,this.str=this.data.strings[this.text.stringId],this.textProperty=this.data.textProperties[this.text.textPropertyId],t=this.data.fonts[this.textProperty.fontId],this.textColor=this.data.colors[this.text.colorId],this.name=this.data.strings[this.text.nameStringId],this.fontName='"'+this.data.strings[t.stringId]+'",sans-serif'}return t.prototype.destruct=function(){},t}(),y=function(){function e(e,i,r){var s;switch(this.lwf=e,this.context=i,this.textObject=r,this.str=null!=(s=this.textObject.parent[this.context.name])?s:this.context.str,null!=this.str&&(this.str=String(this.str)),this.matrix=new P(0,0,0,0,0,0),this.matrixForScale=new P,this.color=new _,this.color3B=cc.c3b(),this.context.textProperty.align&t.ALIGN_MASK){case t.RIGHT:e=cc.TEXT_ALIGNMENT_RIGHT;break;case t.CENTER:e=cc.TEXT_ALIGNMENT_CENTER;break;default:e=cc.TEXT_ALIGNMENT_LEFT}switch(this.context.textProperty.align&t.VERTICAL_MASK){case t.VERTICAL_BOTTOM:r=cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM;break;case t.VERTICAL_MIDDLE:r=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;break;default:r=cc.VERTICAL_TEXT_ALIGNMENT_TOP}i=this.lwf.textScale,this.label=cc.LWFLabel.create("",this.context.fontName,this.context.textProperty.fontHeight*i,cc.size(this.context.text.width*i,this.context.text.height*i),e,r),this.z=-1,this.textRendered=!1}return e.prototype.destruct=function(){this.label.removeFromParent(!0)},e.prototype.render=function(t,e,i,r,s){var n,o;s?(this.z!==i&&(-1===this.z?this.context.factory.lwfNode.addChild(this.label,i):this.label.getParent().reorderChild(this.label,i),this.z=i),o=this.color.red,n=this.color.green,s=this.color.blue,this.context.factory.convertColor(this.lwf,this.color,this.context.textColor,e),e=this.color3B,e.r=this.color.red,e.g=this.color.green,e.b=this.color.blue,r=this.color.alpha,i=!1,(o!==this.color.red||n!==this.color.green||s!==this.color.blue||r!==this.color.alpha)&&(this.label.setOpacity(r),i=!0),s=!1,r=this.textObject.parent[this.context.name],null!=r&&(r=String(r)),null!=r&&r!==this.str&&(s=!0,this.str=r),(!this.textRendered||i||s)&&this.renderText(e),this.matrix.setWithComparing(t)&&(t=X.scaleMatrix(this.matrixForScale,this.matrix,1/this.lwf.textScale,0,0),this.context.factory.textInSubpixel||(t.translateX=Math.round(t.translateX),t.translateY=Math.round(t.translateY)),this.label.setMatrix(t))):this.label.setOpacity(0)},e.prototype.renderText=function(t){this.textRendered=!0,this.label.setColor(t),this.label.setString(this.str)},e}(),u=function(){function t(t,e,i){this.factory=t,this.data=e,this.name=e.strings[e.particleDatas[i.particleDataId].stringId],this.plist=this.factory.resourceCache.particlePrefix+this.name+this.factory.resourceCache.particleSuffix}return t.prototype.destruct=function(){},t}(),p=function(){function t(t){this.context=t,this.matrix=new P,this.particle=cc.LWFParticle.create(this.context.plist),this.visible=!0,this.alpha=1,this.z=-1}return t.prototype.destruct=function(){return this.particle.removeFromParent(!0)},t.prototype.update=function(){},t.prototype.render=function(t,e,i,r,s){return this.z!==i&&(-1===this.z?this.context.factory.lwfNode.addChild(this.particle,i):this.particle.getParent().reorderChild(this.particle,i),this.z=i),this.matrix.setWithComparing(t)&&this.particle.setMatrix(this.matrix),this.alpha!==e.multi.alpha||this.visible!==s?(this.alpha=e.multi.alpha,this.visible=s,this.particle.setOpacity(this.visible?255*this.alpha:0)):void 0},t}(),f=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.particlePrefix="res/",this.particleSuffix=".plist"}return Z(e,t),e.prototype.loadLWFNode=function(t){t._loadLWF=!0,this.loadLWF(t)},e.prototype.loadLWFNodes=function(t,e){var i,r,s;for(r=0,s=t.length;s>r;r++)i=t[r],i._loadLWF=!0;this.loadLWFs(t,e)},e.prototype.newFactory=function(t,e,i){var r;return new d(i,this,e,null!=(r=t.textInSubpixel)?r:!1)},e.prototype.loadLWFData=function(t,e){var i;i=cc.FileUtils.getInstance().getByteArrayFromFile(e),i=T.loadArray(i),this.onloaddata(t,i,e)},e.prototype.onloadLWF=function(t,e){var i,r;null!=t._loadLWF?(r=cc.LWFNode.lwfNodeWithLWF(e),i=t.contentSize,null!=i&&r.setContentSize(i),i=e.rendererFactory,t.fitForHeight?i.fitForHeight(e):t.fitForWidth&&i.fitForWidth(e),delete t._loadLWF,t.onload.call(t,r)):t.onload.call(t,e)},e.prototype.loadJS=function(t,e){t.loadedCount++,this.loadImages(t,e)},e.prototype.onLoadImage=function(){var t,e,i;this.loadedCount++,null!=this.onprogress&&this.onprogress.call(this,this.loadedCount,this.total),this.loadedCount===this.total&&(t=this._cache,e=this._data,i=this._imageCache,delete this._cache,delete this._data,delete this._imageCache,t.newLWF(this,i,e))},e.prototype.loadImages=function(t,e){var i,r,s,n,o,a,h,l,c,u;for(s=null!=(n=null!=(a=t.imagePrefix)?a:t.prefix)?n:"",n=null!=(i=t.imageSuffix)?i:"",i={},t._cache=this,t._data=e,t._imageCache=i,l=e.textures,a=0,h=l.length;h>a;a++)o=l[a],r=o.filename,o=null!=(c=null!=(u=t.imageMap)?u[r]:void 0)?c:r,o.match(/^\//)||(o=s+o),o=o.replace(/(\.png|\.jpg)$/i,n+"$1"),i[r]=o,r=cc.TextureCache.getInstance(),r.addImageAsync(o,t,this.onLoadImage)},e.prototype.unloadLWF=function(t){var i,r;if(e.__super__.unloadLWF.call(this,t),null==this.cache[t.url])for(i in r=t.renderFactory.cache)t=r[i],t.match(/\.(png|jpg)$/i)&&cc.TextureCache.getInstance().removeTextureForKey(t)},e.prototype.setParticlePath=function(t,e){this.particlePrefix=t,this.particleSuffix=e},e}(K),"undefined"!=typeof global&&(global.LWF.Cocos2dRendererFactory=d,global.LWF.Cocos2dResourceCache=f,global.LWF.ResourceCache=f,"undefined"!=typeof cc&&(cc.LWF=global.LWF)),d.prototype.convertColor=d.prototype.convertColor,d.prototype.fitForHeight=d.prototype.fitForHeight,d.prototype.fitForWidth=d.prototype.fitForWidth,d.prototype.scaleForHeight=d.prototype.scaleForWidth,d.prototype.scaleForStage=d.prototype.scaleForWidth,d.prototype.setBackgroundColor=d.prototype.setBackgroundColor,f.prototype.clear=f.prototype.clear,f.prototype.getCache=f.prototype.getCache,f.prototype.loadLWF=f.prototype.loadLWF,f.prototype.loadLWFs=f.prototype.loadLWFs,f.prototype.unloadLWF=f.prototype.unloadLWF,f.prototype.setParticleConstructor=f.prototype.setParticleConstructor,f.prototype.setDOMElementConstructor=f.prototype.setDOMElementConstructor,"undefined"!=typeof cc&&null!==cc&&(Q=function(t){var e,i;return cc.renderContextType===cc.WEBGL?(e=t.skew0,i=t.skew1):(e=t.skew1,i=t.skew0),cc.AffineTransformMake(t.scaleX,-i,e,-t.scaleY,t.translateX,cc.Director.getInstance().getWinSizeInPixels().height-t.translateY)},cc.LWFBitmap=cc.Sprite.extend({initWithTexture:function(t,e){var i;return i=this._super(t,e),this.setFlippedY(!0),i},setMatrix:function(t){this._transform=Q(t),this.setNodeDirty(!0)},nodeToParentTransform:function(){return this._transform}}),cc.LWFBitmap.lwfBitmapWithTexture=function(t,e){var i;return i=new cc.LWFBitmap,i.initWithTexture(t,e)?i:null},cc.LWFLabel=cc.LabelTTF.extend({initWithString:function(t,e,i,r,s,n){return t=this._super(t,e,i,r,s,n),this.setFlippedY(!0),t},setMatrix:function(t){this._transform=Q(t),this.setNodeDirty(!0)},nodeToParentTransform:function(){return this._transform}}),cc.LWFLabel.create=function(t,e,i,r,s,n){var o;return o=new cc.LWFLabel,o.initWithString(t,e,i,r,s,n)?o:null},cc.LWFParticle=cc.ParticleSystem.extend({setMatrix:function(t){this._transform=Q(t),this.setNodeDirty(!0)},nodeToParentTransform:function(){return this._transform}}),cc.LWFParticle.create=function(t){var e;return e=new cc.LWFParticle,e.initWithFile(t)?e:null},cc.LWFNode=cc.Node.extend({_m_lwf:null,_m_targetedDelegateAdded:!1,initWithLWF:function(t){return this.init(),t.rendererFactory.lwfNode=this,this._m_lwf=t,this.scheduleUpdate(),!0},cleanup:function(){this._m_lwf.destroy(),this._super()},getLWF:function(){return this._m_lwf},update:function(t){this._super(t),this._m_lwf.exec(t),this._m_lwf.render()},onEnter:function(){this._m_lwf.interactive&&(cc.registerTargetedDelegate(0,!0,this),this._m_targetedDelegateAdded=!0),this._super()},onExit:function(){this._m_targetedDelegateAdded&&cc.unregisterTouchDelegate(this),this._super()},onTouchBegan:function(t,e){return this.onTouchMoved(t,e),this._m_lwf.inputPress(),!0},onTouchMoved:function(t){var e;e=this.convertTouchToNodeSpace(t),e=cc.Director.getInstance().convertToGL(e),this._m_lwf.inputPoint(e.x,e.y)},onTouchEnded:function(t,e){this.onTouchMoved(t,e),this._m_lwf.inputRelease()}}),cc.LWFNode.lwfNodeWithLWF=function(t){var e;return e=new cc.LWFNode,e.initWithLWF(t)?e:null})}.call(this),function(){var t={REVISION:"10",Tween:function(e){this.lwf=e.lwf,this.object=e,this.valuesStart={},this.valuesEnd={},this.valuesStartRepeat={},this.delayTime=this.repeat=this.duration=0,this.startTime=null,this.easingFunction=t.Easing.Linear.None,this.interpolationFunction=t.Interpolation.Linear,this.chainedTweens=[],this.onStartCallback=null,this.onStartCallbackFired=!1,this.onCompleteCallback=this.onUpdateCallback=null,null===this.lwf._tweens&&(this.lwf._tweens=[],"lwf"===this.lwf._tweenMode?this.lwf.addExecHandler(t._tweenExecHandler):this.lwf.addMovieEventHandler("_root",{enterFrame:t._tweenMovieHandler})),this.to=function(t,e){return void 0!==e&&(this.duration=e*this.lwf.tick),this.valuesEnd=t,this},this.start=function(){this.lwf._tweens.push(this),this.onStartCallbackFired=!1,this.startTime=this.lwf.time,this.startTime+=this.delayTime;for(var t in this.valuesEnd)if(null!==this.object[t]){if(this.valuesEnd[t]instanceof Array){if(0===this.valuesEnd[t].length)continue;this.valuesEnd[t]=[this.object[t]].concat(this.valuesEnd[t])}this.valuesStart[t]=this.object[t],!1==this.valuesStart[t]instanceof Array&&(this.valuesStart[t]*=1),this.valuesStartRepeat[t]=this.valuesStart[t]||0}return this},this.stop=function(){var t=this.lwf._tweens.indexOf(this);return-1!==t&&(this.lwf._tweens.splice(t,1),0==this.lwf._tweens.length&&this.lwf.stopTweens()),this},this.delay=function(t){return this.delayTime=t*this.lwf.tick,this},this.repeat=function(t){return this.repeat=t,this},this.easing=function(t){return this.easingFunction=t,this},this.interpolation=function(t){return this.interpolationFunction=t,this},this.chain=function(e){return"undefined"!=typeof e&&null!==e?(this.chainedTweens.push(e),this):(e=new t.Tween(this.object),this.chainedTweens.push(e),e)},this.onStart=function(t){return this.onStartCallback=t,this},this.onUpdate=function(t){return this.onUpdateCallback=t,this},this.onComplete=function(t){return this.onCompleteCallback=t,this},this.update=function(t){if(t<this.startTime)return!0;if(null===this.object.lwf)return!1;!1===this.onStartCallbackFired&&(null!==this.onStartCallback&&this.onStartCallback.call(this.object),this.onStartCallbackFired=!0);var e,i=(t-this.startTime)/(0>=this.duration?this.lwf.tick:this.duration),i=i>1?1:i,r=this.easingFunction(i);for(e in this.valuesEnd){var s=this.valuesStart[e]||0,n=this.valuesEnd[e];n instanceof Array?this.object[e]=this.interpolationFunction(n,r):("string"==typeof n&&(n=s+parseFloat(n,10)),this.object[e]=s+(n-s)*r)}if(null!==this.onUpdateCallback&&this.onUpdateCallback.call(this.object,r),1==i){if(!(0<this.repeat)){for(null!==this.onCompleteCallback&&this.onCompleteCallback.call(this.object),i=0,r=this.chainedTweens.length;r>i;i++)this.chainedTweens[i].start(t);return!1}isFinite(this.repeat)&&this.repeat--;for(e in this.valuesStartRepeat)"string"==typeof this.valuesEnd[e]&&(this.valuesStartRepeat[e]+=parseFloat(this.valuesEnd[e],10)),this.valuesStart[e]=this.valuesStartRepeat[e];this.startTime=t+this.delayTime}return!0},this.to=this.to,this.start=this.start,this.stop=this.stop,this.delay=this.delay,this.easing=this.easing,this.interpolation=this.interpolation,this.chain=this.chain,this.onStart=this.onStart,this.onUpdate=this.onUpdate,this.onComplete=this.onComplete,this.update=this.update},Easing:{Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return 1>(t*=2)?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:1>(t*=2)?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)))},Out:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)},InOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),1>(t*=2)?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4):.5*i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)+1)}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){return 1>(t*=2)?.5*t*t*(3.5949095*t-2.5949095):.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)}},Bounce:{In:function(e){return 1-t.Easing.Bounce.Out(1-e)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(e){return.5>e?.5*t.Easing.Bounce.In(2*e):.5*t.Easing.Bounce.Out(2*e-1)+.5}}}};t.Interpolation={Linear:function(e,i){var r=e.length-1,s=r*i,n=Math.floor(s),o=t.Interpolation.Utils.Linear;return 0>i?o(e[0],e[1],s):i>1?o(e[r],e[r-1],r-s):o(e[n],e[n+1>r?r:n+1],s-n)},Bezier:function(e,i){var r,s=0,n=e.length-1,o=Math.pow,a=t.Interpolation.Utils.Bernstein;for(r=0;n>=r;r++)s+=o(1-i,n-r)*o(i,r)*e[r]*a(n,r);return s},CatmullRom:function(e,i){var r=e.length-1,s=r*i,n=Math.floor(s),o=t.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(0>i&&(n=Math.floor(s=r*(1+i))),o(e[(n-1+r)%r],e[n],e[(n+1)%r],e[(n+2)%r],s-n)):0>i?e[0]-(o(e[0],e[0],e[1],e[1],-s)-e[0]):i>1?e[r]-(o(e[r],e[r],e[r-1],e[r-1],s-r)-e[r]):o(e[n?n-1:0],e[n],e[n+1>r?r:n+1],e[n+2>r?r:n+2],s-n)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(e,i){var r=t.Interpolation.Utils.Factorial;return r(e)/r(i)/r(e-i)},Factorial:function(){var t=[1];return function(e){var i,r=1;if(t[e])return t[e];for(i=e;i>1;i--)r*=i;return t[e]=r}}(),CatmullRom:function(t,e,i,r,s){t=.5*(i-t),r=.5*(r-e);var n=s*s;return(2*e-2*i+t+r)*s*n+(-3*e+3*i-2*t-r)*n+t*s+e}}};var e=global.LWF.LWF.prototype;e.setTweenMode=function(t){this._tweenMode=t},e.stopTweens=function(){null!==this._tweens&&(this._tweens=null,this.removeExecHandler(t._tweenExecHandler),this.removeMovieEventHandler("_root",{enterFrame:t._tweenMovieHandler}))},e.stopTweens=e.stopTweens,t._tweenUpdater=function(){if(null!==this._tweens){for(var t=0,e=this._tweens.length,i=this.time;e>t;)this._tweens[t].update(i)?t++:(this._tweens.splice(t,1),e--);0==this._tweens.length&&this.stopTweens()}},t._tweenExecHandler=function(){t._tweenUpdater.call(this)},t._tweenMovieHandler=function(){t._tweenUpdater.call(this.lwf)},e=global.LWF.Movie.prototype,e.addTween=function(){return new t.Tween(this)},e.stopTweens=function(){if("undefined"==typeof this.lwf||null===this.lwf||null===this.lwf._tweens)return this;for(var t=this.lwf._tweens,e=0,i=t.length;i>e;)t[e].object===this?(t.splice(e,1),i--):e++;return 0==t.length&&this.lwf.stopTweens(),this};var i=global.LWF.BitmapClip.prototype;i.addTween=e.addTween,i.stopTweens=e.stopTweens,global.LWF.Tween=t.Tween,global.LWF.Tween.Easing=t.Easing,e=global.LWF.Tween.Easing,e.Linear=t.Easing.Linear,e.Linear.None=t.Easing.Linear.None,e.Quadratic=t.Easing.Quadratic,e.Quadratic.In=t.Easing.Quadratic.In,e.Quadratic.Out=t.Easing.Quadratic.Out,e.Quadratic.InOut=t.Easing.Quadratic.InOut,e.Cubic=t.Easing.Cubic,e.Cubic.In=t.Easing.Cubic.In,e.Cubic.Out=t.Easing.Cubic.Out,e.Cubic.InOut=t.Easing.Cubic.InOut,e.Quartic=t.Easing.Quartic,e.Quartic.In=t.Easing.Quartic.In,e.Quartic.Out=t.Easing.Quartic.Out,e.Quartic.InOut=t.Easing.Quartic.InOut,e.Quintic=t.Easing.Quintic,e.Quintic.In=t.Easing.Quintic.In,e.Quintic.Out=t.Easing.Quintic.Out,e.Quintic.InOut=t.Easing.Quintic.InOut,e.Sinusoidal=t.Easing.Sinusoidal,e.Sinusoidal.In=t.Easing.Sinusoidal.In,e.Sinusoidal.Out=t.Easing.Sinusoidal.Out,e.Sinusoidal.InOut=t.Easing.Sinusoidal.InOut,e.Exponential=t.Easing.Exponential,e.Exponential.In=t.Easing.Exponential.In,e.Exponential.Out=t.Easing.Exponential.Out,e.Exponential.InOut=t.Easing.Exponential.InOut,e.Circular=t.Easing.Circular,e.Circular.In=t.Easing.Circular.In,e.Circular.Out=t.Easing.Circular.Out,e.Circular.InOut=t.Easing.Circular.InOut,e.Elastic=t.Easing.Elastic,e.Elastic.In=t.Easing.Elastic.In,e.Elastic.Out=t.Easing.Elastic.Out,e.Elastic.InOut=t.Easing.Elastic.InOut,e.Back=t.Easing.Back,e.Back.In=t.Easing.Back.In,e.Back.Out=t.Easing.Back.Out,e.Back.InOut=t.Easing.Back.InOut,e.Bounce=t.Easing.Bounce,e.Bounce.In=t.Easing.Bounce.In,e.Bounce.Out=t.Easing.Bounce.Out,e.Bounce.InOut=t.Easing.Bounce.InOut,global.LWF.Tween.Interpolation=t.Interpolation,e=global.LWF.Tween.Interpolation,e.Linear=t.Interpolation.Linear,e.Bezier=t.Interpolation.Bezier,e.CatmullRom=t.Interpolation.CatmullRom,e.Utils=t.Interpolation.Utils,e.Utils.Linear=t.Interpolation.Utils.Linear,e.Utils.Bernstein=t.Interpolation.Utils.Bernstein,e.Utils.Factorial=t.Interpolation.Utils.Factorial,e.Utils.CatmullRom=t.Interpolation.Utils.CatmullRom
}.call(this),function(){var t={Character:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RangeError:"INVALID_CHARACTER_ERR",btoaArray:{}};t.btoaArray.CharacterTable=function(t){var e,i,r=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(t.length);for(e=0,i=r.length;i>e;++e)r[e]=t.charCodeAt(e);return r}(t.Character),t.atobArray=function(e){for(var i,r,s=0,n=0,o=e.length,a=0,h=0,l=t.atobArray.DecodeTable;"="===e.charAt(o-1);)--o;if(i=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(3*(0|(o+3)/4)-[0,0,2,1][o%4]),1===o%4||0<e.length&&0===o)throw Error(t.RangeError);for(;o>n;){if(r=e.charCodeAt(n++),r=256>r?l[r]:-1,-1===r)throw Error(t.RangeError);s=(s<<6)+r,h+=6,h>=8&&(h-=8,r=s>>h,i[a++]=r,s^=r<<h)}return i},t.atobArray.DecodeTable=function(t){var e=new("undefined"!=typeof Int16Array?Int16Array:Array)(256),i=t instanceof Array?t:Array.prototype.slice.call(t);for(t=0;255>t;++t)e[t]=i.indexOf(t);return e}(t.btoaArray.CharacterTable),global.LWF.Base64=t}.call(this),function(){var t,e,i,r,s,n,o,a,h=function(t){var e,i=[];for(e=0;t>e;e++)i[e]=0;return i};"undefined"!=typeof Uint8Array&&(h=function(t){return new Uint8Array(t)}),function(){var s=function(t){this.init(),t&&this.setStream(t)};s.prototype.setStream=function(t){this._stream=t},s.prototype.releaseStream=function(){this._stream=null},s.prototype.init=function(){this.low=this._position=0,this.range=4294967295,this._cacheSize=1,this._cache=0},s.prototype.flushData=function(){var t;for(t=0;5>t;t++)this.shiftLow()},s.prototype.flushStream=function(){this._stream.flush&&this._stream.flush()},s.prototype.shiftLow=function(){var t=4294967295<this.low?1:0;if(4278190080>this.low||t){this._position+=this._cacheSize;var e=this._cache;do this._stream.writeByte(255&e+t),e=255;while(0!==--this._cacheSize);this._cache=this.low>>>24}this._cacheSize++,this.low=256*(16777215&this.low)},s.prototype.encodeDirectBits=function(t,e){var i,r;for(r=1<<e-1,i=e-1;i>=0;i--,r>>>=1)this.range>>>=1,t&r&&(this.low+=this.range),16777215>=this.range&&(this.range*=256,this.shiftLow())},s.prototype.getProcessedSizeAdd=function(){return this._cacheSize+this._position+4},s.initBitModels=function(t,e){var i;for(e&&!t&&("undefined"!=typeof Uint16Array?t=new Uint16Array(e):(t=[],t.length=e)),i=0;i<t.length;i++)t[i]=1024;return t},s.prototype.encode=function(t,e,i){var r=t[e],s=(this.range>>>11)*r;0===i?(this.range=s,t[e]=r+(2048-r>>>5)):(this.low+=s,this.range-=s,t[e]=r-(r>>>5)),16777215>=this.range&&(this.range*=256,this.shiftLow())};var n=[];"undefined"!=typeof Uint32Array&&(n=new Uint32Array(512)),function(){var t,e;for(t=8;t>=0;t--){var i=1<<9-t;for(e=1<<9-t-1;i>e;e++)n[e]=(t<<6)+(i-e<<6>>>9-t-1)}}(),s.getPrice=function(t,e){return n[(2047&(t-e^-e))>>>2]},s.getPrice0=function(t){return n[t>>>2]},s.getPrice1=function(t){return n[2048-t>>>2]},s.kNumBitPriceShiftBits=6,t=s;var o=function(t){t&&(this.setStream(t),this.init())};o.prototype.setStream=function(t){this._stream=t},o.prototype.releaseStream=function(){this._stream=null},o.prototype.init=function(){var t=5;for(this._code=0,this._range=-1;t--;)this._code=this._code<<8|this._stream.readByte()},o.prototype.decodeDirectBits=function(t){for(var e,i=0;t--;)this._range>>>=1,e=this._code-this._range>>>31,this._code-=this._range&e-1,i=i<<1|1-e,0===(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return i},o.prototype.decodeBit=function(t,e){var i=t[e],r=(this._range>>>11)*i;return(2147483648^this._code)<(2147483648^r)?(this._range=r,t[e]+=2048-i>>>5,0===(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=r,this._code-=r,t[e]-=i>>>5,0===(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},e=o,o=function(t){this._numBitLevels=t,this.init()},o.prototype.init=function(){this._models=s.initBitModels(null,1<<this._numBitLevels)},o.prototype.encode=function(t,e){var i,r=1;for(i=this._numBitLevels;i>0;){i--;var s=1&e>>>i;t.encode(this._models,r,s),r=r<<1|s}},o.prototype.reverseEncode=function(t,e){var i,r=1;for(i=0;i<this._numBitLevels;i++){var s=1&e;t.encode(this._models,r,s),r=r<<1|s,e>>>=1}},o.reverseEncode=function(t,e,i,r,s){var n,o=1;for(n=0;r>n;n++){var a=1&s;i.encode(t,e+o,a),o=o<<1|a,s>>>=1}},o.prototype.getPrice=function(t){var e,i=0,r=1;for(e=this._numBitLevels;e>0;){e--;var n=1&t>>>e,i=i+s.getPrice(this._models[r],n),r=r<<1|n}return i},o.prototype.reverseGetPrice=function(t){var e,i=0,r=1;for(e=this._numBitLevels;e>0;e--){var n=1&t;t>>>=1,i+=s.getPrice(this._models[r],n),r=r<<1|n}return i},o.reverseGetPrice=function(t,e,i,r){for(var n=0,o=1;i>0;i--){var a=1&r;r>>>=1,n+=s.getPrice(t[e+o],a),o=o<<1|a}return n},i=o,o=function(t){this._numBitLevels=t,this.init()},o.prototype.init=function(){this._models=s.initBitModels(null,1<<this._numBitLevels)},o.prototype.decode=function(t){for(var e=1,i=this._numBitLevels;i--;)e=e<<1|t.decodeBit(this._models,e);return e-(1<<this._numBitLevels)},o.prototype.reverseDecode=function(t){for(var e,i=1,r=0,s=0;s<this._numBitLevels;++s)e=t.decodeBit(this._models,i),i=i<<1|e,r|=e<<s;return r},o.reverseDecode=function(t,e,i,r){for(var s,n=1,o=0,a=0;r>a;++a)s=i.decodeBit(t,e+n),n=n<<1|s,o|=s<<a;return o},r=o}.call(this),function(){function t(){if(e.call(this),this._cyclicBufferSize=0,this._son=[],this._hash=[],this._cutValue=255,this._hashSizeSum=0,this.HASH_ARRAY=!0,this.kNumHashDirectBytes=0,this.kMinMatchCheck=4,this.kFixHashSize=o+a,6<=arguments.length){var t=Array.prototype.slice.call(arguments,0);this.setType(t.shift());var i=t.pop();this.create.apply(this,t),this.setStream(i),this.init()}}var e=function(){if(4<=arguments.length){var t=Array.prototype.slice.call(arguments,0),e=t.pop();this.create.apply(this,t),this.setStream(e),this.init()}};e.prototype.moveBlock=function(){var t,e=this._bufferOffset+this._pos+this._keepSizeBefore;e>0&&e--;var i=this._bufferOffset+this._streamPos-e;for(t=0;i>t;t++)this._bufferBase[t]=this._bufferBase[e+t];this._bufferOffset-=e},e.prototype.readBlock=function(){if(!this._streamEndWasReached)for(;;){var t=-this._bufferOffset+this._blockSize-this._streamPos;if(0===t)break;if(t=this._stream.read(this._bufferBase,this._bufferOffset+this._streamPos,t),0>=t){this._posLimit=this._streamPos,this._bufferOffset+this._posLimit>this._pointerToLastSafePosition&&(this._posLimit=this._pointerToLastSafePosition-this._bufferOffset),this._streamEndWasReached=!0;break}this._streamPos+=t,this._streamPos>=this._pos+this._keepSizeAfter&&(this._posLimit=this._streamPos-this._keepSizeAfter)}},e.prototype.free=function(){this._bufferBase=null},e.prototype.create=function(t,e,i){this._keepSizeBefore=t,this._keepSizeAfter=e,t=t+e+i,this._bufferBase&&this._blockSize===t||(this.free(),this._blockSize=t,this._bufferBase=h(this._blockSize)),this._pointerToLastSafePosition=this._blockSize-e},e.prototype.setStream=function(t){this._stream=t},e.prototype.releaseStream=function(){this._stream=null},e.prototype.init=function(){this._streamPos=this._pos=this._bufferOffset=0,this._streamEndWasReached=!1,this.readBlock()},e.prototype.movePos=function(){this._pos++,this._pos>this._posLimit&&(this._bufferOffset+this._pos>this._pointerToLastSafePosition&&this.moveBlock(),this.readBlock())},e.prototype.getIndexByte=function(t){return this._bufferBase[this._bufferOffset+this._pos+t]},e.prototype.getMatchLen=function(t,e,i){var r;for(this._streamEndWasReached&&this._pos+t+i>this._streamPos&&(i=this._streamPos-(this._pos+t)),e++,t=this._bufferOffset+this._pos+t,r=0;i>r&&this._bufferBase[t+r]===this._bufferBase[t+r-e];)r++;return r},e.prototype.getNumAvailableBytes=function(){return this._streamPos-this._pos},e.prototype.reduceOffsets=function(t){this._bufferOffset+=t,this._posLimit-=t,this._pos-=t,this._streamPos-=t};var i=function(){this._windowSize=0};i.prototype.create=function(t){this._buffer&&this._windowSize===t||(this._buffer=h(t)),this._windowSize=t,this._streamPos=this._pos=0},i.prototype.flush=function(){var t=this._pos-this._streamPos;if(0!==t){for(;t--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},i.prototype.releaseStream=function(){this.flush(),this._stream=null},i.prototype.setStream=function(t){this.releaseStream(),this._stream=t},i.prototype.init=function(t){t||(this._pos=this._streamPos=0)},i.prototype.copyBlock=function(t,e){var i=this._pos-t-1;for(0>i&&(i+=this._windowSize);e--;)i>=this._windowSize&&(i=0),this._buffer[this._pos++]=this._buffer[i++],this._pos>=this._windowSize&&this.flush()},i.prototype.putByte=function(t){this._buffer[this._pos++]=t,this._pos>=this._windowSize&&this.flush()},i.prototype.getByte=function(t){return t=this._pos-t-1,0>t&&(t+=this._windowSize),this._buffer[t]},s=i;var r=function(){var t=[];"undefined"!=typeof Uint32Array&&(t=new Uint32Array(256));var e,i,r;for(e=0;256>e;e++){for(r=e,i=0;8>i;i++)r=0!==(1&r)?3988292384^r>>>1:r>>>1;t[e]=r}return t}(),o=1024,a=65536,l=o,c=e.prototype;t.prototype=Object.create(c),t.prototype.setType=function(t){(this.HASH_ARRAY=t>2)?(this.kNumHashDirectBytes=0,this.kMinMatchCheck=4,this.kFixHashSize=o+a):(this.kNumHashDirectBytes=2,this.kMinMatchCheck=3,this.kFixHashSize=0)},t.prototype.init=function(){var t;for(c.init.call(this),t=0;t<this._hashSizeSum;t++)this._hash[t]=0;this._cyclicBufferPos=0,this.reduceOffsets(-1)},t.prototype.movePos=function(){++this._cyclicBufferPos>=this._cyclicBufferSize&&(this._cyclicBufferPos=0),c.movePos.call(this),1073741823===this._pos&&this.normalize()},t.prototype.create=function(t,e,i,r){return t>1073741567?!1:(this._cutValue=16+(i>>>1),c.create.call(this,t+e,i+r,(t+e+i+r)/2+256),this._matchMaxLen=i,e=t+1,this._cyclicBufferSize!==e&&(this._cyclicBufferSize=e,this._son=[],this._son.length=2*e),e=65536,this.HASH_ARRAY&&(e=t-1,e|=e>>>1,e|=e>>>2,e|=e>>>4,e=(e|e>>>8)>>>1,e|=65535,e>16777216&&(e>>>=1),this._hashMask=e,e++,e+=this.kFixHashSize),e!==this._hashSizeSum&&(this._hashSizeSum=e,this._hash=[],this._hash.length=this._hashSizeSum),!0)},t.prototype.getMatches=function(t){var e;if(this._pos+this._matchMaxLen<=this._streamPos)e=this._matchMaxLen;else if(e=this._streamPos-this._pos,e<this.kMinMatchCheck)return this.movePos(),0;var i=0,s=this._pos>this._cyclicBufferSize?this._pos-this._cyclicBufferSize:0,n=this._bufferOffset+this._pos,h=1,c=0,u=0,p=0;if(this.HASH_ARRAY)var d=r[this._bufferBase[n]]^this._bufferBase[n+1],u=d&o-1,d=d^this._bufferBase[n+2]<<8,p=d&a-1,c=(d^r[this._bufferBase[n+3]]<<5)&this._hashMask;else c=this._bufferBase[n]^this._bufferBase[n+1]<<8;if(d=this._hash[this.kFixHashSize+c],this.HASH_ARRAY){var f=this._hash[u],m=this._hash[l+p];this._hash[u]=this._pos,this._hash[l+p]=this._pos,f>s&&this._bufferBase[this._bufferOffset+f]===this._bufferBase[n]&&(t[i++]=h=2,t[i++]=this._pos-f-1),m>s&&this._bufferBase[this._bufferOffset+m]===this._bufferBase[n]&&(m===f&&(i-=2),t[i++]=h=3,t[i++]=this._pos-m-1,f=m),0!==i&&f===d&&(i-=2,h=1)}for(this._hash[this.kFixHashSize+c]=this._pos,u=(this._cyclicBufferPos<<1)+1,p=this._cyclicBufferPos<<1,c=f=this.kNumHashDirectBytes,0!==this.kNumHashDirectBytes&&d>s&&this._bufferBase[this._bufferOffset+d+this.kNumHashDirectBytes]!==this._bufferBase[n+this.kNumHashDirectBytes]&&(t[i++]=h=this.kNumHashDirectBytes,t[i++]=this._pos-d-1),m=this._cutValue;;){if(s>=d||0===m--){this._son[u]=this._son[p]=0;break}var y=this._pos-d,_=(y<=this._cyclicBufferPos?this._cyclicBufferPos-y:this._cyclicBufferPos-y+this._cyclicBufferSize)<<1,g=this._bufferOffset+d,v=Math.min(c,f);if(this._bufferBase[g+v]===this._bufferBase[n+v]){for(;++v!==e&&this._bufferBase[g+v]===this._bufferBase[n+v];);if(v>h&&(t[i++]=h=v,t[i++]=y-1,v===e)){this._son[p]=this._son[_],this._son[u]=this._son[_+1];break}}this._bufferBase[g+v]<this._bufferBase[n+v]?(this._son[p]=d,p=_+1,d=this._son[p],f=v):(this._son[u]=d,u=_,d=this._son[u],c=v)}return this.movePos(),i},t.prototype.skip=function(t){var e,i,s,n,h,c,u,p,d,f,m,y;do{if(this._pos+this._matchMaxLen<=this._streamPos)e=this._matchMaxLen;else if(e=this._streamPos-this._pos,e<this.kMinMatchCheck){this.movePos();continue}for(i=this._pos>this._cyclicBufferSize?this._pos-this._cyclicBufferSize:0,s=this._bufferOffset+this._pos,this.HASH_ARRAY?(n=r[this._bufferBase[s]]^this._bufferBase[s+1],h=n&o-1,this._hash[h]=this._pos,n^=this._bufferBase[s+2]<<8,h=n&a-1,this._hash[l+h]=this._pos,h=(n^r[this._bufferBase[s+3]]<<5)&this._hashMask):h=this._bufferBase[s]^this._bufferBase[s+1]<<8,n=this._hash[this.kFixHashSize+h],this._hash[this.kFixHashSize+h]=this._pos,h=(this._cyclicBufferPos<<1)+1,c=this._cyclicBufferPos<<1,u=p=this.kNumHashDirectBytes,d=this._cutValue;;){if(i>=n||0===d--){this._son[h]=this._son[c]=0;break}if(f=this._pos-n,f=(f<=this._cyclicBufferPos?this._cyclicBufferPos-f:this._cyclicBufferPos-f+this._cyclicBufferSize)<<1,m=this._bufferOffset+n,y=p>u?u:p,this._bufferBase[m+y]===this._bufferBase[s+y]){for(;++y!==e&&this._bufferBase[m+y]===this._bufferBase[s+y];);if(y===e){this._son[c]=this._son[f],this._son[h]=this._son[f+1];break}}this._bufferBase[m+y]<this._bufferBase[s+y]?(this._son[c]=n,c=f+1,n=this._son[c],p=y):(this._son[h]=n,h=f,n=this._son[h],u=y)}this.movePos()}while(0!==--t)},t.prototype.normalizeLinks=function(t,e,i){var r,s;for(r=0;e>r;r++)s=t[r],s=i>=s?0:s-i,t[r]=s},t.prototype.normalize=function(){var t=this._pos-this._cyclicBufferSize;this.normalizeLinks(this._son,2*this._cyclicBufferSize,t),this.normalizeLinks(this._hash,this._hashSizeSum,t),this.reduceOffsets(t)},t.prototype.setCutValue=function(t){this._cutValue=t},n=t}.call(this),function(){var l=Object.create(null);l.kNumRepDistances=4,l.kNumStates=12,l.stateInit=function(){return 0},l.stateUpdateChar=function(t){return 4>t?0:10>t?t-3:t-6},l.stateUpdateMatch=function(t){return 7>t?7:10},l.stateUpdateRep=function(t){return 7>t?8:11},l.stateUpdateShortRep=function(t){return 7>t?9:11},l.stateIsCharState=function(t){return 7>t},l.kNumPosSlotBits=6,l.kDicLogSizeMin=0,l.kNumLenToPosStatesBits=2,l.kNumLenToPosStates=1<<l.kNumLenToPosStatesBits,l.kMatchMinLen=2,l.getLenToPosState=function(t){return t-=l.kMatchMinLen,t<l.kNumLenToPosStates?t:l.kNumLenToPosStates-1},l.kNumAlignBits=4,l.kAlignTableSize=1<<l.kNumAlignBits,l.kAlignMask=l.kAlignTableSize-1,l.kStartPosModelIndex=4,l.kEndPosModelIndex=14,l.kNumPosModels=l.kEndPosModelIndex-l.kStartPosModelIndex,l.kNumFullDistances=1<<l.kEndPosModelIndex/2,l.kNumLitPosStatesBitsEncodingMax=4,l.kNumLitContextBitsMax=8,l.kNumPosStatesBitsMax=4,l.kNumPosStatesMax=1<<l.kNumPosStatesBitsMax,l.kNumPosStatesBitsEncodingMax=4,l.kNumPosStatesEncodingMax=1<<l.kNumPosStatesBitsEncodingMax,l.kNumLowLenBits=3,l.kNumMidLenBits=3,l.kNumHighLenBits=8,l.kNumLowLenSymbols=1<<l.kNumLowLenBits,l.kNumMidLenSymbols=1<<l.kNumMidLenBits,l.kNumLenSymbols=l.kNumLowLenSymbols+l.kNumMidLenSymbols+(1<<l.kNumHighLenBits),l.kMatchMaxLen=l.kMatchMinLen+l.kNumLenSymbols-1;var c=t.initBitModels,u=function(){var t,e=h(2048),i=2;for(e[0]=0,e[1]=1,t=2;22>t;t++){var r,s=1<<(t>>1)-1;for(r=0;s>r;r++,i++)e[i]=t}return e}(),p=function(t){return 2048>t?u[t]:2097152>t?u[t>>>10]+20:u[t>>>20]+40},d=function(){var e;for(this._state=l.stateInit(),this._previousByte=0,this._repDistances=[],this._repDistances.length=l.kNumRepDistances,this._optimum=[],this._matchFinder=null,this._rangeEncoder=new t,this._isMatch=c(null,l.kNumStates<<l.kNumPosStatesBitsMax),this._isRep=c(null,l.kNumStates),this._isRepG0=c(null,l.kNumStates),this._isRepG1=c(null,l.kNumStates),this._isRepG2=c(null,l.kNumStates),this._isRep0Long=c(null,l.kNumStates<<l.kNumPosStatesBitsMax),this._posSlotEncoder=[],this._posEncoders=c(null,l.kNumFullDistances-l.kEndPosModelIndex),this._posAlignEncoder=new i(l.kNumAlignBits),this._lenEncoder=new d.LenPriceTableEncoder,this._repMatchLenEncoder=new d.LenPriceTableEncoder,this._literalEncoder=new d.LiteralEncoder,this._matchDistances=[],this._matchDistances.length=2*l.kMatchMaxLen+2,e=0;e<this._matchDistances.length;e++)this._matchDistances[e]=0;for(this._numFastBytes=32,this._optimumCurrentIndex=this._optimumEndIndex=this._additionalOffset=this._numDistancePairs=this._longestMatchLength=0,this._longestMatchWasFound=!1,this._posSlotPrices=[],this._distancesPrices=[],this._alignPrices=[],this._alignPriceCount=0,this._distTableSize=44,this._posStateBits=2,this._posStateMask=3,this._numLiteralPosStateBits=0,this._numLiteralContextBits=3,this._dictionarySize=4194304,this._numFastBytesPrev=this._dictionarySizePrev=4294967295,this.nowPos64=0,this._finished=!1,this._inStream=null,this._matchFinderType=1,this._needReleaseMFStream=this._writeEndMark=!1,this.reps=[],this.repLens=[],e=this.backRes=0;4096>e;e++)this._optimum[e]=new d.Optimal;for(e=0;e<l.kNumLenToPosStates;e++)this._posSlotEncoder[e]=new i(l.kNumPosSlotBits);this._matchPriceCount=0,this.processedInSize=[0],this.processedOutSize=[0],this.finished=[!1]};d.prototype.baseInit=function(){var t;for(this._state=l.stateInit(),t=this._previousByte=0;t<l.kNumRepDistances;t++)this._repDistances[t]=0};var f=d.LiteralEncoder=function(){this._coders=null,this._numPosBits=this._numPrevBits=-1,this._posMask=0};f.Encoder2=function(){this._encoders=c(null,768)},f.Encoder2.prototype.init=function(){c(this._encoders)},f.Encoder2.prototype.encode=function(t,e){var i,r=1;for(i=7;i>=0;i--){var s=1&e>>>i;t.encode(this._encoders,r,s),r=r<<1|s}},f.Encoder2.prototype.encodeMatched=function(t,e,i){var r,s=1,n=!0;for(r=7;r>=0;r--){var o=1&i>>r,a=s;n&&(n=1&e>>>r,a+=1+n<<8,n=n===o),t.encode(this._encoders,a,o),s=s<<1|o}},f.Encoder2.prototype.getPrice=function(e,i,r){var s,n=0,o=1,a=7;if(e)for(;a>=0;a--)if(s=1&i>>>a,e=1&r>>>a,n+=t.getPrice(this._encoders[(1+s<<8)+o],e),o=o<<1|e,s!==e){a--;break}for(;a>=0;a--)e=1&r>>>a,n+=t.getPrice(this._encoders[o],e),o=o<<1|e;return n},f.prototype.create=function(t,e){var i;if(!this._coders||this._numPrevBits!==e||this._numPosBits!==t){this._numPosBits=t,this._posMask=(1<<t)-1,this._numPrevBits=e;var r=1<<this._numPrevBits+this._numPosBits;for(this._coders=[],i=0;r>i;i++)this._coders[i]=new f.Encoder2}},f.prototype.init=function(){var t,e=1<<this._numPrevBits+this._numPosBits;for(t=0;e>t;t++)this._coders[t].init()},f.prototype.getSubCoder=function(t,e){return this._coders[((t&this._posMask)<<this._numPrevBits)+(e>>8-this._numPrevBits)]};var m=d.LenEncoder=function(){var t;for(this._choice=c(null,2),this._lowCoder=[],this._midCoder=[],this._highCoder=new i(l.kNumHighLenBits),t=0;t<l.kNumPosStatesEncodingMax;t++)this._lowCoder[t]=new i(l.kNumLowLenBits),this._midCoder[t]=new i(l.kNumMidLenBits)};m.prototype.init=function(t){var e;for(c(this._choice),e=0;t>e;e++)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},m.prototype.encode=function(t,e,i){e<l.kNumLowLenSymbols?(t.encode(this._choice,0,0),this._lowCoder[i].encode(t,e)):(e-=l.kNumLowLenSymbols,t.encode(this._choice,0,1),e<l.kNumMidLenSymbols?(t.encode(this._choice,1,0),this._midCoder[i].encode(t,e)):(t.encode(this._choice,1,1),this._highCoder.encode(t,e-l.kNumMidLenSymbols)))},m.prototype.setPrices=function(e,i,r,s){var n,o=t.getPrice0(this._choice[0]),a=t.getPrice1(this._choice[0]),h=a+t.getPrice0(this._choice[1]),a=a+t.getPrice1(this._choice[1]);for(n=0;n<l.kNumLowLenSymbols;n++){if(n>=i)return;r[s+n]=o+this._lowCoder[e].getPrice(n)}for(;n<l.kNumLowLenSymbols+l.kNumMidLenSymbols;n++){if(n>=i)return;r[s+n]=h+this._midCoder[e].getPrice(n-l.kNumLowLenSymbols)}for(;i>n;n++)r[s+n]=a+this._highCoder.getPrice(n-l.kNumLowLenSymbols-l.kNumMidLenSymbols)};var y=d.LenPriceTableEncoder=function(){m.call(this),this._prices=[],this._counters=[],this._tableSize=0};y.prototype=Object.create(m.prototype),y.prototype.setTableSize=function(t){this._tableSize=t},y.prototype.getPrice=function(t,e){return this._prices[e*l.kNumLenSymbols+t]},y.prototype.updateTable=function(t){this.setPrices(t,this._tableSize,this._prices,t*l.kNumLenSymbols),this._counters[t]=this._tableSize},y.prototype.updateTables=function(t){var e;for(e=0;t>e;e++)this.updateTable(e)},y.prototype.encode=function(t){return function(e,i,r){t.call(this,e,i,r),0===--this._counters[r]&&this.updateTable(r)}}(y.prototype.encode),y=d.Optimal=function(){this.state=0,this.prev2=this.prev1IsChar=!1,this.backs3=this.backs2=this.backs1=this.backs0=this.backPrev=this.posPrev=this.price=this.backPrev2=this.posPrev2=0},y.prototype.makeAsChar=function(){this.backPrev=-1,this.prev1IsChar=!1},y.prototype.makeAsShortRep=function(){this.backPrev=0,this.prev1IsChar=!1},y.prototype.isShortRep=function(){return 0===this.backPrev},d.prototype.create=function(){var t;if(!this._matchFinder){var e=new n;t=4,0===this._matchFinderType&&(t=2),e.setType(t),this._matchFinder=e}this._literalEncoder.create(this._numLiteralPosStateBits,this._numLiteralContextBits),(this._dictionarySize!==this._dictionarySizePrev||this._numFastBytesPrev!==this._numFastBytes)&&(this._matchFinder.create(this._dictionarySize,4096,this._numFastBytes,l.kMatchMaxLen+1),this._dictionarySizePrev=this._dictionarySize,this._numFastBytesPrev=this._numFastBytes)},d.prototype.setWriteEndMarkerMode=function(t){this._writeEndMark=t},d.prototype.init=function(){var t;for(this.baseInit(),this._rangeEncoder.init(),c(this._isMatch),c(this._isRep0Long),c(this._isRep),c(this._isRepG0),c(this._isRepG1),c(this._isRepG2),c(this._posEncoders),this._literalEncoder.init(),t=0;t<l.kNumLenToPosStates;t++)this._posSlotEncoder[t].init();this._lenEncoder.init(1<<this._posStateBits),this._repMatchLenEncoder.init(1<<this._posStateBits),this._posAlignEncoder.init(),this._longestMatchWasFound=!1,this._additionalOffset=this._optimumCurrentIndex=this._optimumEndIndex=0},d.prototype.readMatchDistances=function(){var t=0;return this._numDistancePairs=this._matchFinder.getMatches(this._matchDistances),0<this._numDistancePairs&&(t=this._matchDistances[this._numDistancePairs-2],t===this._numFastBytes&&(t+=this._matchFinder.getMatchLen(t-1,this._matchDistances[this._numDistancePairs-1],l.kMatchMaxLen-t))),this._additionalOffset++,t},d.prototype.movePos=function(t){t>0&&(this._matchFinder.skip(t),this._additionalOffset+=t)},d.prototype.getRepLen1Price=function(e,i){return t.getPrice0(this._isRepG0[e])+t.getPrice0(this._isRep0Long[(e<<l.kNumPosStatesBitsMax)+i])},d.prototype.getPureRepPrice=function(e,i,r){var s;return 0===e?(s=t.getPrice0(this._isRepG0[i]),s+=t.getPrice1(this._isRep0Long[(i<<l.kNumPosStatesBitsMax)+r])):(s=t.getPrice1(this._isRepG0[i]),1===e?s+=t.getPrice0(this._isRepG1[i]):(s+=t.getPrice1(this._isRepG1[i]),s+=t.getPrice(this._isRepG2[i],e-2))),s},d.prototype.getRepPrice=function(t,e,i,r){return this._repMatchLenEncoder.getPrice(e-l.kMatchMinLen,r)+this.getPureRepPrice(t,i,r)},d.prototype.getPosLenPrice=function(t,e,i){var r=l.getLenToPosState(e);if(t<l.kNumFullDistances)t=this._distancesPrices[r*l.kNumFullDistances+t];else{var s,n=this._posSlotPrices,r=r<<l.kNumPosSlotBits;s=131072>t?u[t>>>6]+12:134217728>t?u[t>>>16]+32:u[t>>>26]+52,t=n[r+s]+this._alignPrices[t&l.kAlignMask]}return t+this._lenEncoder.getPrice(e-l.kMatchMinLen,i)},d.prototype.backward=function(t){this._optimumEndIndex=t;var e=this._optimum[t].posPrev,i=this._optimum[t].backPrev;do{this._optimum[t].prev1IsChar&&(this._optimum[e].makeAsChar(),this._optimum[e].posPrev=e-1,this._optimum[t].prev2&&(this._optimum[e-1].prev1IsChar=!1,this._optimum[e-1].posPrev=this._optimum[t].posPrev2,this._optimum[e-1].backPrev=this._optimum[t].backPrev2));var r=e,s=i,i=this._optimum[r].backPrev,e=this._optimum[r].posPrev;this._optimum[r].backPrev=s,this._optimum[r].posPrev=t,t=r}while(t>0);return this.backRes=this._optimum[0].backPrev,this._optimumCurrentIndex=this._optimum[0].posPrev},d.prototype.getOptimum=function(e){if(this._optimumEndIndex!==this._optimumCurrentIndex)return e=this._optimum[this._optimumCurrentIndex].posPrev-this._optimumCurrentIndex,this.backRes=this._optimum[this._optimumCurrentIndex].backPrev,this._optimumCurrentIndex=this._optimum[this._optimumCurrentIndex].posPrev,e;this._optimumCurrentIndex=this._optimumEndIndex=0;var i;this._longestMatchWasFound?(i=this._longestMatchLength,this._longestMatchWasFound=!1):i=this.readMatchDistances();var r=this._numDistancePairs,s=this._matchFinder.getNumAvailableBytes()+1;if(2>s)return this.backRes=-1,1;var n,o=0;for(n=0;n<l.kNumRepDistances;n++)this.reps[n]=this._repDistances[n],this.repLens[n]=this._matchFinder.getMatchLen(-1,this.reps[n],l.kMatchMaxLen),this.repLens[n]>this.repLens[o]&&(o=n);if(this.repLens[o]>=this._numFastBytes)return this.backRes=o,e=this.repLens[o],this.movePos(e-1),e;if(i>=this._numFastBytes)return this.backRes=this._matchDistances[r-1]+l.kNumRepDistances,this.movePos(i-1),i;var a=this._matchFinder.getIndexByte(-1),h=this._matchFinder.getIndexByte(-this._repDistances[0]-2);if(2>i&&a!==h&&2>this.repLens[o])return this.backRes=-1,1;this._optimum[0].state=this._state;var c=e&this._posStateMask;this._optimum[1].price=t.getPrice0(this._isMatch[(this._state<<l.kNumPosStatesBitsMax)+c])+this._literalEncoder.getSubCoder(e,this._previousByte).getPrice(!l.stateIsCharState(this._state),h,a),this._optimum[1].makeAsChar();var u=t.getPrice1(this._isMatch[(this._state<<l.kNumPosStatesBitsMax)+c]),p=u+t.getPrice1(this._isRep[this._state]);if(h===a&&(n=p+this.getRepLen1Price(this._state,c),n<this._optimum[1].price&&(this._optimum[1].price=n,this._optimum[1].makeAsShortRep())),o=i>=this.repLens[o]?i:this.repLens[o],2>o)return this.backRes=this._optimum[1].backPrev,1;this._optimum[1].posPrev=0,this._optimum[0].backs0=this.reps[0],this._optimum[0].backs1=this.reps[1],this._optimum[0].backs2=this.reps[2],this._optimum[0].backs3=this.reps[3],n=o;do this._optimum[n--].price=268435455;while(n>=2);for(n=0;n<l.kNumRepDistances;n++){var d=this.repLens[n];if(!(2>d)){var f=p+this.getPureRepPrice(n,this._state,c);do{var s=f+this._repMatchLenEncoder.getPrice(d-2,c),m=this._optimum[d];s<m.price&&(m.price=s,m.posPrev=0,m.backPrev=n,m.prev1IsChar=!1)}while(2<=--d)}}if(u+=t.getPrice0(this._isRep[this._state]),n=2<=this.repLens[0]?this.repLens[0]+1:2,i>=n){for(i=0;n>this._matchDistances[i];)i+=2;for(;d=this._matchDistances[i+1],p=u+this.getPosLenPrice(d,n,c),f=this._optimum[n],p<f.price&&(f.price=p,f.posPrev=0,f.backPrev=d+l.kNumRepDistances,f.prev1IsChar=!1),n!==this._matchDistances[i]||(i+=2,i!==r);n++);}for(i=0;;){if(i++,i===o)return this.backward(i);if(f=this.readMatchDistances(),r=this._numDistancePairs,f>=this._numFastBytes)return this._longestMatchLength=f,this._longestMatchWasFound=!0,this.backward(i);e++,d=this._optimum[i].posPrev,this._optimum[i].prev1IsChar?(d--,this._optimum[i].prev2?(n=this._optimum[this._optimum[i].posPrev2].state,n=this._optimum[i].backPrev2<l.kNumRepDistances?l.stateUpdateRep(n):l.stateUpdateMatch(n)):n=this._optimum[d].state,n=l.stateUpdateChar(n)):n=this._optimum[d].state,d===i-1?n=this._optimum[i].isShortRep()?l.stateUpdateShortRep(n):l.stateUpdateChar(n):(this._optimum[i].prev1IsChar&&this._optimum[i].prev2?(d=this._optimum[i].posPrev2,c=this._optimum[i].backPrev2,n=l.stateUpdateRep(n)):(c=this._optimum[i].backPrev,n=c<l.kNumRepDistances?l.stateUpdateRep(n):l.stateUpdateMatch(n)),d=this._optimum[d],c<l.kNumRepDistances?0===c?(this.reps[0]=d.backs0,this.reps[1]=d.backs1,this.reps[2]=d.backs2,this.reps[3]=d.backs3):1===c?(this.reps[0]=d.backs1,this.reps[1]=d.backs0,this.reps[2]=d.backs2,this.reps[3]=d.backs3):2===c?(this.reps[0]=d.backs2,this.reps[1]=d.backs0,this.reps[2]=d.backs1,this.reps[3]=d.backs3):(this.reps[0]=d.backs3,this.reps[1]=d.backs0,this.reps[2]=d.backs1,this.reps[3]=d.backs2):(this.reps[0]=c-l.kNumRepDistances,this.reps[1]=d.backs0,this.reps[2]=d.backs1,this.reps[3]=d.backs2)),this._optimum[i].state=n,this._optimum[i].backs0=this.reps[0],this._optimum[i].backs1=this.reps[1],this._optimum[i].backs2=this.reps[2],this._optimum[i].backs3=this.reps[3];var u=this._optimum[i].price,a=this._matchFinder.getIndexByte(-1),h=this._matchFinder.getIndexByte(-this.reps[0]-2),c=e&this._posStateMask,m=u+t.getPrice0(this._isMatch[(n<<l.kNumPosStatesBitsMax)+c])+this._literalEncoder.getSubCoder(e,this._matchFinder.getIndexByte(-2)).getPrice(!l.stateIsCharState(n),h,a),d=this._optimum[i+1],y=!1;if(m<d.price&&(d.price=m,d.posPrev=i,d.makeAsChar(),y=!0),u+=t.getPrice1(this._isMatch[(n<<l.kNumPosStatesBitsMax)+c]),p=u+t.getPrice1(this._isRep[n]),h!==a||d.posPrev<i&&0===d.backPrev||(s=p+this.getRepLen1Price(n,c),s<=d.price&&(d.price=s,d.posPrev=i,d.makeAsShortRep(),y=!0)),d=this._matchFinder.getNumAvailableBytes()+1,s=d=Math.min(4095-i,d),!(2>s)){if(s>this._numFastBytes&&(s=this._numFastBytes),!y&&h!==a&&(a=Math.min(d-1,this._numFastBytes),a=this._matchFinder.getMatchLen(0,this.reps[0],a),a>=2)){for(var h=l.stateUpdateChar(n),y=e+1&this._posStateMask,_=m+t.getPrice1(this._isMatch[(h<<l.kNumPosStatesBitsMax)+y])+t.getPrice1(this._isRep[h]),m=i+1+a;m>o;)this._optimum[++o].price=268435455;a=_+this.getRepPrice(0,a,h,y),m=this._optimum[m],a<m.price&&(m.price=a,m.posPrev=i+1,m.backPrev=0,m.prev1IsChar=!0,m.prev2=!1)}for(m=2,a=0;a<l.kNumRepDistances;a++)if(h=this._matchFinder.getMatchLen(-1,this.reps[a],s),!(2>h)){y=h;do{for(;i+h>o;)this._optimum[++o].price=268435455;var _=p+this.getRepPrice(a,h,n,c),g=this._optimum[i+h];_<g.price&&(g.price=_,g.posPrev=i,g.backPrev=a,g.prev1IsChar=!1)}while(2<=--h);if(h=y,0===a&&(m=h+1),d>h&&(y=Math.min(d-1-h,this._numFastBytes),y=this._matchFinder.getMatchLen(h,this.reps[a],y),y>=2)){for(var _=l.stateUpdateRep(n),g=e+h&this._posStateMask,v=p+this.getRepPrice(a,h,n,c)+t.getPrice0(this._isMatch[(_<<l.kNumPosStatesBitsMax)+g])+this._literalEncoder.getSubCoder(e+h,this._matchFinder.getIndexByte(h-2)).getPrice(!0,this._matchFinder.getIndexByte(h-1-(this.reps[a]+1)),this._matchFinder.getIndexByte(h-1)),_=l.stateUpdateChar(_),g=e+h+1&this._posStateMask,M=v+t.getPrice1(this._isMatch[(_<<l.kNumPosStatesBitsMax)+g])+t.getPrice1(this._isRep[_]),v=h+1+y;i+v>o;)this._optimum[++o].price=268435455;y=M+this.getRepPrice(0,y,_,g),_=this._optimum[i+v],y<_.price&&(_.price=y,_.posPrev=i+h+1,_.backPrev=0,_.prev1IsChar=!0,_.prev2=!0,_.posPrev2=i,_.backPrev2=a)}}if(f>s){for(f=s,r=0;f>this._matchDistances[r];)r+=2;this._matchDistances[r]=f,r+=2}if(f>=m){for(u+=t.getPrice0(this._isRep[n]);i+f>o;)this._optimum[++o].price=268435455;for(p=0;m>this._matchDistances[p];)p+=2;for(f=m;;f++)if(s=this._matchDistances[p+1],y=u+this.getPosLenPrice(s,f,c),m=this._optimum[i+f],y<m.price&&(m.price=y,m.posPrev=i,m.backPrev=s+l.kNumRepDistances,m.prev1IsChar=!1),f===this._matchDistances[p]){if(d>f&&(m=Math.min(d-1-f,this._numFastBytes),m=this._matchFinder.getMatchLen(f,s,m),m>=2)){for(a=l.stateUpdateMatch(n),h=e+f&this._posStateMask,y=y+t.getPrice0(this._isMatch[(a<<l.kNumPosStatesBitsMax)+h])+this._literalEncoder.getSubCoder(e+f,this._matchFinder.getIndexByte(f-2)).getPrice(!0,this._matchFinder.getIndexByte(f-(s+1)-1),this._matchFinder.getIndexByte(f-1)),a=l.stateUpdateChar(a),h=e+f+1&this._posStateMask,_=y+t.getPrice1(this._isMatch[(a<<l.kNumPosStatesBitsMax)+h])+t.getPrice1(this._isRep[a]),y=f+1+m;i+y>o;)this._optimum[++o].price=268435455;m=_+this.getRepPrice(0,m,a,h),a=this._optimum[i+y],m<a.price&&(a.price=m,a.posPrev=i+f+1,a.backPrev=0,a.prev1IsChar=!0,a.prev2=!0,a.posPrev2=i,a.backPrev2=s+l.kNumRepDistances)}if(p+=2,p===r)break}}}}},d.prototype.changePair=function(t,e){return 33554432>t&&e>=t<<7},d.prototype.writeEndMarker=function(t){if(this._writeEndMark){this._rangeEncoder.encode(this._isMatch,(this._state<<l.kNumPosStatesBitsMax)+t,1),this._rangeEncoder.encode(this._isRep,this._state,0),this._state=l.stateUpdateMatch(this._state);var e=l.kMatchMinLen;this._lenEncoder.encode(this._rangeEncoder,e-l.kMatchMinLen,t),t=(1<<l.kNumPosSlotBits)-1,e=l.getLenToPosState(e),this._posSlotEncoder[e].encode(this._rangeEncoder,t),this._rangeEncoder.encodeDirectBits(1073741823>>l.kNumAlignBits,30-l.kNumAlignBits),this._posAlignEncoder.reverseEncode(this._rangeEncoder,1073741823&l.kAlignMask)}},d.prototype.flush=function(t){this.releaseMFStream(),this.writeEndMarker(t&this._posStateMask),this._rangeEncoder.flushData(),this._rangeEncoder.flushStream()
},d.prototype.codeOneBlock=function(t,e,r){if(t[0]=0,e[0]=0,r[0]=!0,this._inStream&&(this._matchFinder.setStream(this._inStream),this._matchFinder.init(),this._needReleaseMFStream=!0,this._inStream=null),!this._finished){this._finished=!0;var s,n,o=this.nowPos64;if(0===this.nowPos64){if(0===this._matchFinder.getNumAvailableBytes())return this.flush(this.nowPos64),void 0;this.readMatchDistances(),s=this.nowPos64&this._posStateMask,this._rangeEncoder.encode(this._isMatch,(this._state<<l.kNumPosStatesBitsMax)+s,0),this._state=l.stateUpdateChar(this._state),n=this._matchFinder.getIndexByte(0-this._additionalOffset),this._literalEncoder.getSubCoder(this.nowPos64,this._previousByte).encode(this._rangeEncoder,n),this._previousByte=n,this._additionalOffset--,this.nowPos64++}if(0===this._matchFinder.getNumAvailableBytes())this.flush(this.nowPos64);else for(;;){var a=this.getOptimum(this.nowPos64);n=this.backRes,s=this.nowPos64&this._posStateMask;var h=(this._state<<l.kNumPosStatesBitsMax)+s;if(1===a&&-1===n)this._rangeEncoder.encode(this._isMatch,h,0),n=this._matchFinder.getIndexByte(-this._additionalOffset),s=this._literalEncoder.getSubCoder(this.nowPos64,this._previousByte),l.stateIsCharState(this._state)?s.encode(this._rangeEncoder,n):(h=this._matchFinder.getIndexByte(-this._repDistances[0]-1-this._additionalOffset),s.encodeMatched(this._rangeEncoder,h,n)),this._previousByte=n,this._state=l.stateUpdateChar(this._state);else{if(this._rangeEncoder.encode(this._isMatch,h,1),n<l.kNumRepDistances){if(this._rangeEncoder.encode(this._isRep,this._state,1),0===n?(this._rangeEncoder.encode(this._isRepG0,this._state,0),1===a?this._rangeEncoder.encode(this._isRep0Long,h,0):this._rangeEncoder.encode(this._isRep0Long,h,1)):(this._rangeEncoder.encode(this._isRepG0,this._state,1),1===n?this._rangeEncoder.encode(this._isRepG1,this._state,0):(this._rangeEncoder.encode(this._isRepG1,this._state,1),this._rangeEncoder.encode(this._isRepG2,this._state,n-2))),1===a?this._state=l.stateUpdateShortRep(this._state):(this._repMatchLenEncoder.encode(this._rangeEncoder,a-l.kMatchMinLen,s),this._state=l.stateUpdateRep(this._state)),s=this._repDistances[n],0!==n){for(;n>=1;n--)this._repDistances[n]=this._repDistances[n-1];this._repDistances[0]=s}}else{if(this._rangeEncoder.encode(this._isRep,this._state,0),this._state=l.stateUpdateMatch(this._state),this._lenEncoder.encode(this._rangeEncoder,a-l.kMatchMinLen,s),n-=l.kNumRepDistances,s=p(n),h=l.getLenToPosState(a),this._posSlotEncoder[h].encode(this._rangeEncoder,s),s>=l.kStartPosModelIndex){var h=(s>>>1)-1,c=(2|1&s)<<h,u=n-c;s<l.kEndPosModelIndex?i.reverseEncode(this._posEncoders,c-s-1,this._rangeEncoder,h,u):(this._rangeEncoder.encodeDirectBits(u>>l.kNumAlignBits,h-l.kNumAlignBits),this._posAlignEncoder.reverseEncode(this._rangeEncoder,u&l.kAlignMask),this._alignPriceCount++)}for(s=n,n=l.kNumRepDistances-1;n>=1;n--)this._repDistances[n]=this._repDistances[n-1];this._repDistances[0]=s,this._matchPriceCount++}this._previousByte=this._matchFinder.getIndexByte(a-1-this._additionalOffset)}if(this._additionalOffset-=a,this.nowPos64+=a,0===this._additionalOffset){if(128<=this._matchPriceCount&&this.fillDistancesPrices(),this._alignPriceCount>=l.kAlignTableSize&&this.fillAlignPrices(),t[0]=this.nowPos64,e[0]=this._rangeEncoder.getProcessedSizeAdd(),0===this._matchFinder.getNumAvailableBytes()){this.flush(this.nowPos64);break}if(4096<=this.nowPos64-o){this._finished=!1,r[0]=!1;break}}}}},d.prototype.releaseMFStream=function(){this._matchFinder&&this._needReleaseMFStream&&(this._matchFinder.releaseStream(),this._needReleaseMFStream=!1)},d.prototype.setOutStream=function(t){this._rangeEncoder.setStream(t)},d.prototype.releaseOutStream=function(){this._rangeEncoder.releaseStream()},d.prototype.releaseStreams=function(){this.releaseMFStream(),this.releaseOutStream()},d.prototype.setStreams=function(t,e){this._inStream=t,this._finished=!1,this.create(),this.setOutStream(e),this.init(),this.fillDistancesPrices(),this.fillAlignPrices(),this._lenEncoder.setTableSize(this._numFastBytes+1-l.kMatchMinLen),this._lenEncoder.updateTables(1<<this._posStateBits),this._repMatchLenEncoder.setTableSize(this._numFastBytes+1-l.kMatchMinLen),this._repMatchLenEncoder.updateTables(1<<this._posStateBits),this.nowPos64=0},d.prototype.code=function(t,e,i,r,s){this._needReleaseMFStream=!1;try{for(this.setStreams(t,e,i,r);this.codeOneBlock(this.processedInSize,this.processedOutSize,this.finished),!this.finished[0];)s&&s.setProgress(this.processedInSize[0],this.processedOutSize[0])}finally{this.releaseStreams()}},d.prototype.writeCoderProperties=function(t){var e,i=h(5);for(i[0]=9*(5*this._posStateBits+this._numLiteralPosStateBits)+this._numLiteralContextBits,e=0;4>e;e++)i[1+e]=this._dictionarySize>>>8*e;for(e=0;5>e;e++)t.writeByte(i[e])},d.prototype.fillDistancesPrices=function(){var e=[];e.length=l.kNumFullDistances;var r,s;for(r=l.kStartPosModelIndex;r<l.kNumFullDistances;r++){s=p(r);var n=(s>>>1)-1,o=(2|1&s)<<n;e[r]=i.reverseGetPrice(this._posEncoders,o-s-1,n,r-o)}for(n=0;n<l.kNumLenToPosStates;n++){for(r=this._posSlotEncoder[n],o=n<<l.kNumPosSlotBits,s=0;s<this._distTableSize;s++)this._posSlotPrices[o+s]=r.getPrice(s);for(s=l.kEndPosModelIndex;s<this._distTableSize;s++)this._posSlotPrices[o+s]+=(s>>>1)-1-l.kNumAlignBits<<t.kNumBitPriceShiftBits;for(s=n*l.kNumFullDistances,r=0;r<l.kStartPosModelIndex;r++)this._distancesPrices[s+r]=this._posSlotPrices[o+r];for(;r<l.kNumFullDistances;r++)this._distancesPrices[s+r]=this._posSlotPrices[o+p(r)]+e[r]}this._matchPriceCount=0},d.prototype.fillAlignPrices=function(){var t;for(t=0;t<l.kAlignTableSize;t++)this._alignPrices[t]=this._posAlignEncoder.reverseGetPrice(t);this._alignPriceCount=0},d.prototype.setAlgorithm=function(){return!0},d.prototype.setDictionarySize=function(t){if(t<1<<l.kDicLogSizeMin||t>536870912)return!1;this._dictionarySize=t;for(var e=0;t>1<<e;)e++;return this._distTableSize=2*e,!0},d.prototype.setNumFastBytes=function(t){return 5>t||t>l.kMatchMaxLen?!1:(this._numFastBytes=t,!0)},d.prototype.setMatchFinder=function(t){if(0>t||t>2)return!1;var e=this._matchFinderType;return this._matchFinderType=t,this._matchFinder&&e!=this._matchFinderType&&(this._dictionarySizePrev=-1,this._matchFinder=null),!0},d.prototype.setLcLpPb=function(t,e,i){return 0>e||e>l.kNumLitPosStatesBitsEncodingMax||0>t||t>l.kNumLitContextBitsMax||0>i||i>l.kNumPosStatesBitsEncodingMax?!1:(this._numLiteralPosStateBits=e,this._numLiteralContextBits=t,this._posStateBits=i,this._posStateMask=(1<<this._posStateBits)-1,!0)},d.prototype.setEndMarkerMode=function(t){this._writeEndMark=t},d.EMatchFinderTypeBT2=0,d.EMatchFinderTypeBT4=1,o=d;var c=t.initBitModels,_=function(){this._choice=c(null,2),this._lowCoder=[],this._midCoder=[],this._highCoder=new r(8),this._numPosStates=0};_.prototype.create=function(t){for(;this._numPosStates<t;++this._numPosStates)this._lowCoder[this._numPosStates]=new r(3),this._midCoder[this._numPosStates]=new r(3)},_.prototype.init=function(){var t=this._numPosStates;for(c(this._choice);t--;)this._lowCoder[t].init(),this._midCoder[t].init();this._highCoder.init()},_.prototype.decode=function(t,e){return 0===t.decodeBit(this._choice,0)?this._lowCoder[e].decode(t):0===t.decodeBit(this._choice,1)?8+this._midCoder[e].decode(t):16+this._highCoder.decode(t)};var g=function(){};g.Decoder2=function(){this._decoders=c(null,768)},g.Decoder2.prototype.init=function(){c(this._decoders)},g.Decoder2.prototype.decodeNormal=function(t){var e=1;do e=e<<1|t.decodeBit(this._decoders,e);while(256>e);return 255&e},g.Decoder2.prototype.decodeWithMatchByte=function(t,e){var i,r,s=1;do if(i=1&e>>7,e<<=1,r=t.decodeBit(this._decoders,(1+i<<8)+s),s=s<<1|r,i!==r){for(;256>s;)s=s<<1|t.decodeBit(this._decoders,s);break}while(256>s);return 255&s},g.prototype.create=function(t,e){var i;if(!this._coders||this._numPrevBits!==e||this._numPosBits!==t)for(this._numPosBits=t,this._posMask=(1<<t)-1,this._numPrevBits=e,this._coders=[],i=1<<this._numPrevBits+this._numPosBits;i--;)this._coders[i]=new g.Decoder2},g.prototype.init=function(){for(var t=1<<this._numPrevBits+this._numPosBits;t--;)this._coders[t].init()},g.prototype.getDecoder=function(t,e){return this._coders[((t&this._posMask)<<this._numPrevBits)+((255&e)>>>8-this._numPrevBits)]},y=function(){var t;for(this._outWindow=new s,this._rangeDecoder=new e,this._isMatchDecoders=c(null,l.kNumStates<<l.kNumPosStatesBitsMax),this._isRepDecoders=c(null,l.kNumStates),this._isRepG0Decoders=c(null,l.kNumStates),this._isRepG1Decoders=c(null,l.kNumStates),this._isRepG2Decoders=c(null,l.kNumStates),this._isRep0LongDecoders=c(null,l.kNumStates<<l.kNumPosStatesBitsMax),this._posSlotDecoder=[],this._posDecoders=c(null,l.kNumFullDistances-l.kEndPosModelIndex),this._posAlignDecoder=new r(l.kNumAlignBits),this._lenDecoder=new _,this._repLenDecoder=new _,this._literalDecoder=new g,this._dictionarySizeCheck=this._dictionarySize=-1,t=this._posStateMask=0;t<l.kNumLenToPosStates;t++)this._posSlotDecoder[t]=new r(l.kNumPosSlotBits)},y.prototype.setDictionarySize=function(t){return 0>t?!1:(this._dictionarySize!==t&&(this._dictionarySize=t,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},y.prototype.setLcLpPb=function(t,e,i){var r=1<<i;return t>l.kNumLitContextBitsMax||e>4||i>l.kNumPosStatesBitsMax?!1:(this._literalDecoder.create(e,t),this._lenDecoder.create(r),this._repLenDecoder.create(r),this._posStateMask=r-1,!0)},y.prototype.init=function(){var t=l.kNumLenToPosStates;for(this._outWindow.init(!1),c(this._isMatchDecoders),c(this._isRepDecoders),c(this._isRepG0Decoders),c(this._isRepG1Decoders),c(this._isRepG2Decoders),c(this._isRep0LongDecoders),c(this._posDecoders),this._literalDecoder.init();t--;)this._posSlotDecoder[t].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},y.prototype.code=function(t,e,i){var s,n=0,o=0,a=0,h=0,c=0,u=0;for(this._rangeDecoder.setStream(t),this._outWindow.setStream(e),this.init(),t=l.stateInit();0>i||i>c;)if(e=c&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(t<<l.kNumPosStatesBitsMax)+e))u=this._literalDecoder.getDecoder(c,u),u=l.stateIsCharState(t)?u.decodeNormal(this._rangeDecoder):u.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(n)),this._outWindow.putByte(u),t=l.stateUpdateChar(t),c++;else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,t))u=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,t)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(t<<l.kNumPosStatesBitsMax)+e)&&(t=l.stateUpdateShortRep(t),u=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,t)?s=o:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,t)?s=a:(s=h,h=a),a=o),o=n,n=s),0===u&&(u=l.kMatchMinLen+this._repLenDecoder.decode(this._rangeDecoder,e),t=l.stateUpdateRep(t));else if(h=a,a=o,o=n,u=l.kMatchMinLen+this._lenDecoder.decode(this._rangeDecoder,e),t=l.stateUpdateMatch(t),e=this._posSlotDecoder[l.getLenToPosState(u)].decode(this._rangeDecoder),e>=l.kStartPosModelIndex){if(s=(e>>1)-1,n=(2|1&e)<<s,e<l.kEndPosModelIndex)n+=r.reverseDecode(this._posDecoders,n-e-1,this._rangeDecoder,s);else if(n+=this._rangeDecoder.decodeDirectBits(s-l.kNumAlignBits)<<l.kNumAlignBits,n+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),0>n){if(-1===n)break;return!1}}else n=e;if(n>=c||n>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(n,u),c+=u,u=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},y.prototype.setDecoderProperties=function(t){var e,i,r;if(5>t.length)return!1;if(e=255&t[0],i=e%9,e=~~(e/9),!this.setLcLpPb(i,e%5,~~(e/5)))return!1;for(i=e=0,r=1;4>i;i++,r*=256)e+=(255&t[1+i])*r;return this.setDictionarySize(e)},y.prototype.setDecoderPropertiesFromStream=function(t){var e,i=[];for(e=0;5>e;e++)i[e]=t.readByte();return this.setDecoderProperties(i)},a=y}.call(this);var l=Object.create(null);l.decompress=function(t,e,i,r){var s=new a;if(!s.setDecoderProperties(t))throw"Incorrect stream properties";if(!s.code(e,i,r))throw"Error in data stream";return!0},l.decompressFile=function(t,e){var i,r,s=new a,n=!0;if(!("readByte"in t)){var o=t;t={size:o.length,pos:0,readByte:function(){return o[this.pos++]}}}if(!s.setDecoderPropertiesFromStream(t))throw"Incorrect stream properties";var l=0;for(i=0,r=1;4>i;i++,r*=256)l+=t.readByte()*r;var c=0;for(i=0,r=1;4>i;i++,r*=256)c+=t.readByte()*r;if(i=l+4294967296*c,4294967295===l&&4294967295===c?i=-1:c>=2097152&&(i=-1),e&&"writeByte"in e||(e={buffer:i>=0?h(i):[],pos:0,writeByte:function(t){this.buffer[this.pos++]=t}},n=e.buffer),!s.code(t,e,i))throw"Error in data stream";return n};var c=[{a:0,d:0,fb:0,mf:null,lc:0,lp:0,pb:0},{a:0,d:16,fb:64,mf:"hc4",lc:3,lp:0,pb:2},{a:0,d:20,fb:64,mf:"hc4",lc:3,lp:0,pb:2},{a:1,d:19,fb:64,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:20,fb:64,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:21,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:22,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:23,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:24,fb:255,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:25,fb:255,mf:"bt4",lc:3,lp:0,pb:2}],u=function(t){var e=new o,i={a:1,d:23,fb:128,lc:3,lp:0,pb:2,mf:"bt4",eos:!1};if(t){"number"==typeof t&&(t=c[t]);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return e.setAlgorithm(i.a),e.setDictionarySize(1<<+i.d),e.setNumFastBytes(+i.fb),e.setMatchFinder("bt4"===i.mf?o.EMatchFinderTypeBT4:o.EMatchFinderTypeBT2),e.setLcLpPb(+i.lc,+i.lp,+i.pb),e.setEndMarkerMode(!!i.eos),e};l.compress=function(t,e,i,r){return i=u(i),i.writeCoderProperties(e),i.code(t,e,-1,-1,{setProgress:function(t,e){r&&r(t,e)}}),!0},l.compressFile=function(t,e,i,r){i=u(i);var s=!0;if(!("readByte"in t)){var n=t;t={size:n.length,pos:0,readByte:function(){return n[this.pos++]},read:function(t,e,i){for(var r=0;i>r&&this.pos<n.length;)t[e++]=n[this.pos++],r++;return r}}}var o;return"size"in t&&0<=t.size?o=t.size:(o=-1,i.setEndMarkerMode(!0)),e&&"writeByte"in e||(e={buffer:[],pos:0,writeByte:function(t){this.buffer[this.pos++]=t},flush:function(){}},s=e.buffer),i.writeCoderProperties(e),function(t){var i;for(i=0;8>i;i++)e.writeByte(255&t),t=Math.floor(t/256)}(o),i.code(t,e,o,-1,{setProgress:function(t,e){r&&r(t,e)}}),s},global.LWF.LZMA=l}.call(this)}.call(this);